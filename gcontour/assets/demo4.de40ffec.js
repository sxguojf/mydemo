import{i as H,j as f,q as X,l as E,o as z,c as K,a as t,t as Q,m as h,x as C,v as N,b as Z,p as ee,d as oe,n as te}from"./vendor.ee5d4042.js";import{c as se}from"./axios.07c1c759.js";import{m as le}from"./md4.ebb458dc.js";import{c as ne,W as ae,S as w,T as L,a as v,F as b,C as ue,V as re,b as ie,G as ce}from"./index.1124259f.js";import{_ as de}from"./index.fe4cc012.js";const m=l=>(ee("data-v-86c487a0"),l=l(),oe(),l),pe={class:"demo"},fe={class:"left"},ve=m(()=>t("div",{class:"caption"},"Contour Demo - OpenLayers\u6D4B\u8BD5",-1)),me={class:"tools"},ye={class:"options"},ge=["value"],he=m(()=>t("label",{for:"fill"},"\u586B\u8272",-1)),we=["value"],be=m(()=>t("label",{for:"solid"},"\u5355\u8272\u7EBF",-1)),xe=["value"],_e=m(()=>t("label",{for:"color"},"\u5F69\u8272\u7EBF",-1)),Fe=m(()=>t("label",{for:"showLabel"},"\u6807\u503C",-1)),ke=m(()=>t("label",{for:"centerVisble"},"\u9AD8\u4F4E\u4E2D\u5FC3",-1));var A;(function(l){l[l.fill=0]="fill",l[l.solid=1]="solid",l[l.color=2]="color"})(A||(A={}));const Se=H({setup(l){const V=f(),r=f("Contour V3.0 typescript\u7248"),B=f(),a=f(0),x=f(!1),_=f(!1);let n,d;const I=ne({colormap:"jet",nshades:256,format:"hex",alpha:1}),y=(i,e="")=>{r.value+=`
---------------------------------------
`,r.value+=i,r.value+=`
---------------------------------------
`,r.value+=e,te(()=>{var o;return(o=B.value)==null?void 0:o.scrollTo({top:1e4,behavior:"smooth"})})};y("\u4F7F\u7528OpenLayer\u663E\u793A\u505A\u6D4B\u8BD5\u3002"),X(()=>{d=V.value.getMap()}),E(x,()=>{F()}),E(_,()=>{F()}),E(a,()=>{F()});const F=()=>{n&&n.changed()},T=async i=>{const e=await le(i);y(`\u6253\u5F00\u6587\u4EF6:${i}`,JSON.stringify(e.head,null,2)),y("\u7B49\u503C\u7EBF\u5206\u6790\u8FDB\u5EA6");const o=se(e.data,e.levels,{pointConvert:s=>{s.x=e.head.beginLon+s.x*e.head.lonSpan,s.y=e.head.beginLat+s.y*e.head.latSpan},progressCallback:(s,k)=>{const g=`  \u5206\u6790:${s}  ${Math.round(k)}%`;console.log(g),r.value+=g+`
`}}),c=o.smooth().toJSON(!0,!0,!0);y("\u7B49\u503C\u7EBF\u4FE1\u606F",JSON.stringify(c.properties).substring(0,1e3)),n&&d.removeLayer(n);const u="navy",D=new w({text:new L({text:"",font:"bold 24px sans-serif",stroke:new v({color:"white"}),fill:new b({color:u}),offsetY:-10}),image:new ue({radius:2,stroke:new v({color:"white"}),fill:new b({color:u})})}),O=new w({text:new L({font:"12px sans-serif",stroke:new v({color:"white"}),fill:new b({color:u}),offsetY:10})}),j=new w({stroke:new v({color:u,width:1.2})}),$=new w({text:new L({font:"bold 12px sans-serif",stroke:new v({color:"white"}),fill:new b({color:u}),placement:"line"})}),M=new w({fill:new b({color:"gray"}),stroke:new v({color:u,width:.3})}),J=o.realLevels[o.realLevels.length-1],R=o.realLevels[0],Y=c.properties;n=new re({opacity:.8,source:new ie({features:new ce({dataProjection:"EPSG:4326",featureProjection:d.getView().getProjection()}).readFeatures(c),wrapX:!1,attributions:`${e.head.caption}  ${Y.attribution}`}),style:s=>{const k=s.get("level"),g=a.value==1?u:P(k,R,J),p=[],S=s.getGeometry().getType().toUpperCase();if(_.value&&S.indexOf("POINT")>=0){const W=s.get("high")?"H":"L";D.getText().setText(W),p.push(D);const q=s.get("level").toString();O.getText().setText(q),p.push(O)}else S.indexOf("LINE")>=0?(a.value!=0&&(j.getStroke().setColor(g),p.push(j)),x.value&&($.getText().setText(s.get("level").toString()),p.push($))):a.value===0&&S.indexOf("POLY")>=0&&(M.getFill().setColor(g),p.push(M));return p}}),d.addLayer(n),y("\u6DFB\u52A0\u5230OpenLayers\u5730\u56FE",`\u5B8C\u6210!



`)},P=(i,e,o)=>{if(o-e<1e-5)return console.log(o,e,o-e),"transparent";let c=(i-e)/(o-e)*255;if(c<0||c>255)return"transparent";{const u=Math.round(c);return I[u]}},U=()=>{n&&d.getView().fit(n.getSource().getExtent())},G=()=>{n&&d.removeLayer(n),n=null};return(i,e)=>(z(),K("div",pe,[t("div",fe,[ve,t("pre",{ref_key:"infoDom",ref:B,class:"info"},Q(r.value),513),t("div",me,[t("button",{onClick:e[0]||(e[0]=o=>T("./data/18020808.000"))},"\u6570\u636E1"),t("button",{onClick:e[1]||(e[1]=o=>T("./data/10112608.000"))},"\u6570\u636E2"),t("button",{onClick:G},"\u6E05\u7A7A\u5730\u56FE"),t("button",{onClick:e[2]||(e[2]=o=>r.value="")},"\u6E05\u9664log"),t("button",{onClick:U},"\u5168\u56FE")]),t("div",ye,[h(t("input",{type:"radio",name:"linestyle",id:"fill",value:0,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value=o)},null,8,ge),[[C,a.value]]),he,h(t("input",{type:"radio",name:"linestyle",id:"solid",value:1,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value=o)},null,8,we),[[C,a.value]]),be,h(t("input",{type:"radio",name:"linestyle",id:"color",value:2,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value=o)},null,8,xe),[[C,a.value]]),_e,h(t("input",{type:"checkbox",id:"showLabel","onUpdate:modelValue":e[6]||(e[6]=o=>x.value=o)},null,512),[[N,x.value]]),Fe,h(t("input",{type:"checkbox",id:"centerVisble","onUpdate:modelValue":e[7]||(e[7]=o=>_.value=o)},null,512),[[N,_.value]]),ke])]),Z(ae,{class:"map",ref_key:"mapRef",ref:V},null,512)]))}});var Te=de(Se,[["__scopeId","data-v-86c487a0"]]);export{Te as default};
