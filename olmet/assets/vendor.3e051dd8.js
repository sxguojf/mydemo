function makeMap(n,e){const t=Object.create(null),i=n.split(",");for(let r=0;r<i.length;r++)t[i[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(n){return!!n||n===""}function normalizeStyle(n){if(isArray$5(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=isString$2(i)?parseStringStyle(i):normalizeStyle(i);if(r)for(const s in r)e[s]=r[s]}return e}else{if(isString$2(n))return n;if(isObject$1(n))return n}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(n){const e={};return n.split(listDelimiterRE).forEach(t=>{if(t){const i=t.split(propertyDelimiterRE);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function normalizeClass(n){let e="";if(isString$2(n))e=n;else if(isArray$5(n))for(let t=0;t<n.length;t++){const i=normalizeClass(n[t]);i&&(e+=i+" ")}else if(isObject$1(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function looseCompareArrays(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=looseEqual(n[i],e[i]);return t}function looseEqual(n,e){if(n===e)return!0;let t=isDate$2(n),i=isDate$2(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=isArray$5(n),i=isArray$5(e),t||i)return t&&i?looseCompareArrays(n,e):!1;if(t=isObject$1(n),i=isObject$1(e),t||i){if(!t||!i)return!1;const r=Object.keys(n).length,s=Object.keys(e).length;if(r!==s)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!looseEqual(n[o],e[o]))return!1}}return String(n)===String(e)}function looseIndexOf(n,e){return n.findIndex(t=>looseEqual(t,e))}const toDisplayString=n=>n==null?"":isArray$5(n)||isObject$1(n)&&(n.toString===objectToString$1||!isFunction$1(n.toString))?JSON.stringify(n,replacer,2):String(n),replacer=(n,e)=>e&&e.__v_isRef?replacer(n,e.value):isMap$1(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r])=>(t[`${i} =>`]=r,t),{})}:isSet$1(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject$1(e)&&!isArray$5(e)&&!isPlainObject$1(e)?String(e):e,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=n=>onRE.test(n),isModelListener=n=>n.startsWith("onUpdate:"),extend$4=Object.assign,remove=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn$2=(n,e)=>hasOwnProperty.call(n,e),isArray$5=Array.isArray,isMap$1=n=>toTypeString(n)==="[object Map]",isSet$1=n=>toTypeString(n)==="[object Set]",isDate$2=n=>n instanceof Date,isFunction$1=n=>typeof n=="function",isString$2=n=>typeof n=="string",isSymbol$1=n=>typeof n=="symbol",isObject$1=n=>n!==null&&typeof n=="object",isPromise=n=>isObject$1(n)&&isFunction$1(n.then)&&isFunction$1(n.catch),objectToString$1=Object.prototype.toString,toTypeString=n=>objectToString$1.call(n),toRawType=n=>toTypeString(n).slice(8,-1),isPlainObject$1=n=>toTypeString(n)==="[object Object]",isIntegerKey=n=>isString$2(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(n=>n.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(n=>n.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(n=>n.charAt(0).toUpperCase()+n.slice(1)),toHandlerKey=cacheStringFunction(n=>n?`on${capitalize(n)}`:""),hasChanged=(n,e)=>!Object.is(n,e),invokeArrayFns=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},def=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},toNumber=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;const effectScopeStack=[];class EffectScope{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(effectScopeStack.push(this),activeEffectScope=this)}off(){this.active&&(effectScopeStack.pop(),activeEffectScope=effectScopeStack[effectScopeStack.length-1])}stop(e){if(this.active){if(this.effects.forEach(t=>t.stop()),this.cleanups.forEach(t=>t()),this.scopes&&this.scopes.forEach(t=>t.stop(!0)),this.parent&&!e){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}function recordEffectScope(n,e){e=e||activeEffectScope,e&&e.active&&e.effects.push(n)}const createDep=n=>{const e=new Set(n);return e.w=0,e.n=0,e},wasTracked=n=>(n.w&trackOpBit)>0,newTracked=n=>(n.n&trackOpBit)>0,initDepMarkers=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=trackOpBit},finalizeDepMarkers=n=>{const{deps:e}=n;if(e.length){let t=0;for(let i=0;i<e.length;i++){const r=e[i];wasTracked(r)&&!newTracked(r)?r.delete(n):e[t++]=r,r.w&=~trackOpBit,r.n&=~trackOpBit}e.length=t}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30,effectStack=[];let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],recordEffectScope(this,i)}run(){if(!this.active)return this.fn();if(!effectStack.length||!effectStack.includes(this))try{return effectStack.push(activeEffect=this),enableTracking(),trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,resetTracking(),effectStack.pop();const e=effectStack.length;activeEffect=e>0?effectStack[e-1]:void 0}}stop(){this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function enableTracking(){trackStack.push(shouldTrack),shouldTrack=!0}function resetTracking(){const n=trackStack.pop();shouldTrack=n===void 0?!0:n}function track(n,e,t){if(!isTracking())return;let i=targetMap.get(n);i||targetMap.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=createDep()),trackEffects(r)}function isTracking(){return shouldTrack&&activeEffect!==void 0}function trackEffects(n,e){let t=!1;effectTrackDepth<=maxMarkerBits?newTracked(n)||(n.n|=trackOpBit,t=!wasTracked(n)):t=!n.has(activeEffect),t&&(n.add(activeEffect),activeEffect.deps.push(n))}function trigger(n,e,t,i,r,s){const o=targetMap.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&isArray$5(n))o.forEach((l,c)=>{(c==="length"||c>=i)&&a.push(l)});else switch(t!==void 0&&a.push(o.get(t)),e){case"add":isArray$5(n)?isIntegerKey(t)&&a.push(o.get("length")):(a.push(o.get(ITERATE_KEY)),isMap$1(n)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$5(n)||(a.push(o.get(ITERATE_KEY)),isMap$1(n)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1(n)&&a.push(o.get(ITERATE_KEY));break}if(a.length===1)a[0]&&triggerEffects(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);triggerEffects(createDep(l))}}function triggerEffects(n,e){for(const t of isArray$5(n)?n:[...n])(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(isSymbol$1)),get$4=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=toRaw(this);for(let s=0,o=this.length;s<o;s++)track(i,"get",s+"");const r=i[e](...t);return r===-1||r===!1?i[e](...t.map(toRaw)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){pauseTracking();const i=toRaw(this)[e].apply(this,t);return resetTracking(),i}}),n}function createGetter(n=!1,e=!1){return function(i,r,s){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(n?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(i))return i;const o=isArray$5(i);if(!n&&o&&hasOwn$2(arrayInstrumentations,r))return Reflect.get(arrayInstrumentations,r,s);const a=Reflect.get(i,r,s);return(isSymbol$1(r)?builtInSymbols.has(r):isNonTrackableKeys(r))||(n||track(i,"get",r),e)?a:isRef(a)?!o||!isIntegerKey(r)?a.value:a:isObject$1(a)?n?readonly(a):reactive(a):a}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(n=!1){return function(t,i,r,s){let o=t[i];if(isReadonly(o)&&isRef(o)&&!isRef(r))return!1;if(!n&&!isReadonly(r)&&(isShallow(r)||(r=toRaw(r),o=toRaw(o)),!isArray$5(t)&&isRef(o)&&!isRef(r)))return o.value=r,!0;const a=isArray$5(t)&&isIntegerKey(i)?Number(i)<t.length:hasOwn$2(t,i),l=Reflect.set(t,i,r,s);return t===toRaw(s)&&(a?hasChanged(r,o)&&trigger(t,"set",i,r):trigger(t,"add",i,r)),l}}function deleteProperty(n,e){const t=hasOwn$2(n,e);n[e];const i=Reflect.deleteProperty(n,e);return i&&t&&trigger(n,"delete",e,void 0),i}function has$4(n,e){const t=Reflect.has(n,e);return(!isSymbol$1(e)||!builtInSymbols.has(e))&&track(n,"has",e),t}function ownKeys(n){return track(n,"iterate",isArray$5(n)?"length":ITERATE_KEY),Reflect.ownKeys(n)}const mutableHandlers={get:get$4,set:set$1,deleteProperty,has:has$4,ownKeys},readonlyHandlers={get:readonlyGet,set(n,e){return!0},deleteProperty(n,e){return!0}},shallowReactiveHandlers=extend$4({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=n=>n,getProto$1=n=>Reflect.getPrototypeOf(n);function get$1$1(n,e,t=!1,i=!1){n=n.__v_raw;const r=toRaw(n),s=toRaw(e);e!==s&&!t&&track(r,"get",e),!t&&track(r,"get",s);const{has:o}=getProto$1(r),a=i?toShallow:t?toReadonly:toReactive;if(o.call(r,e))return a(n.get(e));if(o.call(r,s))return a(n.get(s));n!==r&&n.get(e)}function has$1$1(n,e=!1){const t=this.__v_raw,i=toRaw(t),r=toRaw(n);return n!==r&&!e&&track(i,"has",n),!e&&track(i,"has",r),n===r?t.has(n):t.has(n)||t.has(r)}function size(n,e=!1){return n=n.__v_raw,!e&&track(toRaw(n),"iterate",ITERATE_KEY),Reflect.get(n,"size",n)}function add$3(n){n=toRaw(n);const e=toRaw(this);return getProto$1(e).has.call(e,n)||(e.add(n),trigger(e,"add",n,n)),this}function set$1$1(n,e){e=toRaw(e);const t=toRaw(this),{has:i,get:r}=getProto$1(t);let s=i.call(t,n);s||(n=toRaw(n),s=i.call(t,n));const o=r.call(t,n);return t.set(n,e),s?hasChanged(e,o)&&trigger(t,"set",n,e):trigger(t,"add",n,e),this}function deleteEntry(n){const e=toRaw(this),{has:t,get:i}=getProto$1(e);let r=t.call(e,n);r||(n=toRaw(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&trigger(e,"delete",n,void 0),s}function clear$1(){const n=toRaw(this),e=n.size!==0,t=n.clear();return e&&trigger(n,"clear",void 0,void 0),t}function createForEach(n,e){return function(i,r){const s=this,o=s.__v_raw,a=toRaw(o),l=e?toShallow:n?toReadonly:toReactive;return!n&&track(a,"iterate",ITERATE_KEY),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function createIterableMethod(n,e,t){return function(...i){const r=this.__v_raw,s=toRaw(r),o=isMap$1(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...i),u=t?toShallow:e?toReadonly:toReactive;return!e&&track(s,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(n){return function(...e){return n==="delete"?!1:this}}function createInstrumentations(){const n={get(s){return get$1$1(this,s)},get size(){return size(this)},has:has$1$1,add:add$3,set:set$1$1,delete:deleteEntry,clear:clear$1,forEach:createForEach(!1,!1)},e={get(s){return get$1$1(this,s,!1,!0)},get size(){return size(this)},has:has$1$1,add:add$3,set:set$1$1,delete:deleteEntry,clear:clear$1,forEach:createForEach(!1,!0)},t={get(s){return get$1$1(this,s,!0)},get size(){return size(this,!0)},has(s){return has$1$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},i={get(s){return get$1$1(this,s,!0,!0)},get size(){return size(this,!0)},has(s){return has$1$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=createIterableMethod(s,!1,!1),t[s]=createIterableMethod(s,!0,!1),e[s]=createIterableMethod(s,!1,!0),i[s]=createIterableMethod(s,!0,!0)}),[n,t,e,i]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(n,e){const t=e?n?shallowReadonlyInstrumentations:shallowInstrumentations:n?readonlyInstrumentations:mutableInstrumentations;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(hasOwn$2(t,r)&&r in i?t:i,r,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(n){return n.__v_skip||!Object.isExtensible(n)?0:targetTypeMap(toRawType(n))}function reactive(n){return isReadonly(n)?n:createReactiveObject(n,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(n){return createReactiveObject(n,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(n){return createReactiveObject(n,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(n,e,t,i,r){if(!isObject$1(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const o=getTargetType(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return r.set(n,a),a}function isReactive(n){return isReadonly(n)?isReactive(n.__v_raw):!!(n&&n.__v_isReactive)}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isShallow(n){return!!(n&&n.__v_isShallow)}function isProxy(n){return isReactive(n)||isReadonly(n)}function toRaw(n){const e=n&&n.__v_raw;return e?toRaw(e):n}function markRaw(n){return def(n,"__v_skip",!0),n}const toReactive=n=>isObject$1(n)?reactive(n):n,toReadonly=n=>isObject$1(n)?readonly(n):n;function trackRefValue(n){isTracking()&&(n=toRaw(n),n.dep||(n.dep=createDep()),trackEffects(n.dep))}function triggerRefValue(n,e){n=toRaw(n),n.dep&&triggerEffects(n.dep)}function isRef(n){return Boolean(n&&n.__v_isRef===!0)}function ref(n){return createRef(n,!1)}function shallowRef(n){return createRef(n,!0)}function createRef(n,e){return isRef(n)?n:new RefImpl(n,e)}class RefImpl{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){e=this.__v_isShallow?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:toReactive(e),triggerRefValue(this))}}function unref(n){return isRef(n)?n.value:n}const shallowUnwrapHandlers={get:(n,e,t)=>unref(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return isRef(r)&&!isRef(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function proxyRefs(n){return isReactive(n)?n:new Proxy(n,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,t,i,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function computed$1(n,e,t=!1){let i,r;const s=isFunction$1(n);return s?(i=n,r=NOOP):(i=n.get,r=n.set),new ComputedRefImpl(i,r,s||!r,t)}Promise.resolve();function callWithErrorHandling(n,e,t,i){let r;try{r=i?n(...i):n()}catch(s){handleError(s,e,t)}return r}function callWithAsyncErrorHandling(n,e,t,i){if(isFunction$1(n)){const s=callWithErrorHandling(n,e,t,i);return s&&isPromise(s)&&s.catch(o=>{handleError(o,e,t)}),s}const r=[];for(let s=0;s<n.length;s++)r.push(callWithAsyncErrorHandling(n[s],e,t,i));return r}function handleError(n,e,t,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=t;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){callWithErrorHandling(l,null,10,[n,o,a]);return}}logError(n,t,r,i)}function logError(n,e,t,i=!0){console.error(n)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(n){const e=currentFlushPromise||resolvedPromise;return n?e.then(this?n.bind(this):n):e}function findInsertionIndex(n){let e=flushIndex+1,t=queue.length;for(;e<t;){const i=e+t>>>1;getId(queue[i])<n?e=i+1:t=i}return e}function queueJob(n){(!queue.length||!queue.includes(n,isFlushing&&n.allowRecurse?flushIndex+1:flushIndex))&&n!==currentPreFlushParentJob&&(n.id==null?queue.push(n):queue.splice(findInsertionIndex(n.id),0,n),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(n){const e=queue.indexOf(n);e>flushIndex&&queue.splice(e,1)}function queueCb(n,e,t,i){isArray$5(n)?t.push(...n):(!e||!e.includes(n,n.allowRecurse?i+1:i))&&t.push(n),queueFlush()}function queuePreFlushCb(n){queueCb(n,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(n){queueCb(n,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(n,e=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=e,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(n,e)}}function flushPostFlushCbs(n){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((t,i)=>getId(t)-getId(i)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=n=>n.id==null?1/0:n.id;function flushJobs(n){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(n),queue.sort((t,i)=>getId(t)-getId(i));const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&t.active!==!1&&callWithErrorHandling(t,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(n)}}function emit$1(n,e,...t){const i=n.vnode.props||EMPTY_OBJ;let r=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=i[u]||EMPTY_OBJ;d?r=t.map(f=>f.trim()):h&&(r=t.map(toNumber))}let a,l=i[a=toHandlerKey(e)]||i[a=toHandlerKey(camelize(e))];!l&&s&&(l=i[a=toHandlerKey(hyphenate(e))]),l&&callWithAsyncErrorHandling(l,n,6,r);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,callWithAsyncErrorHandling(c,n,6,r)}}function normalizeEmitsOptions(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let o={},a=!1;if(!isFunction$1(n)){const l=c=>{const u=normalizeEmitsOptions(c,e,!0);u&&(a=!0,extend$4(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(i.set(n,null),null):(isArray$5(s)?s.forEach(l=>o[l]=null):extend$4(o,s),i.set(n,o),o)}function isEmitListener(n,e){return!n||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn$2(n,e[0].toLowerCase()+e.slice(1))||hasOwn$2(n,hyphenate(e))||hasOwn$2(n,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(n){const e=currentRenderingInstance;return currentRenderingInstance=n,currentScopeId=n&&n.type.__scopeId||null,e}function pushScopeId(n){currentScopeId=n}function popScopeId(){currentScopeId=null}function withCtx(n,e=currentRenderingInstance,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(e),o=n(...r);return setCurrentRenderingInstance(s),i._d&&setBlockTracking(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function markAttrsAccessed(){}function renderComponentRoot(n){const{type:e,vnode:t,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:g,inheritAttrs:_}=n;let m,y;const E=setCurrentRenderingInstance(n);try{if(t.shapeFlag&4){const v=r||i;m=normalizeVNode(u.call(v,v,h,s,f,d,g)),y=l}else{const v=e;m=normalizeVNode(v.length>1?v(s,{attrs:l,slots:a,emit:c}):v(s,null)),y=e.props?l:getFunctionalFallthrough(l)}}catch(v){blockStack.length=0,handleError(v,n,1),m=createVNode(Comment)}let T=m;if(y&&_!==!1){const v=Object.keys(y),{shapeFlag:S}=T;v.length&&S&(1|6)&&(o&&v.some(isModelListener)&&(y=filterModelListeners(y,o)),T=cloneVNode(T,y))}return t.dirs&&(T.dirs=T.dirs?T.dirs.concat(t.dirs):t.dirs),t.transition&&(T.transition=t.transition),m=T,setCurrentRenderingInstance(E),m}const getFunctionalFallthrough=n=>{let e;for(const t in n)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=n[t]);return e},filterModelListeners=(n,e)=>{const t={};for(const i in n)(!isModelListener(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function shouldUpdateComponent(n,e,t){const{props:i,children:r,component:s}=n,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?hasPropsChanged(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!isEmitListener(c,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?hasPropsChanged(i,o,c):!0:!!o;return!1}function hasPropsChanged(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!isEmitListener(t,s))return!0}return!1}function updateHOCHostEl({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const isSuspense=n=>n.__isSuspense;function queueEffectWithSuspense(n,e){e&&e.pendingBranch?isArray$5(n)?e.effects.push(...n):e.effects.push(n):queuePostFlushCb(n)}function provide(n,e){if(currentInstance){let t=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===t&&(t=currentInstance.provides=Object.create(i)),t[n]=e}}function inject(n,e,t=!1){const i=currentInstance||currentRenderingInstance;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&isFunction$1(e)?e.call(i.proxy):e}}const INITIAL_WATCHER_VALUE={};function watch(n,e,t){return doWatch(n,e,t)}function doWatch(n,e,{immediate:t,deep:i,flush:r,onTrack:s,onTrigger:o}=EMPTY_OBJ){const a=currentInstance;let l,c=!1,u=!1;if(isRef(n)?(l=()=>n.value,c=isShallow(n)):isReactive(n)?(l=()=>n,i=!0):isArray$5(n)?(u=!0,c=n.some(isReactive),l=()=>n.map(y=>{if(isRef(y))return y.value;if(isReactive(y))return traverse(y);if(isFunction$1(y))return callWithErrorHandling(y,a,2)})):isFunction$1(n)?e?l=()=>callWithErrorHandling(n,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),callWithAsyncErrorHandling(n,a,3,[d])}:l=NOOP,e&&i){const y=l;l=()=>traverse(y())}let h,d=y=>{h=m.onStop=()=>{callWithErrorHandling(y,a,4)}};if(isInSSRComponentSetup)return d=NOOP,e?t&&callWithAsyncErrorHandling(e,a,3,[l(),u?[]:void 0,d]):l(),NOOP;let f=u?[]:INITIAL_WATCHER_VALUE;const g=()=>{if(!!m.active)if(e){const y=m.run();(i||c||(u?y.some((E,T)=>hasChanged(E,f[T])):hasChanged(y,f)))&&(h&&h(),callWithAsyncErrorHandling(e,a,3,[y,f===INITIAL_WATCHER_VALUE?void 0:f,d]),f=y)}else m.run()};g.allowRecurse=!!e;let _;r==="sync"?_=g:r==="post"?_=()=>queuePostRenderEffect(g,a&&a.suspense):_=()=>{!a||a.isMounted?queuePreFlushCb(g):g()};const m=new ReactiveEffect(l,_);return e?t?g():f=m.run():r==="post"?queuePostRenderEffect(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&remove(a.scope.effects,m)}}function instanceWatch(n,e,t){const i=this.proxy,r=isString$2(n)?n.includes(".")?createPathGetter(i,n):()=>i[n]:n.bind(i,i);let s;isFunction$1(e)?s=e:(s=e.handler,t=e);const o=currentInstance;setCurrentInstance(this);const a=doWatch(r,s.bind(i),t);return o?setCurrentInstance(o):unsetCurrentInstance(),a}function createPathGetter(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function traverse(n,e){if(!isObject$1(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),isRef(n))traverse(n.value,e);else if(isArray$5(n))for(let t=0;t<n.length;t++)traverse(n[t],e);else if(isSet$1(n)||isMap$1(n))n.forEach(t=>{traverse(t,e)});else if(isPlainObject$1(n))for(const t in n)traverse(n[t],e);return n}function useTransitionState(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{n.isMounted=!0}),onBeforeUnmount(()=>{n.isUnmounting=!0}),n}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(n,{slots:e}){const t=getCurrentInstance(),i=useTransitionState();let r;return()=>{const s=e.default&&getTransitionRawChildren(e.default(),!0);if(!s||!s.length)return;const o=toRaw(n),{mode:a}=o,l=s[0];if(i.isLeaving)return emptyPlaceholder(l);const c=getKeepAliveChild(l);if(!c)return emptyPlaceholder(l);const u=resolveTransitionHooks(c,o,i,t);setTransitionHooks(c,u);const h=t.subTree,d=h&&getKeepAliveChild(h);let f=!1;const{getTransitionKey:g}=c.type;if(g){const _=g();r===void 0?r=_:_!==r&&(r=_,f=!0)}if(d&&d.type!==Comment&&(!isSameVNodeType(c,d)||f)){const _=resolveTransitionHooks(d,o,i,t);if(setTransitionHooks(d,_),a==="out-in")return i.isLeaving=!0,_.afterLeave=()=>{i.isLeaving=!1,t.update()},emptyPlaceholder(l);a==="in-out"&&c.type!==Comment&&(_.delayLeave=(m,y,E)=>{const T=getLeavingNodesForType(i,d);T[String(d.key)]=d,m._leaveCb=()=>{y(),m._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=E})}return l}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function resolveTransitionHooks(n,e,t,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:g,onBeforeAppear:_,onAppear:m,onAfterAppear:y,onAppearCancelled:E}=e,T=String(n.key),v=getLeavingNodesForType(t,n),S=(b,A)=>{b&&callWithAsyncErrorHandling(b,i,9,A)},$={mode:s,persisted:o,beforeEnter(b){let A=a;if(!t.isMounted)if(r)A=_||a;else return;b._leaveCb&&b._leaveCb(!0);const O=v[T];O&&isSameVNodeType(n,O)&&O.el._leaveCb&&O.el._leaveCb(),S(A,[b])},enter(b){let A=l,O=c,M=u;if(!t.isMounted)if(r)A=m||l,O=y||c,M=E||u;else return;let j=!1;const z=b._enterCb=L=>{j||(j=!0,L?S(M,[b]):S(O,[b]),$.delayedLeave&&$.delayedLeave(),b._enterCb=void 0)};A?(A(b,z),A.length<=1&&z()):z()},leave(b,A){const O=String(n.key);if(b._enterCb&&b._enterCb(!0),t.isUnmounting)return A();S(h,[b]);let M=!1;const j=b._leaveCb=z=>{M||(M=!0,A(),z?S(g,[b]):S(f,[b]),b._leaveCb=void 0,v[O]===n&&delete v[O])};v[O]=n,d?(d(b,j),d.length<=1&&j()):j()},clone(b){return resolveTransitionHooks(b,e,t,i)}};return $}function emptyPlaceholder(n){if(isKeepAlive(n))return n=cloneVNode(n),n.children=null,n}function getKeepAliveChild(n){return isKeepAlive(n)?n.children?n.children[0]:void 0:n}function setTransitionHooks(n,e){n.shapeFlag&6&&n.component?setTransitionHooks(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function getTransitionRawChildren(n,e=!1){let t=[],i=0;for(let r=0;r<n.length;r++){const s=n[r];s.type===Fragment?(s.patchFlag&128&&i++,t=t.concat(getTransitionRawChildren(s.children,e))):(e||s.type!==Comment)&&t.push(s)}if(i>1)for(let r=0;r<t.length;r++)t[r].patchFlag=-2;return t}function defineComponent(n){return isFunction$1(n)?{setup:n,name:n.name}:n}const isAsyncWrapper=n=>!!n.type.__asyncLoader,isKeepAlive=n=>n.type.__isKeepAlive;function onActivated(n,e){registerKeepAliveHook(n,"a",e)}function onDeactivated(n,e){registerKeepAliveHook(n,"da",e)}function registerKeepAliveHook(n,e,t=currentInstance){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(injectHook(e,i,t),t){let r=t.parent;for(;r&&r.parent;)isKeepAlive(r.parent.vnode)&&injectToKeepAliveRoot(i,e,t,r),r=r.parent}}function injectToKeepAliveRoot(n,e,t,i){const r=injectHook(e,n,i,!0);onUnmounted(()=>{remove(i[e],r)},t)}function injectHook(n,e,t=currentInstance,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;pauseTracking(),setCurrentInstance(t);const a=callWithAsyncErrorHandling(e,t,n,o);return unsetCurrentInstance(),resetTracking(),a});return i?r.unshift(s):r.push(s),s}}const createHook=n=>(e,t=currentInstance)=>(!isInSSRComponentSetup||n==="sp")&&injectHook(n,e,t),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(n,e=currentInstance){injectHook("ec",n,e)}let shouldCacheAccess=!0;function applyOptions(n){const e=resolveMergedOptions(n),t=n.proxy,i=n.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:_,deactivated:m,beforeDestroy:y,beforeUnmount:E,destroyed:T,unmounted:v,render:S,renderTracked:$,renderTriggered:b,errorCaptured:A,serverPrefetch:O,expose:M,inheritAttrs:j,components:z,directives:L,filters:N}=e;if(c&&resolveInjections(c,i,null,n.appContext.config.unwrapInjectedRef),o)for(const R in o){const D=o[R];isFunction$1(D)&&(i[R]=D.bind(t))}if(r){const R=r.call(t,t);isObject$1(R)&&(n.data=reactive(R))}if(shouldCacheAccess=!0,s)for(const R in s){const D=s[R],V=isFunction$1(D)?D.bind(t,t):isFunction$1(D.get)?D.get.bind(t,t):NOOP,K=!isFunction$1(D)&&isFunction$1(D.set)?D.set.bind(t):NOOP,J=computed({get:V,set:K});Object.defineProperty(i,R,{enumerable:!0,configurable:!0,get:()=>J.value,set:F=>J.value=F})}if(a)for(const R in a)createWatcher(a[R],i,t,R);if(l){const R=isFunction$1(l)?l.call(t):l;Reflect.ownKeys(R).forEach(D=>{provide(D,R[D])})}u&&callHook(u,n,"c");function P(R,D){isArray$5(D)?D.forEach(V=>R(V.bind(t))):D&&R(D.bind(t))}if(P(onBeforeMount,h),P(onMounted,d),P(onBeforeUpdate,f),P(onUpdated,g),P(onActivated,_),P(onDeactivated,m),P(onErrorCaptured,A),P(onRenderTracked,$),P(onRenderTriggered,b),P(onBeforeUnmount,E),P(onUnmounted,v),P(onServerPrefetch,O),isArray$5(M))if(M.length){const R=n.exposed||(n.exposed={});M.forEach(D=>{Object.defineProperty(R,D,{get:()=>t[D],set:V=>t[D]=V})})}else n.exposed||(n.exposed={});S&&n.render===NOOP&&(n.render=S),j!=null&&(n.inheritAttrs=j),z&&(n.components=z),L&&(n.directives=L)}function resolveInjections(n,e,t=NOOP,i=!1){isArray$5(n)&&(n=normalizeInject(n));for(const r in n){const s=n[r];let o;isObject$1(s)?"default"in s?o=inject(s.from||r,s.default,!0):o=inject(s.from||r):o=inject(s),isRef(o)&&i?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function callHook(n,e,t){callWithAsyncErrorHandling(isArray$5(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function createWatcher(n,e,t,i){const r=i.includes(".")?createPathGetter(t,i):()=>t[i];if(isString$2(n)){const s=e[n];isFunction$1(s)&&watch(r,s)}else if(isFunction$1(n))watch(r,n.bind(t));else if(isObject$1(n))if(isArray$5(n))n.forEach(s=>createWatcher(s,e,t,i));else{const s=isFunction$1(n.handler)?n.handler.bind(t):e[n.handler];isFunction$1(s)&&watch(r,s,n)}}function resolveMergedOptions(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!t&&!i?l=e:(l={},r.length&&r.forEach(c=>mergeOptions(l,c,o,!0)),mergeOptions(l,e,o)),s.set(e,l),l}function mergeOptions(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&mergeOptions(n,s,t,!0),r&&r.forEach(o=>mergeOptions(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=internalOptionMergeStrats[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(n,e){return e?n?function(){return extend$4(isFunction$1(n)?n.call(this,this):n,isFunction$1(e)?e.call(this,this):e)}:e:n}function mergeInject(n,e){return mergeObjectOptions(normalizeInject(n),normalizeInject(e))}function normalizeInject(n){if(isArray$5(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function mergeAsArray(n,e){return n?[...new Set([].concat(n,e))]:e}function mergeObjectOptions(n,e){return n?extend$4(extend$4(Object.create(null),n),e):e}function mergeWatchOptions(n,e){if(!n)return e;if(!e)return n;const t=extend$4(Object.create(null),n);for(const i in e)t[i]=mergeAsArray(n[i],e[i]);return t}function initProps(n,e,t,i=!1){const r={},s={};def(s,InternalObjectKey,1),n.propsDefaults=Object.create(null),setFullProps(n,e,r,s);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=i?r:shallowReactive(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function updateProps(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=n,a=toRaw(r),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];const f=e[d];if(l)if(hasOwn$2(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const g=camelize(d);r[g]=resolvePropValue(l,a,g,f,n,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{setFullProps(n,e,r,s)&&(c=!0);let u;for(const h in a)(!e||!hasOwn$2(e,h)&&((u=hyphenate(h))===h||!hasOwn$2(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=resolvePropValue(l,a,h,void 0,n,!0)):delete r[h]);if(s!==a)for(const h in s)(!e||!hasOwn$2(e,h)&&!0)&&(delete s[h],c=!0)}c&&trigger(n,"set","$attrs")}function setFullProps(n,e,t,i){const[r,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(isReservedProp(l))continue;const c=e[l];let u;r&&hasOwn$2(r,u=camelize(l))?!s||!s.includes(u)?t[u]=c:(a||(a={}))[u]=c:isEmitListener(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=toRaw(t),c=a||EMPTY_OBJ;for(let u=0;u<s.length;u++){const h=s[u];t[h]=resolvePropValue(r,l,h,c[h],n,!hasOwn$2(c,h))}}return o}function resolvePropValue(n,e,t,i,r,s){const o=n[t];if(o!=null){const a=hasOwn$2(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&isFunction$1(l)){const{propsDefaults:c}=r;t in c?i=c[t]:(setCurrentInstance(r),i=c[t]=l.call(null,e),unsetCurrentInstance())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===hyphenate(t))&&(i=!0))}return i}function normalizePropsOptions(n,e,t=!1){const i=e.propsCache,r=i.get(n);if(r)return r;const s=n.props,o={},a=[];let l=!1;if(!isFunction$1(n)){const u=h=>{l=!0;const[d,f]=normalizePropsOptions(h,e,!0);extend$4(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return i.set(n,EMPTY_ARR),EMPTY_ARR;if(isArray$5(s))for(let u=0;u<s.length;u++){const h=camelize(s[u]);validatePropName(h)&&(o[h]=EMPTY_OBJ)}else if(s)for(const u in s){const h=camelize(u);if(validatePropName(h)){const d=s[u],f=o[h]=isArray$5(d)||isFunction$1(d)?{type:d}:d;if(f){const g=getTypeIndex(Boolean,f.type),_=getTypeIndex(String,f.type);f[0]=g>-1,f[1]=_<0||g<_,(g>-1||hasOwn$2(f,"default"))&&a.push(h)}}}const c=[o,a];return i.set(n,c),c}function validatePropName(n){return n[0]!=="$"}function getType(n){const e=n&&n.toString().match(/^\s*function (\w+)/);return e?e[1]:n===null?"null":""}function isSameType(n,e){return getType(n)===getType(e)}function getTypeIndex(n,e){return isArray$5(e)?e.findIndex(t=>isSameType(t,n)):isFunction$1(e)&&isSameType(e,n)?0:-1}const isInternalKey=n=>n[0]==="_"||n==="$stable",normalizeSlotValue=n=>isArray$5(n)?n.map(normalizeVNode):[normalizeVNode(n)],normalizeSlot=(n,e,t)=>{const i=withCtx((...r)=>normalizeSlotValue(e(...r)),t);return i._c=!1,i},normalizeObjectSlots=(n,e,t)=>{const i=n._ctx;for(const r in n){if(isInternalKey(r))continue;const s=n[r];if(isFunction$1(s))e[r]=normalizeSlot(r,s,i);else if(s!=null){const o=normalizeSlotValue(s);e[r]=()=>o}}},normalizeVNodeSlots=(n,e)=>{const t=normalizeSlotValue(e);n.slots.default=()=>t},initSlots=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=toRaw(e),def(e,"_",t)):normalizeObjectSlots(e,n.slots={})}else n.slots={},e&&normalizeVNodeSlots(n,e);def(n.slots,InternalObjectKey,1)},updateSlots=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,o=EMPTY_OBJ;if(i.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(extend$4(r,e),!t&&a===1&&delete r._):(s=!e.$stable,normalizeObjectSlots(e,r)),o=e}else e&&(normalizeVNodeSlots(n,e),o={default:1});if(s)for(const a in r)!isInternalKey(a)&&!(a in o)&&delete r[a]};function withDirectives(n,e){const t=currentRenderingInstance;if(t===null)return n;const i=t.proxy,r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,c=EMPTY_OBJ]=e[s];isFunction$1(o)&&(o={mounted:o,updated:o}),o.deep&&traverse(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c})}return n}function invokeDirectiveHook(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(pauseTracking(),callWithAsyncErrorHandling(l,t,8,[n.el,a,n,e]),resetTracking())}}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(n,e){return function(i,r=null){r!=null&&!isObject$1(r)&&(r=null);const s=createAppContext(),o=new Set;let a=!1;const l=s.app={_uid:uid++,_component:i,_props:r,_container:null,_context:s,_instance:null,version,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&isFunction$1(c.install)?(o.add(c),c.install(l,...u)):isFunction$1(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=createVNode(i,r);return d.appContext=s,u&&e?e(d,c):n(d,c,h),a=!0,l._container=c,c.__vue_app__=l,getExposeProxy(d.component)||d.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l}};return l}}function setRef(n,e,t,i,r=!1){if(isArray$5(n)){n.forEach((d,f)=>setRef(d,e&&(isArray$5(e)?e[f]:e),t,i,r));return}if(isAsyncWrapper(i)&&!r)return;const s=i.shapeFlag&4?getExposeProxy(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=n,c=e&&e.r,u=a.refs===EMPTY_OBJ?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(isString$2(c)?(u[c]=null,hasOwn$2(h,c)&&(h[c]=null)):isRef(c)&&(c.value=null)),isFunction$1(l))callWithErrorHandling(l,a,12,[o,u]);else{const d=isString$2(l),f=isRef(l);if(d||f){const g=()=>{if(n.f){const _=d?u[l]:l.value;r?isArray$5(_)&&remove(_,s):isArray$5(_)?_.includes(s)||_.push(s):d?u[l]=[s]:(l.value=[s],n.k&&(u[n.k]=l.value))}else d?(u[l]=o,hasOwn$2(h,l)&&(h[l]=o)):isRef(l)&&(l.value=o,n.k&&(u[n.k]=o))};o?(g.id=-1,queuePostRenderEffect(g,t)):g()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(n){return baseCreateRenderer(n)}function baseCreateRenderer(n,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=NOOP,cloneNode:g,insertStaticContent:_}=n,m=(x,C,w,k=null,G=null,W=null,Y=!1,U=null,X=!!C.dynamicChildren)=>{if(x===C)return;x&&!isSameVNodeType(x,C)&&(k=se(x),ee(x,G,W,!0),x=null),C.patchFlag===-2&&(X=!1,C.dynamicChildren=null);const{type:B,ref:q,shapeFlag:H}=C;switch(B){case Text$2:y(x,C,w,k);break;case Comment:E(x,C,w,k);break;case Static$2:x==null&&T(C,w,k,Y);break;case Fragment:L(x,C,w,k,G,W,Y,U,X);break;default:H&1?$(x,C,w,k,G,W,Y,U,X):H&6?N(x,C,w,k,G,W,Y,U,X):(H&64||H&128)&&B.process(x,C,w,k,G,W,Y,U,X,ue)}q!=null&&G&&setRef(q,x&&x.ref,W,C||x,!C)},y=(x,C,w,k)=>{if(x==null)i(C.el=a(C.children),w,k);else{const G=C.el=x.el;C.children!==x.children&&c(G,C.children)}},E=(x,C,w,k)=>{x==null?i(C.el=l(C.children||""),w,k):C.el=x.el},T=(x,C,w,k)=>{[x.el,x.anchor]=_(x.children,C,w,k,x.el,x.anchor)},v=({el:x,anchor:C},w,k)=>{let G;for(;x&&x!==C;)G=d(x),i(x,w,k),x=G;i(C,w,k)},S=({el:x,anchor:C})=>{let w;for(;x&&x!==C;)w=d(x),r(x),x=w;r(C)},$=(x,C,w,k,G,W,Y,U,X)=>{Y=Y||C.type==="svg",x==null?b(C,w,k,G,W,Y,U,X):M(x,C,G,W,Y,U,X)},b=(x,C,w,k,G,W,Y,U)=>{let X,B;const{type:q,props:H,shapeFlag:Z,transition:Q,patchFlag:re,dirs:ae}=x;if(x.el&&g!==void 0&&re===-1)X=x.el=g(x.el);else{if(X=x.el=o(x.type,W,H&&H.is,H),Z&8?u(X,x.children):Z&16&&O(x.children,X,null,k,G,W&&q!=="foreignObject",Y,U),ae&&invokeDirectiveHook(x,null,k,"created"),H){for(const ce in H)ce!=="value"&&!isReservedProp(ce)&&s(X,ce,null,H[ce],W,x.children,k,G,le);"value"in H&&s(X,"value",null,H.value),(B=H.onVnodeBeforeMount)&&invokeVNodeHook(B,k,x)}A(X,x,x.scopeId,Y,k)}ae&&invokeDirectiveHook(x,null,k,"beforeMount");const oe=(!G||G&&!G.pendingBranch)&&Q&&!Q.persisted;oe&&Q.beforeEnter(X),i(X,C,w),((B=H&&H.onVnodeMounted)||oe||ae)&&queuePostRenderEffect(()=>{B&&invokeVNodeHook(B,k,x),oe&&Q.enter(X),ae&&invokeDirectiveHook(x,null,k,"mounted")},G)},A=(x,C,w,k,G)=>{if(w&&f(x,w),k)for(let W=0;W<k.length;W++)f(x,k[W]);if(G){let W=G.subTree;if(C===W){const Y=G.vnode;A(x,Y,Y.scopeId,Y.slotScopeIds,G.parent)}}},O=(x,C,w,k,G,W,Y,U,X=0)=>{for(let B=X;B<x.length;B++){const q=x[B]=U?cloneIfMounted(x[B]):normalizeVNode(x[B]);m(null,q,C,w,k,G,W,Y,U)}},M=(x,C,w,k,G,W,Y)=>{const U=C.el=x.el;let{patchFlag:X,dynamicChildren:B,dirs:q}=C;X|=x.patchFlag&16;const H=x.props||EMPTY_OBJ,Z=C.props||EMPTY_OBJ;let Q;w&&toggleRecurse(w,!1),(Q=Z.onVnodeBeforeUpdate)&&invokeVNodeHook(Q,w,C,x),q&&invokeDirectiveHook(C,x,w,"beforeUpdate"),w&&toggleRecurse(w,!0);const re=G&&C.type!=="foreignObject";if(B?j(x.dynamicChildren,B,U,w,k,re,W):Y||V(x,C,U,null,w,k,re,W,!1),X>0){if(X&16)z(U,C,H,Z,w,k,G);else if(X&2&&H.class!==Z.class&&s(U,"class",null,Z.class,G),X&4&&s(U,"style",H.style,Z.style,G),X&8){const ae=C.dynamicProps;for(let oe=0;oe<ae.length;oe++){const ce=ae[oe],he=H[ce],ve=Z[ce];(ve!==he||ce==="value")&&s(U,ce,he,ve,G,x.children,w,k,le)}}X&1&&x.children!==C.children&&u(U,C.children)}else!Y&&B==null&&z(U,C,H,Z,w,k,G);((Q=Z.onVnodeUpdated)||q)&&queuePostRenderEffect(()=>{Q&&invokeVNodeHook(Q,w,C,x),q&&invokeDirectiveHook(C,x,w,"updated")},k)},j=(x,C,w,k,G,W,Y)=>{for(let U=0;U<C.length;U++){const X=x[U],B=C[U],q=X.el&&(X.type===Fragment||!isSameVNodeType(X,B)||X.shapeFlag&(6|64))?h(X.el):w;m(X,B,q,null,k,G,W,Y,!0)}},z=(x,C,w,k,G,W,Y)=>{if(w!==k){for(const U in k){if(isReservedProp(U))continue;const X=k[U],B=w[U];X!==B&&U!=="value"&&s(x,U,B,X,Y,C.children,G,W,le)}if(w!==EMPTY_OBJ)for(const U in w)!isReservedProp(U)&&!(U in k)&&s(x,U,w[U],null,Y,C.children,G,W,le);"value"in k&&s(x,"value",w.value,k.value)}},L=(x,C,w,k,G,W,Y,U,X)=>{const B=C.el=x?x.el:a(""),q=C.anchor=x?x.anchor:a("");let{patchFlag:H,dynamicChildren:Z,slotScopeIds:Q}=C;Q&&(U=U?U.concat(Q):Q),x==null?(i(B,w,k),i(q,w,k),O(C.children,w,q,G,W,Y,U,X)):H>0&&H&64&&Z&&x.dynamicChildren?(j(x.dynamicChildren,Z,w,G,W,Y,U),(C.key!=null||G&&C===G.subTree)&&traverseStaticChildren(x,C,!0)):V(x,C,w,q,G,W,Y,U,X)},N=(x,C,w,k,G,W,Y,U,X)=>{C.slotScopeIds=U,x==null?C.shapeFlag&512?G.ctx.activate(C,w,k,Y,X):I(C,w,k,G,W,Y,X):P(x,C,X)},I=(x,C,w,k,G,W,Y)=>{const U=x.component=createComponentInstance(x,k,G);if(isKeepAlive(x)&&(U.ctx.renderer=ue),setupComponent(U),U.asyncDep){if(G&&G.registerDep(U,R),!x.el){const X=U.subTree=createVNode(Comment);E(null,X,C,w)}return}R(U,x,C,w,G,W,Y)},P=(x,C,w)=>{const k=C.component=x.component;if(shouldUpdateComponent(x,C,w))if(k.asyncDep&&!k.asyncResolved){D(k,C,w);return}else k.next=C,invalidateJob(k.update),k.update();else C.component=x.component,C.el=x.el,k.vnode=C},R=(x,C,w,k,G,W,Y)=>{const U=()=>{if(x.isMounted){let{next:q,bu:H,u:Z,parent:Q,vnode:re}=x,ae=q,oe;toggleRecurse(x,!1),q?(q.el=re.el,D(x,q,Y)):q=re,H&&invokeArrayFns(H),(oe=q.props&&q.props.onVnodeBeforeUpdate)&&invokeVNodeHook(oe,Q,q,re),toggleRecurse(x,!0);const ce=renderComponentRoot(x),he=x.subTree;x.subTree=ce,m(he,ce,h(he.el),se(he),x,G,W),q.el=ce.el,ae===null&&updateHOCHostEl(x,ce.el),Z&&queuePostRenderEffect(Z,G),(oe=q.props&&q.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(oe,Q,q,re),G)}else{let q;const{el:H,props:Z}=C,{bm:Q,m:re,parent:ae}=x,oe=isAsyncWrapper(C);if(toggleRecurse(x,!1),Q&&invokeArrayFns(Q),!oe&&(q=Z&&Z.onVnodeBeforeMount)&&invokeVNodeHook(q,ae,C),toggleRecurse(x,!0),H&&de){const ce=()=>{x.subTree=renderComponentRoot(x),de(H,x.subTree,x,G,null)};oe?C.type.__asyncLoader().then(()=>!x.isUnmounted&&ce()):ce()}else{const ce=x.subTree=renderComponentRoot(x);m(null,ce,w,k,x,G,W),C.el=ce.el}if(re&&queuePostRenderEffect(re,G),!oe&&(q=Z&&Z.onVnodeMounted)){const ce=C;queuePostRenderEffect(()=>invokeVNodeHook(q,ae,ce),G)}C.shapeFlag&256&&x.a&&queuePostRenderEffect(x.a,G),x.isMounted=!0,C=w=k=null}},X=x.effect=new ReactiveEffect(U,()=>queueJob(x.update),x.scope),B=x.update=X.run.bind(X);B.id=x.uid,toggleRecurse(x,!0),B()},D=(x,C,w)=>{C.component=x;const k=x.vnode.props;x.vnode=C,x.next=null,updateProps(x,C.props,k,w),updateSlots(x,C.children,w),pauseTracking(),flushPreFlushCbs(void 0,x.update),resetTracking()},V=(x,C,w,k,G,W,Y,U,X=!1)=>{const B=x&&x.children,q=x?x.shapeFlag:0,H=C.children,{patchFlag:Z,shapeFlag:Q}=C;if(Z>0){if(Z&128){J(B,H,w,k,G,W,Y,U,X);return}else if(Z&256){K(B,H,w,k,G,W,Y,U,X);return}}Q&8?(q&16&&le(B,G,W),H!==B&&u(w,H)):q&16?Q&16?J(B,H,w,k,G,W,Y,U,X):le(B,G,W,!0):(q&8&&u(w,""),Q&16&&O(H,w,k,G,W,Y,U,X))},K=(x,C,w,k,G,W,Y,U,X)=>{x=x||EMPTY_ARR,C=C||EMPTY_ARR;const B=x.length,q=C.length,H=Math.min(B,q);let Z;for(Z=0;Z<H;Z++){const Q=C[Z]=X?cloneIfMounted(C[Z]):normalizeVNode(C[Z]);m(x[Z],Q,w,null,G,W,Y,U,X)}B>q?le(x,G,W,!0,!1,H):O(C,w,k,G,W,Y,U,X,H)},J=(x,C,w,k,G,W,Y,U,X)=>{let B=0;const q=C.length;let H=x.length-1,Z=q-1;for(;B<=H&&B<=Z;){const Q=x[B],re=C[B]=X?cloneIfMounted(C[B]):normalizeVNode(C[B]);if(isSameVNodeType(Q,re))m(Q,re,w,null,G,W,Y,U,X);else break;B++}for(;B<=H&&B<=Z;){const Q=x[H],re=C[Z]=X?cloneIfMounted(C[Z]):normalizeVNode(C[Z]);if(isSameVNodeType(Q,re))m(Q,re,w,null,G,W,Y,U,X);else break;H--,Z--}if(B>H){if(B<=Z){const Q=Z+1,re=Q<q?C[Q].el:k;for(;B<=Z;)m(null,C[B]=X?cloneIfMounted(C[B]):normalizeVNode(C[B]),w,re,G,W,Y,U,X),B++}}else if(B>Z)for(;B<=H;)ee(x[B],G,W,!0),B++;else{const Q=B,re=B,ae=new Map;for(B=re;B<=Z;B++){const pe=C[B]=X?cloneIfMounted(C[B]):normalizeVNode(C[B]);pe.key!=null&&ae.set(pe.key,B)}let oe,ce=0;const he=Z-re+1;let ve=!1,Pe=0;const Re=new Array(he);for(B=0;B<he;B++)Re[B]=0;for(B=Q;B<=H;B++){const pe=x[B];if(ce>=he){ee(pe,G,W,!0);continue}let me;if(pe.key!=null)me=ae.get(pe.key);else for(oe=re;oe<=Z;oe++)if(Re[oe-re]===0&&isSameVNodeType(pe,C[oe])){me=oe;break}me===void 0?ee(pe,G,W,!0):(Re[me-re]=B+1,me>=Pe?Pe=me:ve=!0,m(pe,C[me],w,null,G,W,Y,U,X),ce++)}const Ie=ve?getSequence(Re):EMPTY_ARR;for(oe=Ie.length-1,B=he-1;B>=0;B--){const pe=re+B,me=C[pe],we=pe+1<q?C[pe+1].el:k;Re[B]===0?m(null,me,w,we,G,W,Y,U,X):ve&&(oe<0||B!==Ie[oe]?F(me,w,we,2):oe--)}}},F=(x,C,w,k,G=null)=>{const{el:W,type:Y,transition:U,children:X,shapeFlag:B}=x;if(B&6){F(x.component.subTree,C,w,k);return}if(B&128){x.suspense.move(C,w,k);return}if(B&64){Y.move(x,C,w,ue);return}if(Y===Fragment){i(W,C,w);for(let H=0;H<X.length;H++)F(X[H],C,w,k);i(x.anchor,C,w);return}if(Y===Static$2){v(x,C,w);return}if(k!==2&&B&1&&U)if(k===0)U.beforeEnter(W),i(W,C,w),queuePostRenderEffect(()=>U.enter(W),G);else{const{leave:H,delayLeave:Z,afterLeave:Q}=U,re=()=>i(W,C,w),ae=()=>{H(W,()=>{re(),Q&&Q()})};Z?Z(W,re,ae):ae()}else i(W,C,w)},ee=(x,C,w,k=!1,G=!1)=>{const{type:W,props:Y,ref:U,children:X,dynamicChildren:B,shapeFlag:q,patchFlag:H,dirs:Z}=x;if(U!=null&&setRef(U,null,w,x,!0),q&256){C.ctx.deactivate(x);return}const Q=q&1&&Z,re=!isAsyncWrapper(x);let ae;if(re&&(ae=Y&&Y.onVnodeBeforeUnmount)&&invokeVNodeHook(ae,C,x),q&6)ge(x.component,w,k);else{if(q&128){x.suspense.unmount(w,k);return}Q&&invokeDirectiveHook(x,null,C,"beforeUnmount"),q&64?x.type.remove(x,C,w,G,ue,k):B&&(W!==Fragment||H>0&&H&64)?le(B,C,w,!1,!0):(W===Fragment&&H&(128|256)||!G&&q&16)&&le(X,C,w),k&&ne(x)}(re&&(ae=Y&&Y.onVnodeUnmounted)||Q)&&queuePostRenderEffect(()=>{ae&&invokeVNodeHook(ae,C,x),Q&&invokeDirectiveHook(x,null,C,"unmounted")},w)},ne=x=>{const{type:C,el:w,anchor:k,transition:G}=x;if(C===Fragment){te(w,k);return}if(C===Static$2){S(x);return}const W=()=>{r(w),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(x.shapeFlag&1&&G&&!G.persisted){const{leave:Y,delayLeave:U}=G,X=()=>Y(w,W);U?U(x.el,W,X):X()}else W()},te=(x,C)=>{let w;for(;x!==C;)w=d(x),r(x),x=w;r(C)},ge=(x,C,w)=>{const{bum:k,scope:G,update:W,subTree:Y,um:U}=x;k&&invokeArrayFns(k),G.stop(),W&&(W.active=!1,ee(Y,x,C,w)),U&&queuePostRenderEffect(U,C),queuePostRenderEffect(()=>{x.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},le=(x,C,w,k=!1,G=!1,W=0)=>{for(let Y=W;Y<x.length;Y++)ee(x[Y],C,w,k,G)},se=x=>x.shapeFlag&6?se(x.component.subTree):x.shapeFlag&128?x.suspense.next():d(x.anchor||x.el),ie=(x,C,w)=>{x==null?C._vnode&&ee(C._vnode,null,null,!0):m(C._vnode||null,x,C,null,null,null,w),flushPostFlushCbs(),C._vnode=x},ue={p:m,um:ee,m:F,r:ne,mt:I,mc:O,pc:V,pbc:j,n:se,o:n};let fe,de;return e&&([fe,de]=e(ue)),{render:ie,hydrate:fe,createApp:createAppAPI(ie,fe)}}function toggleRecurse({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function traverseStaticChildren(n,e,t=!1){const i=n.children,r=e.children;if(isArray$5(i)&&isArray$5(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=cloneIfMounted(r[s]),a.el=o.el),t||traverseStaticChildren(o,a))}}function getSequence(n){const e=n.slice(),t=[0];let i,r,s,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(r=t[t.length-1],n[r]<c){e[i]=r,t.push(i);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<c?s=a+1:o=a;c<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}const isTeleport=n=>n.__isTeleport,COMPONENTS="components",DIRECTIVES="directives",NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(n){return isString$2(n)?resolveAsset(COMPONENTS,n,!1)||n:n||NULL_DYNAMIC_COMPONENT}function resolveDirective(n){return resolveAsset(DIRECTIVES,n)}function resolveAsset(n,e,t=!0,i=!1){const r=currentRenderingInstance||currentInstance;if(r){const s=r.type;if(n===COMPONENTS){const a=getComponentName(s);if(a&&(a===e||a===camelize(e)||a===capitalize(camelize(e))))return s}const o=resolve(r[n]||s[n],e)||resolve(r.appContext[n],e);return!o&&i?s:o}}function resolve(n,e){return n&&(n[e]||n[camelize(e)]||n[capitalize(camelize(e))])}const Fragment=Symbol(void 0),Text$2=Symbol(void 0),Comment=Symbol(void 0),Static$2=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(n=!1){blockStack.push(currentBlock=n?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(n){isBlockTreeEnabled+=n}function setupBlock(n){return n.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),n}function createElementBlock(n,e,t,i,r,s){return setupBlock(createBaseVNode(n,e,t,i,r,s,!0))}function createBlock(n,e,t,i,r){return setupBlock(createVNode(n,e,t,i,r,!0))}function isVNode(n){return n?n.__v_isVNode===!0:!1}function isSameVNodeType(n,e){return n.type===e.type&&n.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:n})=>n!=null?n:null,normalizeRef=({ref:n,ref_key:e,ref_for:t})=>n!=null?isString$2(n)||isRef(n)||isFunction$1(n)?{i:currentRenderingInstance,r:n,k:e,f:!!t}:n:null;function createBaseVNode(n,e=null,t=null,i=0,r=null,s=n===Fragment?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(normalizeChildren(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=isString$2(t)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===NULL_DYNAMIC_COMPONENT)&&(n=Comment),isVNode(n)){const a=cloneVNode(n,e,!0);return t&&normalizeChildren(a,t),a}if(isClassComponent(n)&&(n=n.__vccOpts),e){e=guardReactiveProps(e);let{class:a,style:l}=e;a&&!isString$2(a)&&(e.class=normalizeClass(a)),isObject$1(l)&&(isProxy(l)&&!isArray$5(l)&&(l=extend$4({},l)),e.style=normalizeStyle(l))}const o=isString$2(n)?1:isSuspense(n)?128:isTeleport(n)?64:isObject$1(n)?4:isFunction$1(n)?2:0;return createBaseVNode(n,e,t,i,r,o,s,!0)}function guardReactiveProps(n){return n?isProxy(n)||InternalObjectKey in n?extend$4({},n):n:null}function cloneVNode(n,e,t=!1){const{props:i,ref:r,patchFlag:s,children:o}=n,a=e?mergeProps(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&normalizeKey(a),ref:e&&e.ref?t&&r?isArray$5(r)?r.concat(normalizeRef(e)):[r,normalizeRef(e)]:normalizeRef(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Fragment?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&cloneVNode(n.ssContent),ssFallback:n.ssFallback&&cloneVNode(n.ssFallback),el:n.el,anchor:n.anchor}}function createTextVNode(n=" ",e=0){return createVNode(Text$2,null,n,e)}function createCommentVNode(n="",e=!1){return e?(openBlock(),createBlock(Comment,null,n)):createVNode(Comment,null,n)}function normalizeVNode(n){return n==null||typeof n=="boolean"?createVNode(Comment):isArray$5(n)?createVNode(Fragment,null,n.slice()):typeof n=="object"?cloneIfMounted(n):createVNode(Text$2,null,String(n))}function cloneIfMounted(n){return n.el===null||n.memo?n:cloneVNode(n)}function normalizeChildren(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(isArray$5(e))t=16;else if(typeof e=="object")if(i&(1|64)){const r=e.default;r&&(r._c&&(r._d=!1),normalizeChildren(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:r===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),i&64?(t=16,e=[createTextVNode(e)]):t=8);n.children=e,n.shapeFlag|=t}function mergeProps(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=normalizeClass([e.class,i.class]));else if(r==="style")e.style=normalizeStyle([e.style,i.style]);else if(isOn(r)){const s=e[r],o=i[r];o&&s!==o&&!(isArray$5(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}function invokeVNodeHook(n,e,t,i=null){callWithAsyncErrorHandling(n,e,7,[t,i])}function renderList(n,e,t,i){let r;const s=t&&t[i];if(isArray$5(n)||isString$2(n)){r=new Array(n.length);for(let o=0,a=n.length;o<a;o++)r[o]=e(n[o],o,void 0,s&&s[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(isObject$1(n))if(n[Symbol.iterator])r=Array.from(n,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(n);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(n[c],c,a,s&&s[a])}}else r=[];return t&&(t[i]=r),r}const getPublicInstance=n=>n?isStatefulComponent(n)?getExposeProxy(n)||n.proxy:getPublicInstance(n.parent):null,publicPropertiesMap=extend$4(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>getPublicInstance(n.parent),$root:n=>getPublicInstance(n.root),$emit:n=>n.emit,$options:n=>resolveMergedOptions(n),$forceUpdate:n=>()=>queueJob(n.update),$nextTick:n=>nextTick.bind(n.proxy),$watch:n=>instanceWatch.bind(n)}),PublicInstanceProxyHandlers={get({_:n},e){const{ctx:t,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(i!==EMPTY_OBJ&&hasOwn$2(i,e))return o[e]=1,i[e];if(r!==EMPTY_OBJ&&hasOwn$2(r,e))return o[e]=2,r[e];if((c=n.propsOptions[0])&&hasOwn$2(c,e))return o[e]=3,s[e];if(t!==EMPTY_OBJ&&hasOwn$2(t,e))return o[e]=4,t[e];shouldCacheAccess&&(o[e]=0)}}const u=publicPropertiesMap[e];let h,d;if(u)return e==="$attrs"&&track(n,"get",e),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==EMPTY_OBJ&&hasOwn$2(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,hasOwn$2(d,e))return d[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;if(r!==EMPTY_OBJ&&hasOwn$2(r,e))r[e]=t;else if(i!==EMPTY_OBJ&&hasOwn$2(i,e))i[e]=t;else if(hasOwn$2(n.props,e))return!1;return e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!t[o]||n!==EMPTY_OBJ&&hasOwn$2(n,o)||e!==EMPTY_OBJ&&hasOwn$2(e,o)||(a=s[0])&&hasOwn$2(a,o)||hasOwn$2(i,o)||hasOwn$2(publicPropertiesMap,o)||hasOwn$2(r.config.globalProperties,o)}},emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||emptyAppContext,s={uid:uid$1++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,r),emitsOptions:normalizeEmitsOptions(i,r),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=emit$1.bind(null,s),n.ce&&n.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=n=>{currentInstance=n,n.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(n){return n.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(n,e=!1){isInSSRComponentSetup=e;const{props:t,children:i}=n.vnode,r=isStatefulComponent(n);initProps(n,t,r,e),initSlots(n,i);const s=r?setupStatefulComponent(n,e):void 0;return isInSSRComponentSetup=!1,s}function setupStatefulComponent(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=markRaw(new Proxy(n.ctx,PublicInstanceProxyHandlers));const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?createSetupContext(n):null;setCurrentInstance(n),pauseTracking();const s=callWithErrorHandling(i,n,0,[n.props,r]);if(resetTracking(),unsetCurrentInstance(),isPromise(s)){if(s.then(unsetCurrentInstance,unsetCurrentInstance),e)return s.then(o=>{handleSetupResult(n,o,e)}).catch(o=>{handleError(o,n,0)});n.asyncDep=s}else handleSetupResult(n,s,e)}else finishComponentSetup(n,e)}function handleSetupResult(n,e,t){isFunction$1(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:isObject$1(e)&&(n.setupState=proxyRefs(e)),finishComponentSetup(n,t)}let compile;function finishComponentSetup(n,e,t){const i=n.type;if(!n.render){if(!e&&compile&&!i.render){const r=i.template;if(r){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=extend$4(extend$4({isCustomElement:s,delimiters:a},o),l);i.render=compile(r,c)}}n.render=i.render||NOOP}setCurrentInstance(n),pauseTracking(),applyOptions(n),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(n){return new Proxy(n.attrs,{get(e,t){return track(n,"get","$attrs"),e[t]}})}function createSetupContext(n){const e=i=>{n.exposed=i||{}};let t;return{get attrs(){return t||(t=createAttrsProxy(n))},slots:n.slots,emit:n.emit,expose:e}}function getExposeProxy(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(proxyRefs(markRaw(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](n)}}))}function getComponentName(n){return isFunction$1(n)&&n.displayName||n.name}function isClassComponent(n){return isFunction$1(n)&&"__vccOpts"in n}const computed=(n,e)=>computed$1(n,e,isInSSRComponentSetup),version="3.2.29",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e?doc.createElementNS(svgNS,n):doc.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>doc.createTextNode(n),createComment:n=>doc.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>doc.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},cloneNode(n){const e=n.cloneNode(!0);return"_value"in n&&(e._value=n._value),e},insertStaticContent(n,e,t,i,r,s){const o=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{templateContainer.innerHTML=i?`<svg>${n}</svg>`:n;const a=templateContainer.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function patchClass(n,e,t){const i=n._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function patchStyle(n,e,t){const i=n.style,r=isString$2(t);if(t&&!r){for(const s in t)setStyle(i,s,t[s]);if(e&&!isString$2(e))for(const s in e)t[s]==null&&setStyle(i,s,"")}else{const s=i.display;r?e!==t&&(i.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(i.display=s)}}const importantRE=/\s*!important$/;function setStyle(n,e,t){if(isArray$5(t))t.forEach(i=>setStyle(n,e,i));else if(e.startsWith("--"))n.setProperty(e,t);else{const i=autoPrefix(n,e);importantRE.test(t)?n.setProperty(hyphenate(i),t.replace(importantRE,""),"important"):n[i]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(n,e){const t=prefixCache[e];if(t)return t;let i=camelize(e);if(i!=="filter"&&i in n)return prefixCache[e]=i;i=capitalize(i);for(let r=0;r<prefixes.length;r++){const s=prefixes[r]+i;if(s in n)return prefixCache[e]=s}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(n,e,t,i,r){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(xlinkNS,e.slice(6,e.length)):n.setAttributeNS(xlinkNS,e,t);else{const s=isSpecialBooleanAttr(e);t==null||s&&!includeBooleanAttr(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function patchDOMProp(n,e,t,i,r,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,r,s),n[e]=t==null?"":t;return}if(e==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=t;const a=t==null?"":t;(n.value!==a||n.tagName==="OPTION")&&(n.value=a),t==null&&n.removeAttribute(e);return}if(t===""||t==null){const a=typeof n[e];if(a==="boolean"){n[e]=includeBooleanAttr(t);return}else if(t==null&&a==="string"){n[e]="",n.removeAttribute(e);return}else if(a==="number"){try{n[e]=0}catch{}n.removeAttribute(e);return}}try{n[e]=t}catch{}}let _getNow=Date.now,skipTimestampCheck=!1;if(typeof window!="undefined"){_getNow()>document.createEvent("Event").timeStamp&&(_getNow=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);skipTimestampCheck=!!(n&&Number(n[1])<=53)}let cachedNow=0;const p=Promise.resolve(),reset$1=()=>{cachedNow=0},getNow=()=>cachedNow||(p.then(reset$1),cachedNow=_getNow());function addEventListener(n,e,t,i){n.addEventListener(e,t,i)}function removeEventListener(n,e,t,i){n.removeEventListener(e,t,i)}function patchEvent(n,e,t,i,r=null){const s=n._vei||(n._vei={}),o=s[e];if(i&&o)o.value=i;else{const[a,l]=parseName(e);if(i){const c=s[e]=createInvoker(i,r);addEventListener(n,a,c,l)}else o&&(removeEventListener(n,a,o,l),s[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(n){let e;if(optionsModifierRE.test(n)){e={};let t;for(;t=n.match(optionsModifierRE);)n=n.slice(0,n.length-t[0].length),e[t[0].toLowerCase()]=!0}return[hyphenate(n.slice(2)),e]}function createInvoker(n,e){const t=i=>{const r=i.timeStamp||_getNow();(skipTimestampCheck||r>=t.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(i,t.value),e,5,[i])};return t.value=n,t.attached=getNow(),t}function patchStopImmediatePropagation(n,e){if(isArray$5(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(n,e,t,i,r=!1,s,o,a,l)=>{e==="class"?patchClass(n,i,r):e==="style"?patchStyle(n,t,i):isOn(e)?isModelListener(e)||patchEvent(n,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(n,e,i,r))?patchDOMProp(n,e,i,s,o,a,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),patchAttr(n,e,i,r))};function shouldSetAsProp(n,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in n&&nativeOnRE.test(e)&&isFunction$1(t)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString$2(t)?!1:e in n}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const getModelAssigner=n=>{const e=n.props["onUpdate:modelValue"];return isArray$5(e)?t=>invokeArrayFns(e,t):e},vModelCheckbox={deep:!0,created(n,e,t){n._assign=getModelAssigner(t),addEventListener(n,"change",()=>{const i=n._modelValue,r=getValue(n),s=n.checked,o=n._assign;if(isArray$5(i)){const a=looseIndexOf(i,r),l=a!==-1;if(s&&!l)o(i.concat(r));else if(!s&&l){const c=[...i];c.splice(a,1),o(c)}}else if(isSet$1(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(getCheckboxValue(n,s))})},mounted:setChecked,beforeUpdate(n,e,t){n._assign=getModelAssigner(t),setChecked(n,e,t)}};function setChecked(n,{value:e,oldValue:t},i){n._modelValue=e,isArray$5(e)?n.checked=looseIndexOf(e,i.props.value)>-1:isSet$1(e)?n.checked=e.has(i.props.value):e!==t&&(n.checked=looseEqual(e,getCheckboxValue(n,!0)))}const vModelRadio={created(n,{value:e},t){n.checked=looseEqual(e,t.props.value),n._assign=getModelAssigner(t),addEventListener(n,"change",()=>{n._assign(getValue(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n._assign=getModelAssigner(i),e!==t&&(n.checked=looseEqual(e,i.props.value))}};function getValue(n){return"_value"in n?n._value:n.value}function getCheckboxValue(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>systemModifiers.some(t=>n[`${t}Key`]&&!e.includes(t))},withModifiers=(n,e)=>(t,...i)=>{for(let r=0;r<e.length;r++){const s=modifierGuards[e[r]];if(s&&s(t,e))return}return n(t,...i)},rendererOptions=extend$4({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...n)=>{const e=ensureRenderer().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=normalizeContainer(i);if(!r)return;const s=e._component;!isFunction$1(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function normalizeContainer(n){return isString$2(n)?document.querySelector(n):n}class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function stopPropagation(n){n.stopPropagation()}var ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}var Disposable$1=Disposable;function binarySearch(n,e,t){let i,r;t=t||numberSafeCompareFunction;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function numberSafeCompareFunction(n,e){return n>e?1:n<e?-1:0}function linearFindNearest(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;{let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return typeof t=="function"?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}}function reverseSubArray(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function extend$3(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function equals$2(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function isSorted(n,e,t){const i=e||numberSafeCompareFunction;return n.every(function(r,s){if(s===0)return!0;const o=i(n[s-1],r);return!(o>0||t&&o===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(n){let e=!1,t,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!equals$2(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}function clear(n){for(const e in n)delete n[e]}function isEmpty$1(n){let e;for(e in n)return!1;return!e}class Target extends Disposable$1{constructor(e){super();this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new BaseEvent(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]==0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,VOID);delete o[i]}return l}disposeInternal(){this.listeners_&&clear(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=VOID,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}}var EventTarget=Target,EventType={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function listenOnce(n,e,t,i){return listen(n,e,t,i,!0)}function unlistenByKey(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),clear(n))}class Observable extends EventTarget{constructor(){super();this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=listen(this,e[s],t);return r}else return listen(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=listenOnce(this,e[s],t)}else i=listenOnce(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)unByKey(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)unlistenByKey(n[e]);else unlistenByKey(n)}var Observable$1=Observable;function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(n){return n.ol_uid||(n.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,t,i){super(e);this.key=t,this.oldValue=i}}class BaseObject extends Observable$1{constructor(e){super();this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new ObjectEvent(i,e,t)),i=ObjectEventType.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new ObjectEvent(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}var BaseObject$1=BaseObject,LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};const messages={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class AssertionError extends Error{constructor(e){const t=messages[e];super(t);this.code=e,this.name="AssertionError",this.message=t}}var AssertionError$1=AssertionError;function assert(n,e){if(!n)throw new AssertionError$1(e)}function clamp(n,e,t){return Math.min(Math.max(n,e),t)}function squaredSegmentDistance(n,e,t,i,r,s){const o=r-t,a=s-i;if(o!==0||a!==0){const l=((n-t)*o+(e-i)*a)/(o*o+a*a);l>1?(t=r,i=s):l>0&&(t+=o*l,i+=a*l)}return squaredDistance(n,e,t,i)}function squaredDistance(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function solveLinearSystem(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(n[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const l=-n[a][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[a][c]=0:n[a][c]+=l*n[i][c]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function toRadians(n){return n*Math.PI/180}function modulo(n,e){const t=n%e;return t*e<0?t+e:t}function lerp$2(n,e,t){return n+t*(e-n)}function toFixed(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function floor(n,e){return Math.floor(toFixed(n,e))}function ceil(n,e){return Math.ceil(toFixed(n,e))}class BaseLayer extends BaseObject$1{constructor(e){super();this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof t[LayerProperty.OPACITY]=="number",64),t[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,t[LayerProperty.Z_INDEX]=e.zIndex,t[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number",64),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var BaseLayer$1=BaseLayer,RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Layer extends BaseLayer$1{constructor(e){const t=Object.assign({},e);delete t.source;super(t);this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(t=>t([]))}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);assert(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function inView(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function quickselect(n,e,t,i,r){quickselectStep(n,e,t||0,i||n.length-1,r||defaultCompare)}function quickselectStep(n,e,t,i,r){for(;i>t;){if(i-t>600){var s=i-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(t,Math.floor(e-o*l/s+c)),h=Math.min(i,Math.floor(e+(s-o)*l/s+c));quickselectStep(n,e,u,h,r)}var d=n[e],f=t,g=i;for(swap(n,t,e),r(n[i],d)>0&&swap(n,t,i);f<g;){for(swap(n,f,g),f++,g--;r(n[f],d)<0;)f++;for(;r(n[g],d)>0;)g--}r(n[t],d)===0?swap(n,t,g):(g++,swap(n,g,i)),g<=e&&(t=g+1),e<=g&&(i=g-1)}}function swap(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function defaultCompare(n,e){return n<e?-1:n>e?1:0}class RBush$2{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!intersects$1(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;intersects$1(e,l)&&(t.leaf?i.push(a):contains(e,l)?this._all(a,i):s.push(a))}t=s.pop()}return i}collides(e){let t=this.data;if(!intersects$1(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(intersects$1(e,o)){if(t.leaf||contains(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const u=findItem(e,i.children,t);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&contains(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let o=this._maxEntries,a;if(s<=o)return a=createNode(e.slice(t,i+1)),calcBBox(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=createNode([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));multiSelect(e,t,i,c,this.compareMinX);for(let u=t;u<=i;u+=c){const h=Math.min(u+c-1,i);multiSelect(e,u,h,l,this.compareMinY);for(let d=u;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,r-1))}}return calcBBox(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],u=bboxArea(c),h=enlargedArea(e,c)-u;h<o?(o=h,s=u<s?u:s,a=c):h===o&&u<s&&(s=u,a=c)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),extend$2(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=createNode(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,calcBBox(i,this.toBBox),calcBBox(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=createNode([e,t]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=distBBox(e,0,a,this.toBBox),c=distBBox(e,a,i,this.toBBox),u=intersectionArea(l,c),h=bboxArea(l)+bboxArea(c);u<s?(s=u,r=a,o=h<o?h:o):u===s&&h<o&&(o=h,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:compareNodeMinX,s=e.leaf?this.compareMinY:compareNodeMinY,o=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,o=distBBox(e,0,t,s),a=distBBox(e,i-t,i,s);let l=bboxMargin(o)+bboxMargin(a);for(let c=t;c<i-t;c++){const u=e.children[c];extend$2(o,e.leaf?s(u):u),l+=bboxMargin(o)}for(let c=i-t-1;c>=t;c--){const u=e.children[c];extend$2(a,e.leaf?s(u):u),l+=bboxMargin(a)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)extend$2(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():calcBBox(e[t],this.toBBox)}}function findItem(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function calcBBox(n,e){distBBox(n,0,n.children.length,e,n)}function distBBox(n,e,t,i,r){r||(r=createNode(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];extend$2(r,n.leaf?i(o):o)}return r}function extend$2(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function compareNodeMinX(n,e){return n.minX-e.minX}function compareNodeMinY(n,e){return n.minY-e.minY}function bboxArea(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function bboxMargin(n){return n.maxX-n.minX+(n.maxY-n.minY)}function enlargedArea(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function intersectionArea(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function contains(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function intersects$1(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function createNode(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;quickselect(n,o,e,t,r),s.push(e,o,o,t)}}var ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function hasArea(n){return n[0]>0&&n[1]>0}function scale$3(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function toSize(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}}var ImageStyle$1=ImageStyle;const HEX_COLOR_RE_=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,NAMED_COLOR_RE_=/^([a-z]*)$|^hsla?\(.*\)$/i;function asString(n){return typeof n=="string"?n:toString$2(n)}function fromNamed(n){const e=document.createElement("div");if(e.style.color=n,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}else return""}const fromString=function(){const n=1024,e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=n){let s=0;for(const o in e)(s++&3)==0&&(delete e[o],--t)}r=fromStringInternal_(i),e[i]=r,++t}return r}}();function asArray(n){return Array.isArray(n)?n:fromString(n)}function fromStringInternal_(n){let e,t,i,r,s;if(NAMED_COLOR_RE_.exec(n)&&(n=fromNamed(n)),HEX_COLOR_RE_.exec(n)){const o=n.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),l?r=parseInt(n.substr(1+3*a,a),16):r=255,a==1&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),normalize(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),normalize(s)):assert(!1,14);return s}function normalize(n){return n[0]=clamp(n[0]+.5|0,0,255),n[1]=clamp(n[1]+.5|0,0,255),n[2]=clamp(n[2]+.5|0,0,255),n[3]=clamp(n[3],0,1),n}function toString$2(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+r+")"}function isStringColor(n){return NAMED_COLOR_RE_.test(n)&&(n=fromNamed(n)),HEX_COLOR_RE_.test(n)||n.startsWith("rgba(")||n.startsWith("rgb(")}function asColorLike(n){return Array.isArray(n)?toString$2(n):n}const ua=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom"),SAFARI_BUG_237906=SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua)),WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image!="undefined"&&Image.prototype.decode,PASSIVE_EVENT_LISTENERS=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function createCanvasContext2D(n,e,t,i){let r;return t&&t.length?r=t.shift():WORKER_OFFSCREEN_CANVAS?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function releaseCanvas$1(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function replaceNode(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function removeNode(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function removeChildren(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function replaceChildren(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}const CLASS_HIDDEN="ol-hidden",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(n){const e=n.match(fontRegEx);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=fontRegExMatchIndex.length;i<r;++i){const s=e[i+1];s!==void 0&&(t[fontRegExMatchIndex[i]]=s)}return t.families=t.family.split(/,\s?/),t},defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject$1;let measureContext=null,measureFont;const textHeights={},registerFont=function(){const n=100,e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uF013";let s,o;function a(c,u,h){let d=!0;for(let f=0;f<i;++f){const g=t[f];if(o=measureTextWidth(c+" "+u+" "+e+g,r),h!=g){const _=measureTextWidth(c+" "+u+" "+e+h+","+g,r);d=d&&_!=o}}return!!d}function l(){let c=!0;const u=checkedFonts.getKeys();for(let h=0,d=u.length;h<d;++h){const f=u[h];checkedFonts.get(f)<n&&(a.apply(this,f.split(`
`))?(clear(textHeights),measureContext=null,measureFont=void 0,checkedFonts.set(f,n)):(checkedFonts.set(f,checkedFonts.get(f)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=getFontParameters(c);if(!u)return;const h=u.families;for(let d=0,f=h.length;d<f;++d){const g=h[d],_=u.style+`
`+u.weight+`
`+g;checkedFonts.get(_)===void 0&&(checkedFonts.set(_,n,!0),a(u.style,u.weight,g)||(checkedFonts.set(_,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),measureTextHeight=function(){let n;return function(e){let t=textHeights[e];if(t==null){if(WORKER_OFFSCREEN_CANVAS){const i=getFontParameters(e),r=measureText(e,"\u017Dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);textHeights[e]=t}return t}}();function measureText(n,e){return measureContext||(measureContext=createCanvasContext2D(1,1)),n!=measureFont&&(measureContext.font=n,measureFont=measureContext.font),measureContext.measureText(e)}function measureTextWidth(n,e){return measureText(n,e).width}function measureAndCacheTextWidth(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,measureTextWidth(n,s)),0);return t[e]=i,i}function getTextDimensions(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const d=e[c+1]||n.font,f=measureTextWidth(d,h);t.push(f),o+=f;const g=measureTextHeight(d);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}function drawImageOrLabel(n,e,t,i,r,s,o,a,l,c,u){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(l,c),n.scale(u[0],u[1]),executeLabelInstructions(i,n)):u[0]<0||u[1]<0?(n.translate(l,c),n.scale(u[0],u[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),n.restore()}function executeLabelInstructions(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class RegularShape extends ImageStyle$1{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode});this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=createCanvasContext2D(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ImageState.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const $=r;r=s,s=$}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,h=Math.sqrt(l*l+u*u),d=h/l;if(e==="miter"&&d<=i)return d*t;const f=t/2/d,g=t/2*(u/h),m=Math.sqrt((r+f)*(r+f)+g*g)-r;if(this.radius2_===void 0||e==="bevel")return m*2;const y=r*Math.sin(a),E=Math.sqrt(r*r-y*y),T=s-E,S=Math.sqrt(y*y+T*T)/y;if(S<=i){const $=S*t/2-s-r;return 2*Math.max(m,$)}return m*2}createRenderOptions(){let e=defaultLineJoin,t=0,i=null,r=0,s,o=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=defaultStrokeStyle),s=asColorLike(s),o=this.stroke_.getWidth(),o===void 0&&(o=defaultLineWidth),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=defaultLineJoin),t=this.stroke_.getMiterLimit(),t===void 0&&(t=defaultMiterLimit));const a=this.calculateLineJoinSize_(e,o,t),l=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*l+a);return{strokeStyle:s,strokeWidth:o,size:c,lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=defaultFillStyle),t.fillStyle=asColorLike(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if(typeof t=="string"&&(t=asArray(t)),t===null?i=1:Array.isArray(t)&&(i=t.length===4?t[3]:1),i===0){const r=createCanvasContext2D(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2==0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=defaultFillStyle,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}var RegularShape$1=RegularShape;class CircleStyle extends RegularShape$1{constructor(e){e=e||{radius:5};super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}var Circle=CircleStyle;class Fill{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}var Fill$1=Fill;class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}var Stroke$1=Stroke;class Style{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Style({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function toFunction(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(assert(typeof n.getZIndex=="function",41),t=[n]),e=function(){return t}}return e}let defaultStyles=null;function createDefaultStyle(n,e){if(!defaultStyles){const t=new Fill$1({color:"rgba(255,255,255,0.4)"}),i=new Stroke$1({color:"#3399CC",width:1.25});defaultStyles=[new Style({image:new Circle({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return defaultStyles}function defaultGeometryFunction(n){return n.getGeometry()}var Style$1=Style;class IconImageCache{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)==0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=getKey$1(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=getKey$1(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getKey$1(n,e,t){const i=t?asString(t):"null";return e+":"+n+":"+i}const shared=new IconImageCache;class ImageBase extends EventTarget{constructor(e,t,i,r){super();this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=r}changed(){this.dispatchEvent(EventType.CHANGE)}getExtent(){return this.extent}getImage(){return abstract()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){abstract()}}var ImageBase$1=ImageBase,Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(n){const e=createEmpty();for(let t=0,i=n.length;t<i;++t)extendCoordinate(e,n[t]);return e}function _boundingExtentXYs(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),s=Math.max.apply(null,n),o=Math.max.apply(null,e);return createOrUpdate$2(i,r,s,o,t)}function buffer(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function clone(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function closestSquaredDistanceXY(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function containsCoordinate(n,e){return containsXY(n,e[0],e[1])}function containsExtent(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function containsXY(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function coordinateRelationship(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=e[0],a=e[1];let l=Relationship.UNKNOWN;return o<t?l=l|Relationship.LEFT:o>r&&(l=l|Relationship.RIGHT),a<i?l=l|Relationship.BELOW:a>s&&(l=l|Relationship.ABOVE),l===Relationship.UNKNOWN&&(l=Relationship.INTERSECTING),l}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function createOrUpdateEmpty(n){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,n)}function createOrUpdateFromCoordinate(n,e){const t=n[0],i=n[1];return createOrUpdate$2(t,i,t,i,e)}function createOrUpdateFromFlatCoordinates(n,e,t,i,r){const s=createOrUpdateEmpty(r);return extendFlatCoordinates(s,n,e,t,i)}function equals$1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function approximatelyEquals(n,e,t){return Math.abs(n[0]-e[0])<t&&Math.abs(n[2]-e[2])<t&&Math.abs(n[1]-e[1])<t&&Math.abs(n[3]-e[3])<t}function extend$1(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function extendCoordinate(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function extendFlatCoordinates(n,e,t,i,r){for(;t<i;t+=r)extendXY(n,e[t],e[t+1]);return n}function extendXY(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function forEachCorner(n,e){let t;return t=e(getBottomLeft(n)),t||(t=e(getBottomRight(n)),t)||(t=e(getTopRight(n)),t)||(t=e(getTopLeft(n)),t)?t:!1}function getArea(n){let e=0;return isEmpty(n)||(e=getWidth(n)*getHeight(n)),e}function getBottomLeft(n){return[n[0],n[1]]}function getBottomRight(n){return[n[2],n[1]]}function getCenter(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function getCorner(n,e){let t;return e==="bottom-left"?t=getBottomLeft(n):e==="bottom-right"?t=getBottomRight(n):e==="top-left"?t=getTopLeft(n):e==="top-right"?t=getTopRight(n):assert(!1,13),t}function getForViewAndSize(n,e,t,i,r){const[s,o,a,l,c,u,h,d]=getRotatedViewport(n,e,t,i);return createOrUpdate$2(Math.min(s,a,c,h),Math.min(o,l,u,d),Math.max(s,a,c,h),Math.max(o,l,u,d),r)}function getRotatedViewport(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,c=r*a,u=s*o,h=s*a,d=n[0],f=n[1];return[d-l+h,f-c-u,d-l-h,f-c+u,d+l-h,f+c+u,d+l+h,f+c-u,d-l+h,f-c-u]}function getHeight(n){return n[3]-n[1]}function getIntersection(n,e,t){const i=t||createEmpty();return intersects(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):createOrUpdateEmpty(i),i}function getTopLeft(n){return[n[0],n[3]]}function getTopRight(n){return[n[2],n[3]]}function getWidth(n){return n[2]-n[0]}function intersects(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function isEmpty(n){return n[2]<n[0]||n[3]<n[1]}function returnOrUpdate(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function intersectsSegment(n,e,t){let i=!1;const r=coordinateRelationship(n,e),s=coordinateRelationship(n,t);if(r===Relationship.INTERSECTING||s===Relationship.INTERSECTING)i=!0;else{const o=n[0],a=n[1],l=n[2],c=n[3],u=e[0],h=e[1],d=t[0],f=t[1],g=(f-h)/(d-u);let _,m;!!(s&Relationship.ABOVE)&&!(r&Relationship.ABOVE)&&(_=d-(f-c)/g,i=_>=o&&_<=l),!i&&!!(s&Relationship.RIGHT)&&!(r&Relationship.RIGHT)&&(m=f-(d-l)*g,i=m>=a&&m<=c),!i&&!!(s&Relationship.BELOW)&&!(r&Relationship.BELOW)&&(_=d-(f-a)/g,i=_>=o&&_<=l),!i&&!!(s&Relationship.LEFT)&&!(r&Relationship.LEFT)&&(m=f-(d-o)*g,i=m>=a&&m<=c)}return i}function applyTransform(n,e,t,i){let r=[];if(i>1){const a=n[2]-n[0],l=n[3]-n[1];for(let c=0;c<i;++c)r.push(n[0]+a*c/i,n[1],n[2],n[1]+l*c/i,n[2]-a*c/i,n[3],n[0],n[3]-l*c/i)}else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return _boundingExtentXYs(s,o,t)}function wrapX$2(n,e){const t=e.getExtent(),i=getCenter(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=getWidth(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function wrapAndSliceX(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];wrapX$2(n,e);const i=getWidth(t);if(getWidth(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}class ImageWrapper extends ImageBase$1{constructor(e,t,i,r,s,o){super(e,t,i,ImageState.IDLE);this.src_=r,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.state=ImageState.IDLE,this.imageLoadFunction_=o}getImage(){return this.image_}handleImageError_(){this.state=ImageState.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){this.resolution===void 0&&(this.resolution=getHeight(this.extent)/this.image_.height),this.state=ImageState.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==ImageState.IDLE||this.state==ImageState.ERROR)&&(this.state=ImageState.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(e){this.image_=e,this.resolution=getHeight(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function listenImage(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[listenOnce(i,EventType.LOAD,function(){o=!0,s||e()})];return i.src&&IMAGE_DECODE?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(listenOnce(i,EventType.ERROR,t)),function(){r=!1,a.forEach(unlistenByKey)}}var ImageWrapper$1=ImageWrapper;let taintedTestContext=null;class IconImage extends EventTarget{constructor(e,t,i,r,s,o){super();this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1)),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=createCanvasContext2D(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=asString(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function get$3(n,e,t,i,r,s){let o=shared.get(e,i,s);return o||(o=new IconImage(n,e,t,i,r,s),shared.set(e,i,s,o)),o}class Icon extends ImageStyle$1{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode});this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let a=e.src;assert(!(a!==void 0&&o),4),assert(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||getUid(o)),assert(a!==void 0&&a.length>0,6);const l=e.src!==void 0?ImageState.IDLE:ImageState.LOADED;this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$3(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null}clone(){const e=this.getScale();return new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}}var Icon$1=Icon;const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill$1({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}var Text$1=Text;function toStyle(n){return new Style$1({fill:getFill(n,""),stroke:getStroke(n,""),text:getText$1(n),image:getImage(n)})}function getFill(n,e){const t=n[e+"fill-color"];if(!!t)return new Fill$1({color:t})}function getStroke(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(!(!t&&!i))return new Stroke$1({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function getText$1(n){const e=n["text-value"];return e?new Text$1({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:getFill(n,"text-"),backgroundFill:getFill(n,"text-background-"),stroke:getStroke(n,"text-"),backgroundStroke:getStroke(n,"text-background-")}):void 0}function getImage(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new Icon$1({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new RegularShape$1({points:i,fill:getFill(n,s),stroke:getStroke(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new Circle({radius:r,fill:getFill(n,s),stroke:getStroke(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const Property$2={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting;super(t);this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$2.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new RBush$2(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Property$2.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=createDefaultStyle;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof Style$1)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const o=e[s];o instanceof Style$1?r[s]=o:r[s]=toStyle(o)}t=r}else t=toStyle(e);this.style_=t,this.styleFunction_=e===null?void 0:toFunction(this.style_),this.changed()}}var BaseVectorLayer$1=BaseVectorLayer;const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];var CanvasInstruction=Instruction;class VectorContext{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}var VectorContext$1=VectorContext;function inflateCoordinates(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function inflateCoordinatesArray(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=inflateCoordinates(n,e,l,i,r[s]),e=l}return r.length=s,r}function inflateMultiCoordinatesArray(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:inflateCoordinatesArray(n,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}class CanvasBuilder extends VectorContext$1{constructor(e,t,i,r){super();this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],containsCoordinate(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],h=e[t+1];const d=this.tmpCoordinate_;let f=!0,g,_,m;for(g=t+r;g<i;g+=r)d[0]=e[g],d[1]=e[g+1],m=coordinateRelationship(c,d),m!==_?(f&&(a[l++]=u,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):m===Relationship.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,u=d[0],h=d[1],_=m;return(s&&f||g===t+r)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,c,u,h,d;switch(s){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),h=[];const f=e.getEndss();d=0;for(let g=0,_=f.length;g<_;++g){const m=[];d=this.drawCustomCoordinates_(l,d,f[g],o,m),h.push(m)}this.instructions.push([CanvasInstruction.CUSTOM,a,h,e,i,inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM,a,h,e,r||i,inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,e.getEnds(),o,u),this.instructions.push([CanvasInstruction.CUSTOM,a,u,e,i,inflateCoordinatesArray]),this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM,a,u,e,r||i,inflateCoordinatesArray]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([CanvasInstruction.CUSTOM,a,c,e,i,inflateCoordinates]),this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM,a,c,e,r||i,inflateCoordinates]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([CanvasInstruction.CUSTOM,a,c,e,i,inflateCoordinates]),this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM,a,c,e,r||i,inflateCoordinates]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([CanvasInstruction.CUSTOM,a,c,e,i]),this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM,a,c,e,r||i]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[CanvasInstruction.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[CanvasInstruction.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==CanvasInstruction.END_GEOMETRY?o=t:s==CanvasInstruction.BEGIN_GEOMETRY&&(r[2]=t,reverseSubArray(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=asColorLike(r||defaultFillStyle)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=asColorLike(r||defaultStrokeStyle);const s=t.getLineCap();i.lineCap=s!==void 0?s:defaultLineCap;const o=t.getLineDash();i.lineDash=o?o.slice():defaultLineDash;const a=t.getLineDashOffset();i.lineDashOffset=a||defaultLineDashOffset;const l=t.getLineJoin();i.lineJoin=l!==void 0?l:defaultLineJoin;const c=t.getWidth();i.lineWidth=c!==void 0?c:defaultLineWidth;const u=t.getMiterLimit();i.miterLimit=u!==void 0?u:defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[CanvasInstruction.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[CanvasInstruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!equals$2(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[CanvasInstruction.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var Builder=CanvasBuilder;class CanvasImageBuilder extends Builder{constructor(e,t,i,r){super(e,t,i,r);this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([CanvasInstruction.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([CanvasInstruction.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}var ImageBuilder=CanvasImageBuilder;class CanvasLineStringBuilder extends Builder{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[CanvasInstruction.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],beginPathInstruction);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}var LineStringBuilder=CanvasLineStringBuilder;function douglasPeucker(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-i];let u=0;for(;c.length>0;){const h=c.pop(),d=c.pop();let f=0;const g=n[d],_=n[d+1],m=n[h],y=n[h+1];for(let E=d+i;E<h;E+=i){const T=n[E],v=n[E+1],S=squaredSegmentDistance(T,v,g,_,m,y);S>f&&(u=E,f=S)}f>r&&(l[(u-e)/i]=1,d+i<u&&c.push(d,u),u+i<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=n[e+h*i],s[o++]=n[e+h*i+1]);return o}function douglasPeuckerArray(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=douglasPeucker(n,e,u,i,r,s,o),a.push(o),e=u}return o}function snap(n,e){return e*Math.round(n/e)}function quantize(n,e,t,i,r,s,o){if(e==t)return o;let a=snap(n[e],r),l=snap(n[e+1],r);e+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=snap(n[e],r),u=snap(n[e+1],r),e+=i,e==t)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<t;){const h=snap(n[e],r),d=snap(n[e+1],r);if(e+=i,h==c&&d==u)continue;const f=c-a,g=u-l,_=h-a,m=d-l;if(f*m==g*_&&(f<0&&_<f||f==_||f>0&&_>f)&&(g<0&&m<g||g==m||g>0&&m>g)){c=h,u=d;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=h,u=d}return s[o++]=c,s[o++]=u,o}function quantizeArray(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=quantize(n,e,u,i,r,s,o),a.push(o),e=u}return o}function quantizeMultiArray(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l],h=[];o=quantizeArray(n,e,u,i,r,s,o,h),a.push(h),e=u[u.length-1]}return o}class CanvasPolygonBuilder extends Builder{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let c=0;c<l;++c){const u=i[c],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),f=[CanvasInstruction.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),t=u}return o&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),a&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),t}drawCircle(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([CanvasInstruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[CanvasInstruction.CIRCLE,l];this.instructions.push(beginPathInstruction,c),this.hitDetectionInstructions.push(beginPathInstruction,c),i.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),i.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([CanvasInstruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([CanvasInstruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=snap(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}var PolygonBuilder=CanvasPolygonBuilder;function matchingChunk(n,e,t,i,r){let s=t,o=t,a=0,l=0,c=t,u,h,d,f,g,_,m,y,E,T;for(h=t;h<i;h+=r){const v=e[h],S=e[h+1];g!==void 0&&(E=v-g,T=S-_,f=Math.sqrt(E*E+T*T),m!==void 0&&(l+=d,u=Math.acos((m*E+y*T)/(d*f)),u>n&&(l>a&&(a=l,s=c,o=h),l=0,c=h-r)),d=f,m=E,y=T),g=v,_=S}return l+=f,l>a?[c,h]:[s,o]}const TEXT_ALIGN={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends Builder{constructor(e,t,i,r){super(e,t,i,r);this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=e.getType();let c=null,u=e.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!intersects(this.getBufferedMaxExtent(),e.getExtent()))return;let h;if(c=e.getFlatCoordinates(),l=="LineString")h=[c.length];else if(l=="MultiLineString")h=e.getEnds();else if(l=="Polygon")h=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const _=e.getEndss();h=[];for(let m=0,y=_.length;m<y;++m)h.push(_[m][0])}this.beginGeometry(e,t);const d=s.textAlign;let f=0,g;for(let _=0,m=h.length;_<m;++_){if(d==null){const E=matchingChunk(s.maxAngle,c,f,h[_],u);f=E[0],g=E[1]}else g=h[_];for(let E=f;E<g;E+=u)o.push(c[E],c[E+1]);const y=o.length;f=h[_],this.drawChars_(a,y),a=y}this.endGeometry(t)}else{let h=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),u=2;break;case"Polygon":c=e.getFlatInteriorPoint(),s.overflow||h.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const m=e.getFlatInteriorPoints();c=[];for(let y=0,E=m.length;y<E;y+=3)s.overflow||h.push(m[y+2]/this.resolution),c.push(m[y],m[y+1]);if(c.length===0)return;u=2;break}const d=this.appendFlatPointCoordinates(c,u);if(d===a)return;if(h&&(d-a)/2!=c.length/u){let m=a/2;h=h.filter((y,E)=>{const T=o[(m+E)*2]===c[E*u]&&o[(m+E)*2+1]===c[E*u+1];return T||--m,T})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let f=s.padding;if(f!=defaultPadding&&(s.scale[0]<0||s.scale[1]<0)){let m=s.padding[0],y=s.padding[1],E=s.padding[2],T=s.padding[3];s.scale[0]<0&&(y=-y,T=-T),s.scale[1]<0&&(m=-m,E=-E),f=[m,y,E,T]}const g=this.pixelRatio;this.instructions.push([CanvasInstruction.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==defaultPadding?defaultPadding:f.map(function(m){return m*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const _=1/g;this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[_,_],NaN,void 0,this.declutterImageWithText_,f,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||defaultTextAlign,justify:t.justify,textBaseline:t.textBaseline||defaultTextBaseline,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=TEXT_ALIGN[r.textBaseline],u=this.textOffsetY_*l,h=this.text_,d=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([CanvasInstruction.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,l,u,s,d*l,h,o,1]),this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,1,u,s,d,h,o,1/l])}setTextStyle(e,t){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=asColorLike(o.getColor()||defaultFillStyle)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),_=a.getLineDashOffset(),m=a.getWidth(),y=a.getMiterLimit();s.lineCap=a.getLineCap()||defaultLineCap,s.lineDash=g?g.slice():defaultLineDash,s.lineDashOffset=_===void 0?defaultLineDashOffset:_,s.lineJoin=a.getLineJoin()||defaultLineJoin,s.lineWidth=m===void 0?defaultLineWidth:m,s.miterLimit=y===void 0?defaultMiterLimit:y,s.strokeStyle=asColorLike(a.getColor()||defaultStrokeStyle)}i=this.textState_;const l=e.getFont()||defaultFont;registerFont(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||defaultTextBaseline,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||defaultPadding,i.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:getUid(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+getUid(r.fillStyle):""}this.declutterImageWithText_=t}}const BATCH_CONSTRUCTORS={Circle:PolygonBuilder,Default:Builder,Image:ImageBuilder,LineString:LineStringBuilder,Polygon:PolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(s===void 0){const o=BATCH_CONSTRUCTORS[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}var CanvasBuilderGroup=BuilderGroup;class LayerRenderer extends Observable$1{constructor(e){super();this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,t){return abstract()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return function(r,s){const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}.bind(this)}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===ImageState.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ImageState.LOADED&&t!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),t==ImageState.IDLE&&(e.load(),t=e.getState()),t==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var LayerRenderer$1=LayerRenderer;class RenderEvent extends BaseEvent{constructor(e,t,i,r){super(e);this.inversePixelTransform=t,this.frameState=i,this.context=r}}var RenderEvent$1=RenderEvent;const tmp_=new Array(6);function create$3(){return[1,0,0,1,0,0]}function reset(n){return set(n,1,0,0,1,0,0)}function multiply(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=e[0],c=e[1],u=e[2],h=e[3],d=e[4],f=e[5];return n[0]=t*l+r*c,n[1]=i*l+s*c,n[2]=t*u+r*h,n[3]=i*u+s*h,n[4]=t*d+r*f+o,n[5]=i*d+s*f+a,n}function set(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function setFromArray(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function apply(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function rotate$2(n,e){const t=Math.cos(e),i=Math.sin(e);return multiply(n,set(tmp_,t,i,-i,t,0,0))}function scale$2(n,e,t){return multiply(n,set(tmp_,e,0,0,t,0,0))}function makeScale(n,e,t){return set(n,e,0,0,t,0,0)}function translate$1(n,e,t){return multiply(n,set(tmp_,1,0,0,1,e,t))}function compose(n,e,t,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=o*i*c-a*i*l+e,n[5]=o*r*l+a*r*c+t,n}function makeInverse(n,e){const t=determinant(e);assert(t!==0,32);const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*l-o*a)/t,n[5]=-(i*l-r*a)/t,n}function determinant(n){return n[0]*n[3]-n[1]*n[2]}let transformStringDiv;function toString$1(n){const e="matrix("+n.join(", ")+")";if(WORKER_OFFSCREEN_CANVAS)return e;const t=transformStringDiv||(transformStringDiv=document.createElement("div"));return t.style.transform=e,t.style.transform}const canvasPool$1=[];let pixelContext$1=null;function createPixelContext$1(){const n=document.createElement("canvas");n.width=1,n.height=1,pixelContext$1=n.getContext("2d")}class CanvasLayerRenderer extends LayerRenderer$1{constructor(e){super(e);this.container=null,this.renderedResolution,this.tempTransform=create$3(),this.pixelTransform=create$3(),this.inversePixelTransform=create$3(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){pixelContext$1||createPixelContext$1(),pixelContext$1.clearRect(0,0,1,1);let r;try{pixelContext$1.drawImage(e,t,i,1,1,0,0,1,1),r=pixelContext$1.getImageData(0,0,1,1).data}catch{return pixelContext$1=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=createCanvasContext2D();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=getTopLeft(i),s=getTopRight(i),o=getBottomRight(i),a=getBottomLeft(i);apply(t.coordinateToPixelTransform,r),apply(t.coordinateToPixelTransform,s),apply(t.coordinateToPixelTransform,o),apply(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;apply(l,r),apply(l,s),apply(l,o),apply(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new RenderEvent$1(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,t)}getRenderTransform(e,t,i,r,s,o,a){const l=s/2,c=o/2,u=r/t,h=-u,d=-e[0]+a,f=-e[1];return compose(this.tempTransform,l,c,u,h,-i,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var CanvasLayerRenderer$1=CanvasLayerRenderer;function transform2D(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const l=n[a],c=n[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function rotate$1(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let h=0;for(let d=e;d<t;d+=i){const f=n[d]-c,g=n[d+1]-u;o[h++]=c+f*a-g*l,o[h++]=u+f*l+g*a;for(let _=d+2;_<d+i;++_)o[h++]=n[_]}return o&&o.length!=h&&(o.length=h),o}function scale$1(n,e,t,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<t;h+=i){const d=n[h]-l,f=n[h+1]-c;a[u++]=l+r*d,a[u++]=c+s*f;for(let g=h+2;g<h+i;++g)a[u++]=n[g]}return a&&a.length!=u&&(a.length=u),a}function translate(n,e,t,i,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=n[l]+r,o[a++]=n[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=n[c]}return o&&o.length!=a&&(o.length=a),o}function drawTextOnPath(n,e,t,i,r,s,o,a,l,c,u,h){let d=n[e],f=n[e+1],g=0,_=0,m=0,y=0;function E(){g=d,_=f,e+=i,d=n[e],f=n[e+1],y+=m,m=Math.sqrt((d-g)*(d-g)+(f-_)*(f-_))}do E();while(e<t-i&&y+m<s);let T=m===0?0:(s-y)/m;const v=lerp$2(g,d,T),S=lerp$2(_,f,T),$=e-i,b=y,A=s+a*l(c,r,u);for(;e<t-i&&y+m<A;)E();T=m===0?0:(A-y)/m;const O=lerp$2(g,d,T),M=lerp$2(_,f,T);let j;if(h){const P=[v,S,O,M];rotate$1(P,0,4,2,h,P,P),j=P[0]>P[2]}else j=v>O;const z=Math.PI,L=[],N=$+i===e;e=$,m=0,y=b,d=n[e],f=n[e+1];let I;if(N){E(),I=Math.atan2(f-_,d-g),j&&(I+=I>0?-z:z);const P=(O+v)/2,R=(M+S)/2;return L[0]=[P,R,(A-s)/2,I,r],L}r=r.replace(/\n/g," ");for(let P=0,R=r.length;P<R;){E();let D=Math.atan2(f-_,d-g);if(j&&(D+=D>0?-z:z),I!==void 0){let ne=D-I;if(ne+=ne>z?-2*z:ne<-z?2*z:0,Math.abs(ne)>o)return null}I=D;const V=P;let K=0;for(;P<R;++P){const ne=j?R-P-1:P,te=a*l(c,r[ne],u);if(e+i<t&&y+m<s+K+te/2)break;K+=te}if(P===V)continue;const J=j?r.substring(R-V,R-P):r.substring(V,P);T=m===0?0:(s+K/2-y)/m;const F=lerp$2(g,d,T),ee=lerp$2(_,f,T);L.push([F,ee,K/2,D,J]),s+=K}return L}function lineStringLength(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const l=n[a],c=n[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(n){return n[3].declutterBox}const rtlRegEx=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function horizontalTextAlign(n,e){return(e==="start"||e==="end")&&!rtlRegEx.test(n)&&(e=e==="start"?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class Executor{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=create$3(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=Array.isArray(e),d=l.justify?TEXT_ALIGN[l.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,l.textAlign||defaultTextAlign),f=r&&o.lineWidth?o.lineWidth:0,g=h?e:e.split(`
`).reduce(createTextChunks,[]),{width:_,height:m,widths:y,heights:E,lineWidths:T}=getTextDimensions(l,g),v=_+f,S=[],$=(v+2)*u[0],b=(m+f)*u[1],A={width:$<0?Math.floor($):Math.ceil($),height:b<0?Math.floor(b):Math.ceil(b),contextInstructions:S};(u[0]!=1||u[1]!=1)&&S.push("scale",u),r&&(S.push("strokeStyle",o.strokeStyle),S.push("lineWidth",f),S.push("lineCap",o.lineCap),S.push("lineJoin",o.lineJoin),S.push("miterLimit",o.miterLimit),S.push("setLineDash",[o.lineDash]),S.push("lineDashOffset",o.lineDashOffset)),i&&S.push("fillStyle",a.fillStyle),S.push("textBaseline","middle"),S.push("textAlign","center");const O=.5-d;let M=d*v+O*f;const j=[],z=[];let L=0,N=0,I=0,P=0,R;for(let D=0,V=g.length;D<V;D+=2){const K=g[D];if(K===`
`){N+=L,L=0,M=d*v+O*f,++P;continue}const J=g[D+1]||l.font;J!==R&&(r&&j.push("font",J),i&&z.push("font",J),R=J),L=Math.max(L,E[I]);const F=[K,M+O*y[I]+d*(y[I]-T[P]),.5*(f+L)+N];M+=y[I],r&&j.push("strokeText",F),i&&z.push("fillText",F),++I}return Array.prototype.push.apply(S,j),Array.prototype.push.apply(S,z),this.labels_[s]=A,A}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,l,c,u,h,d,f,g,_,m){a*=d[0],l*=d[1];let y=i-a,E=r-l;const T=s+c>e?e-c:s,v=o+u>t?t-u:o,S=g[3]+T*d[0]+g[1],$=g[0]+v*d[1]+g[2],b=y-g[3],A=E-g[0];(_||h!==0)&&(p1[0]=b,p4[0]=b,p1[1]=A,p2[1]=A,p2[0]=b+S,p3[0]=p2[0],p3[1]=A+$,p4[1]=p3[1]);let O;return h!==0?(O=compose(create$3(),i,r,1,1,h,-i,-r),apply(O,p1),apply(O,p2),apply(O,p3),apply(O,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(b,b+S),Math.min(A,A+$),Math.max(b,b+S),Math.max(A,A+$),tmpExtent),f&&(y=Math.round(y),E=Math.round(E)),{drawImageX:y,drawImageY:E,drawImageW:T,drawImageH:v,originX:c,originY:u,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:m},canvasTransform:O,scale:d}}replayImageOrLabel_(e,t,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=e.canvas,h=a?a[2]*r.scale[0]/2:0;return c.minX-h<=u.width/t&&c.maxX+h>=0&&c.minY-h<=u.height/t&&c.maxY+h>=0&&(l&&this.replayTextBackground_(e,p1,p2,p3,p4,o,a),drawImageOrLabel(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=apply(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=horizontalTextAlign(Array.isArray(e)?e[0]:e,s.textAlign||defaultTextAlign),u=TEXT_ALIGN[s.textBaseline||defaultTextBaseline],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=c*d+2*(.5-c)*h,g=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:f,anchorY:g}}execute_(e,t,i,r,s,o,a,l){let c;this.pixelCoordinates_&&equals$2(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=transform2D(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),setFromArray(this.renderedTransform_,i));let u=0;const h=r.length;let d=0,f,g,_,m,y,E,T,v,S,$,b,A,O=0,M=0,j=null,z=null;const L=this.coordinateCache_,N=this.viewRotation_,I=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,P={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},R=this.instructions!=r||this.overlaps?0:200;let D,V,K,J;for(;u<h;){const F=r[u];switch(F[0]){case CanvasInstruction.BEGIN_GEOMETRY:D=F[1],J=F[3],D.getGeometry()?a!==void 0&&!intersects(a,J.getExtent())?u=F[2]+1:++u:u=F[2];break;case CanvasInstruction.BEGIN_PATH:O>R&&(this.fill_(e),O=0),M>R&&(e.stroke(),M=0),!O&&!M&&(e.beginPath(),m=NaN,y=NaN),++u;break;case CanvasInstruction.CIRCLE:d=F[1];const ne=c[d],te=c[d+1],ge=c[d+2],le=c[d+3],se=ge-ne,ie=le-te,ue=Math.sqrt(se*se+ie*ie);e.moveTo(ne+ue,te),e.arc(ne,te,ue,0,2*Math.PI,!0),++u;break;case CanvasInstruction.CLOSE_PATH:e.closePath(),++u;break;case CanvasInstruction.CUSTOM:d=F[1],f=F[2];const fe=F[3],de=F[4],x=F.length==6?F[5]:void 0;P.geometry=fe,P.feature=D,u in L||(L[u]=[]);const C=L[u];x?x(c,d,f,2,C):(C[0]=c[d],C[1]=c[d+1],C.length=2),de(C,P),++u;break;case CanvasInstruction.DRAW_IMAGE:d=F[1],f=F[2],v=F[3],g=F[4],_=F[5];let w=F[6];const k=F[7],G=F[8],W=F[9],Y=F[10];let U=F[11];const X=F[12];let B=F[13];const q=F[14],H=F[15];if(!v&&F.length>=20){S=F[19],$=F[20],b=F[21],A=F[22];const ye=this.drawLabelWithPointPlacement_(S,$,b,A);v=ye.label,F[3]=v;const be=F[23];g=(ye.anchorX-be)*this.pixelRatio,F[4]=g;const xe=F[24];_=(ye.anchorY-xe)*this.pixelRatio,F[5]=_,w=v.height,F[6]=w,B=v.width,F[13]=B}let Z;F.length>25&&(Z=F[25]);let Q,re,ae;F.length>17?(Q=F[16],re=F[17],ae=F[18]):(Q=defaultPadding,re=!1,ae=!1),Y&&I?U+=N:!Y&&!I&&(U-=N);let oe=0;for(;d<f;d+=2){if(Z&&Z[oe++]<B/this.pixelRatio)continue;const ye=this.calculateImageOrLabelDimensions_(v.width,v.height,c[d],c[d+1],B,w,g,_,G,W,U,X,s,Q,re||ae,D),be=[e,t,v,ye,k,re?j:null,ae?z:null];if(l){if(q==="none")continue;if(q==="obstacle"){l.insert(ye.declutterBox);continue}else{let xe,Ce;if(H){const Ee=f-d;if(!H[Ee]){H[Ee]=be;continue}if(xe=H[Ee],delete H[Ee],Ce=getDeclutterBox(xe),l.collides(Ce))continue}if(l.collides(ye.declutterBox))continue;xe&&(l.insert(Ce),this.replayImageOrLabel_.apply(this,xe)),l.insert(ye.declutterBox)}}this.replayImageOrLabel_.apply(this,be)}++u;break;case CanvasInstruction.DRAW_CHARS:const ce=F[1],he=F[2],ve=F[3],Pe=F[4];A=F[5];const Re=F[6],Ie=F[7],pe=F[8];b=F[9];const me=F[10];S=F[11],$=F[12];const we=[F[13],F[13]],Fe=this.textStates[$],Le=Fe.font,Ae=[Fe.scale[0]*Ie,Fe.scale[1]*Ie];let Oe;Le in this.widths_?Oe=this.widths_[Le]:(Oe={},this.widths_[Le]=Oe);const De=lineStringLength(c,ce,he,2),Ne=Math.abs(Ae[0])*measureAndCacheTextWidth(Le,S,Oe);if(Pe||Ne<=De){const ye=this.textStates[$].textAlign,be=(De-Ne)*TEXT_ALIGN[ye],xe=drawTextOnPath(c,ce,he,2,S,be,Re,Math.abs(Ae[0]),measureAndCacheTextWidth,Le,Oe,I?0:this.viewRotation_);e:if(xe){const Ce=[];let Ee,$e,Me,_e,Te;if(b)for(Ee=0,$e=xe.length;Ee<$e;++Ee){Te=xe[Ee],Me=Te[4],_e=this.createLabel(Me,$,"",b),g=Te[2]+(Ae[0]<0?-me:me),_=ve*_e.height+(.5-ve)*2*me*Ae[1]/Ae[0]-pe;const Se=this.calculateImageOrLabelDimensions_(_e.width,_e.height,Te[0],Te[1],_e.width,_e.height,g,_,0,0,Te[3],we,!1,defaultPadding,!1,D);if(l&&l.collides(Se.declutterBox))break e;Ce.push([e,t,_e,Se,1,null,null])}if(A)for(Ee=0,$e=xe.length;Ee<$e;++Ee){Te=xe[Ee],Me=Te[4],_e=this.createLabel(Me,$,A,""),g=Te[2],_=ve*_e.height-pe;const Se=this.calculateImageOrLabelDimensions_(_e.width,_e.height,Te[0],Te[1],_e.width,_e.height,g,_,0,0,Te[3],we,!1,defaultPadding,!1,D);if(l&&l.collides(Se.declutterBox))break e;Ce.push([e,t,_e,Se,1,null,null])}l&&l.load(Ce.map(getDeclutterBox));for(let Se=0,ke=Ce.length;Se<ke;++Se)this.replayImageOrLabel_.apply(this,Ce[Se])}}++u;break;case CanvasInstruction.END_GEOMETRY:if(o!==void 0){D=F[1];const ye=o(D,J);if(ye)return ye}++u;break;case CanvasInstruction.FILL:R?O++:this.fill_(e),++u;break;case CanvasInstruction.MOVE_TO_LINE_TO:for(d=F[1],f=F[2],V=c[d],K=c[d+1],E=V+.5|0,T=K+.5|0,(E!==m||T!==y)&&(e.moveTo(V,K),m=E,y=T),d+=2;d<f;d+=2)V=c[d],K=c[d+1],E=V+.5|0,T=K+.5|0,(d==f-2||E!==m||T!==y)&&(e.lineTo(V,K),m=E,y=T);++u;break;case CanvasInstruction.SET_FILL_STYLE:j=F,this.alignFill_=F[2],O&&(this.fill_(e),O=0,M&&(e.stroke(),M=0)),e.fillStyle=F[1],++u;break;case CanvasInstruction.SET_STROKE_STYLE:z=F,M&&(e.stroke(),M=0),this.setStrokeStyle_(e,F),++u;break;case CanvasInstruction.STROKE:R?M++:e.stroke(),++u;break;default:++u;break}}O&&this.fill_(e),M&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}}var Executor$1=Executor;const ORDER=["Polygon","Circle","LineString","Image","Text","Default"];class ExecutorGroup{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create$3(),this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r){const o=r[s];i[s]=new Executor$1(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){r=Math.round(r);const a=r*2+1,l=compose(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=createCanvasContext2D(a,a));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=createEmpty(),extendCoordinate(h,e),buffer(h,t*(this.renderBuffer_+r),h));const d=getPixelIndexArray(r);let f;function g(S,$){const b=u.getImageData(0,0,a,a).data;for(let A=0,O=d.length;A<O;A++)if(b[d[A]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(S)){const M=(d[A]-3)/4,j=r-M%a,z=r-(M/a|0),L=s(S,$,j*j+z*z);if(L)return L}u.clearRect(0,0,a,a);break}}const _=Object.keys(this.executorsByZIndex_).map(Number);_.sort(numberSafeCompareFunction);let m,y,E,T,v;for(m=_.length-1;m>=0;--m){const S=_[m].toString();for(E=this.executorsByZIndex_[S],y=ORDER.length-1;y>=0;--y)if(f=ORDER[y],T=E[f],T!==void 0&&(v=T.executeHitDetection(u,l,i,g,h),v))return v}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return transform2D(a,0,8,2,e,a),a}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(numberSafeCompareFunction),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||ORDER;let c,u,h,d,f,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const _=l[c].toString();for(f=this.executorsByZIndex_[_],h=0,d=o.length;h<d;++h){const m=o[h];g=f[m],g!==void 0&&g.execute(e,t,i,r,s,a)}}this.maxExtent_&&e.restore()}}const circlePixelIndexArrayCache={};function getPixelIndexArray(n){if(circlePixelIndexArrayCache[n]!==void 0)return circlePixelIndexArrayCache[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+s)*e+(n+o))*4+3),s>0&&l.push(((n-s)*e+(n+o))*4+3),o>0&&(l.push(((n+s)*e+(n-o))*4+3),s>0&&l.push(((n-s)*e+(n-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return circlePixelIndexArrayCache[n]=r,r}var ExecutorGroup$1=ExecutorGroup,ViewHint={ANIMATING:0,INTERACTING:1};const METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Projection{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var Projection$1=Projection;const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$1=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$1,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(t,i){return t/Math.cosh(i[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t){e[r]=HALF_SIZE*n[r]/180;let s=RADIUS$1*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>MAX_SAFE_Y?s=MAX_SAFE_Y:s<-MAX_SAFE_Y&&(s=-MAX_SAFE_Y),e[r+1]=s}return e}function toEPSG4326(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/HALF_SIZE,e[r+1]=360*Math.atan(Math.exp(n[r+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,t){super({code:e,units:"degrees",extent:EXTENT,axisOrientation:t,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache={};function get$2(n){return cache[n]||cache[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$2(n,e){cache[n]=e}let transforms={};function add$1(n,e,t){const i=n.getCode(),r=e.getCode();i in transforms||(transforms[i]={}),transforms[i][r]=t}function get$1(n,e){let t;return n in transforms&&e in transforms[n]&&(t=transforms[n][e]),t}function padNumber(n,e,t){const i=t!==void 0?n.toFixed(t):""+n;let r=i.indexOf(".");return r=r===-1?i.length:r,r>e?i:new Array(1+e-r).join("0")+i}function add(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function degreesToStringHDMS(n,e,t){const i=modulo(e+180,360)-180,r=Math.abs(3600*i),s=t||0;let o=Math.floor(r/3600),a=Math.floor((r-o*3600)/60),l=toFixed(r-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"\xB0";return(a!==0||l!==0)&&(c+=" "+padNumber(a,2)+"\u2032"),l!==0&&(c+=" "+padNumber(l,2,s)+"\u2033"),i!==0&&(c+=" "+n.charAt(i<0?1:0)),c}function equals(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function rotate(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function scale(n,e){return n[0]*=e,n[1]*=e,n}function wrapX$1(n,e){if(e.canWrapX()){const t=getWidth(e.getExtent()),i=getWorldsAway(n,e,t);i&&(n[0]-=i*t)}return n}function getWorldsAway(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||getWidth(i),r=Math.floor((n[0]-i[0])/t)),r}const DEFAULT_RADIUS=63710088e-1;function getDistance(n,e,t){t=t||DEFAULT_RADIUS;const i=toRadians(n[1]),r=toRadians(e[1]),s=(r-i)/2,o=toRadians(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}let showCoordinateWarning=!0;function disableCoordinateWarning(n){showCoordinateWarning=!(n===void 0?!0:n)}function cloneTransform(n,e,t){if(e!==void 0){for(let i=0,r=n.length;i<r;++i)e[i]=n[i];e=e}else e=n.slice();return e}function identityTransform(n,e,t){if(e!==void 0&&n!==e){for(let i=0,r=n.length;i<r;++i)e[i]=n[i];n=e}return n}function addProjection(n){add$2(n.getCode(),n),add$1(n,n,cloneTransform)}function addProjections(n){n.forEach(addProjection)}function get(n){return typeof n=="string"?get$2(n):n||null}function getPointResolution(n,e,t,i){n=get(n);let r;const s=n.getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/METERS_PER_UNIT$1[i])}}else{const o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=getTransformFromProjections(n,get("EPSG:4326"));if(a===identityTransform&&o!=="degrees")r=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const u=getDistance(c.slice(0,2),c.slice(2,4)),h=getDistance(c.slice(4,6),c.slice(6,8));r=(u+h)/2}const l=i?METERS_PER_UNIT$1[i]:n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function addEquivalentProjections(n){addProjections(n),n.forEach(function(e){n.forEach(function(t){e!==t&&add$1(e,t,cloneTransform)})})}function addEquivalentTransforms(n,e,t,i){n.forEach(function(r){e.forEach(function(s){add$1(r,s,t),add$1(s,r,i)})})}function createProjection(n,e){return n?typeof n=="string"?get(n):n:get(e)}function equivalent(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||getTransformFromProjections(n,e)===cloneTransform)&&t}function getTransformFromProjections(n,e){const t=n.getCode(),i=e.getCode();let r=get$1(t,i);return r||(r=identityTransform),r}function getTransform(n,e){const t=get(n),i=get(e);return getTransformFromProjections(t,i)}function transform(n,e,t){return getTransform(e,t)(n,void 0,n.length)}function transformExtent(n,e,t,i){const r=getTransform(e,t);return applyTransform(n,r,void 0,i)}function toUserCoordinate(n,e){return n}function fromUserCoordinate(n,e){return showCoordinateWarning&&!equals(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(showCoordinateWarning=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function toUserExtent(n,e){return n}function fromUserExtent(n,e){return n}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();const tmpTransform$1=create$3();class Geometry extends BaseObject$1{constructor(){super();this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return abstract()}closestPointXY(e,t,i,r){return abstract()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&createOrUpdateEmpty(t),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,t){abstract()}scale(e,t,i){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,t){abstract()}transform(e,t){const i=get(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=getHeight(c)/getHeight(l);return compose(tmpTransform$1,c[0],c[3],u,-u,0,0,0),transform2D(s,0,s.length,a,tmpTransform$1,o),getTransform(i,t)(s,o,a)}:getTransform(i,t);return this.applyTransform(r),this}}var Geometry$1=Geometry;class SimpleGeometry extends Geometry$1{constructor(){super();this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){abstract()}setLayout(e,t,i){let r;if(e)r=getStrideForLayout(e);else{for(let s=0;s<i;++s)if(t.length===0){this.layout="XY",this.stride=2;return}else t=t[0];r=t.length,e=getLayoutForStride(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();rotate$1(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=getCenter(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();scale$1(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();translate(i,0,i.length,r,e,t,i),this.changed()}}}function getLayoutForStride(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function getStrideForLayout(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function transformGeom2D(n,e,t){const i=n.getFlatCoordinates();if(i){const r=n.getStride();return transform2D(i,0,i.length,r,e,t)}else return null}var SimpleGeometry$1=SimpleGeometry;class CanvasImmediateRenderer extends VectorContext$1{constructor(e,t,i,r,s,o,a){super();this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create$3()}drawImages_(e,t,i,r){if(!this.image_)return;const s=transform2D(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=s.length;u<h;u+=2){const d=s[u]-this.imageAnchorX_,f=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,_=f+this.imageAnchorY_;compose(a,g,_,1,1,c,-g,-_),o.setTransform.apply(o,a),o.translate(g,_),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=transform2D(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=transform2D(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(!!intersects(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=transformGeom2D(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!intersects(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(!!intersects(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),equals$2(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:defaultTextAlign;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:asColorLike(i||defaultFillStyle)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),u=s||defaultLineDash;this.strokeState_={lineCap:r!==void 0?r:defaultLineCap,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||defaultLineDashOffset)*this.pixelRatio_,lineJoin:a!==void 0?a:defaultLineJoin,lineWidth:(l!==void 0?l:defaultLineWidth)*this.pixelRatio_,miterLimit:c!==void 0?c:defaultMiterLimit,strokeStyle:asColorLike(i||defaultStrokeStyle)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:asColorLike(f||defaultFillStyle)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const f=i.getColor(),g=i.getLineCap(),_=i.getLineDash(),m=i.getLineDashOffset(),y=i.getLineJoin(),E=i.getWidth(),T=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:defaultLineCap,lineDash:_||defaultLineDash,lineDashOffset:m||defaultLineDashOffset,lineJoin:y!==void 0?y:defaultLineJoin,lineWidth:E!==void 0?E:defaultLineWidth,miterLimit:T!==void 0?T:defaultMiterLimit,strokeStyle:asColorLike(f||defaultStrokeStyle)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:defaultFont,textAlign:h!==void 0?h:defaultTextAlign,textBaseline:d!==void 0?d:defaultTextBaseline},this.text_=u!==void 0?Array.isArray(u)?u.reduce((f,g,_)=>f+=_%2?" ":g,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}var CanvasImmediateRenderer$1=CanvasImmediateRenderer;const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(n,e,t,i,r,s,o){const a=n[0]*HIT_DETECT_RESOLUTION,l=n[1]*HIT_DETECT_RESOLUTION,c=createCanvasContext2D(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,h=new CanvasImmediateRenderer$1(c,HIT_DETECT_RESOLUTION,r,null,o),d=t.length,f=Math.floor((256*256*256-1)/d),g={};for(let m=1;m<=d;++m){const y=t[m-1],E=y.getStyleFunction()||i;if(!i)continue;let T=E(y,s);if(!T)continue;Array.isArray(T)||(T=[T]);const v=m*f,S="#"+("000000"+v.toString(16)).slice(-6);for(let $=0,b=T.length;$<b;++$){const A=T[$],O=A.getGeometryFunction()(y);if(!O||!intersects(r,O.getExtent()))continue;const M=A.clone(),j=M.getFill();j&&j.setColor(S);const z=M.getStroke();z&&(z.setColor(S),z.setLineDash(null)),M.setText(void 0);const L=A.getImage();if(L&&L.getOpacity()!==0){const P=L.getImageSize();if(!P)continue;const R=createCanvasContext2D(P[0],P[1],void 0,{alpha:!1}),D=R.canvas;R.fillStyle=S,R.fillRect(0,0,D.width,D.height),M.setImage(new Icon$1({img:D,imgSize:P,anchor:L.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:L.getOrigin(),opacity:1,size:L.getSize(),scale:L.getScale(),rotation:L.getRotation(),rotateWithView:L.getRotateWithView()}))}const N=M.getZIndex()||0;let I=g[N];I||(I={},g[N]=I,I.Polygon=[],I.Circle=[],I.LineString=[],I.Point=[]),I[O.getType().replace("Multi","")].push(O,M)}}const _=Object.keys(g).map(Number).sort(numberSafeCompareFunction);for(let m=0,y=_.length;m<y;++m){const E=g[_[m]];for(const T in E){const v=E[T];for(let S=0,$=v.length;S<$;S+=2){h.setStyle(v[S+1]);for(let b=0,A=e.length;b<A;++b)h.setTransform(e[b]),h.drawGeometry(v[S])}}}return c.getImageData(0,0,u.width,u.height)}function hitDetect(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*HIT_DETECT_RESOLUTION),s=Math.floor(Math.round(n[1])*HIT_DETECT_RESOLUTION),o=(clamp(r,0,t.width-1)+clamp(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],u=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h==0&&i.push(e[u/h-1])}return i}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(n,e){return parseInt(getUid(n),10)-parseInt(getUid(e),10)}function getSquaredTolerance(n,e){const t=getTolerance(n,e);return t*t}function getTolerance(n,e){return SIMPLIFY_TOLERANCE*n/e}function renderCircleGeometry(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function renderFeature(n,e,t,i,r,s,o){let a=!1;const l=t.getImage();if(l){const c=l.getImageState();c==ImageState.LOADED||c==ImageState.ERROR?l.unlistenImageChange(r):(c==ImageState.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return renderFeatureInternal(n,e,t,i,s,o),a}function renderFeatureInternal(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);t.getRenderer()?renderGeometry(n,a,t,e):GEOMETRY_RENDERERS[a.getType()](n,a,t,e,s)}function renderGeometry(n,e,t,i){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)renderGeometry(n,s[o],t,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function renderGeometryCollectionGeometry(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o)GEOMETRY_RENDERERS[s[o].getType()](n,s[o],t,i,r)}function renderLineStringGeometry(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function renderMultiLineStringGeometry(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function renderMultiPolygonGeometry(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function renderPointGeometry(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=ImageState.LOADED)return;let l=n;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(s,a),h.drawPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function renderMultiPointGeometry(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=ImageState.LOADED)return;let l=n;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(s,a),h.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function renderPolygonGeometry(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer$1{constructor(e){super(e);this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),h=this.getLayer().getSource(),d=t.pixelRatio,f=t.viewHints,g=!(f[ViewHint.ANIMATING]||f[ViewHint.INTERACTING]),_=this.compositionContext_,m=Math.round(t.size[0]*d),y=Math.round(t.size[1]*d),E=h.getWrapX()&&l.canWrapX(),T=E?getWidth(u):null,v=E?Math.ceil((r[2]-u[2])/T)+1:1;let S=E?Math.floor((r[0]-u[0])/T):0;do{const $=this.getRenderTransform(o,a,c,d,m,y,S*T);e.execute(_,1,$,c,g,void 0,i)}while(++S<v)}setupCompositionContext_(){if(this.opacity_!==1){const e=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool$1);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,releaseCanvas$1(this.compositionContext_),canvasPool$1.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];makeScale(this.pixelTransform,1/i,1/i),makeInverse(this.inversePixelTransform,this.pixelTransform);const s=toString$1(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!c||c.isEmpty()))return null;const u=Math.round(e.size[0]*i),h=Math.round(e.size[1]*i);a.width!=u||a.height!=h?(a.width=u,a.height=h,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,u,h),this.preRender(o,e);const d=e.viewState;d.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let f=!1,g=!0;if(r.extent&&this.clipping){const _=fromUserExtent(r.extent);g=intersects(_,e.extent),f=g&&!containsExtent(_,e.extent),f&&this.clipUnrotated(this.compositionContext_,e,_)}return g&&this.renderWorlds(l,e),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];apply(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=i[0]*HIT_DETECT_RESOLUTION,d=i[1]*HIT_DETECT_RESOLUTION;u.push(this.getRenderTransform(r,s,o,HIT_DETECT_RESOLUTION,h,d,0).slice());const f=c.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!containsExtent(g,l)){let _=l[0];const m=getWidth(g);let y=0,E;for(;_<g[0];)--y,E=m*y,u.push(this.getRenderTransform(r,s,o,HIT_DETECT_RESOLUTION,h,d,E).slice()),_+=m;for(y=0,_=l[2];_>g[2];)++y,E=m*y,u.push(this.getRenderTransform(r,s,o,HIT_DETECT_RESOLUTION,h,d,E).slice()),_-=m}this.hitDetectionImageData_=createHitDetectionImageData(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}t(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=function(f,g,_){const m=getUid(f),y=c[m];if(y){if(y!==!0&&_<y.distanceSq){if(_===0)return c[m]=!0,s.splice(s.lastIndexOf(y),1),r(f,l,g);y.geometry=g,y.distanceSq=_}}else{if(_===0)return c[m]=!0,r(f,l,g);s.push(c[m]={feature:f,layer:l,geometry:g,distanceSq:_,callback:r})}};let h;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(f=>h=f.forEachFeatureAtCoordinate(e,o,a,i,u,f===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(g=>g.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[ViewHint.ANIMATING],s=e.viewHints[ViewHint.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,d=e.pixelRatio,f=t.getRevision(),g=t.getRenderBuffer();let _=t.getRenderOrder();_===void 0&&(_=defaultOrder);const m=c.center.slice(),y=buffer(l,g*h),E=y.slice(),T=[y.slice()],v=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!containsExtent(v,e.extent)){const I=getWidth(v),P=Math.max(getWidth(y)/2,I);y[0]=v[0]-P,y[2]=v[2]+P,wrapX$1(m,u);const R=wrapX$2(T[0],u);R[0]<v[0]&&R[2]<v[2]?T.push([R[0]+I,R[1],R[2]+I,R[3]]):R[0]>v[0]&&R[2]>v[2]&&T.push([R[0]-I,R[1],R[2]-I,R[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==_&&containsExtent(this.wrappedRenderedExtent_,y))return equals$2(this.renderedExtent_,E)||(this.hitDetectionImageData_=null,this.renderedExtent_=E),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const S=new CanvasBuilderGroup(getTolerance(h,d),y,h,d);let $;this.getLayer().getDeclutter()&&($=new CanvasBuilderGroup(getTolerance(h,d),y,h,d));let b;for(let I=0,P=T.length;I<P;++I)i.loadFeatures(T[I],h,u);const A=getSquaredTolerance(h,d);let O=!0;const M=function(I){let P;const R=I.getStyleFunction()||t.getStyleFunction();if(R&&(P=R(I,h)),P){const D=this.renderFeature(I,A,P,S,b,$);O=O&&!D}}.bind(this),j=toUserExtent(y),z=i.getFeaturesInExtent(j);_&&z.sort(_);for(let I=0,P=z.length;I<P;++I)M(z[I]);this.renderedFeatures_=z,this.ready=O;const L=S.finish(),N=new ExecutorGroup$1(y,h,d,i.getOverlaps(),L,t.getRenderBuffer());return $&&(this.declutterExecutorGroup=new ExecutorGroup$1(y,h,d,i.getOverlaps(),$.finish(),t.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=_,this.renderedExtent_=E,this.wrappedRenderedExtent_=y,this.renderedCenter_=m,this.renderedProjection_=u,this.replayGroup_=N,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=renderFeature(r,e,i[l],t,this.boundHandleStyleImageChange_,s,o)||a;else a=renderFeature(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}}var CanvasVectorLayerRenderer$1=CanvasVectorLayerRenderer;class VectorLayer extends BaseVectorLayer$1{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer$1(this)}}var VectorLayer$1=VectorLayer,CollectionEventType={ADD:"add",REMOVE:"remove"};const Property$1={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,t,i){super(e);this.element=t,this.index=i}}class Collection extends BaseObject$1{constructor(e,t){super();if(this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$1.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,r,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}updateLength_(){this.set(Property$1.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new AssertionError$1(58)}}var Collection$1=Collection;class GroupEvent extends BaseEvent{constructor(e,t){super(e);this.layer=t}}const Property={LAYERS:"layers"};class LayerGroup extends BaseLayer$1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t);this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Collection$1(i.slice(),{unique:!0}):assert(typeof i.getArray=="function",43):i=new Collection$1(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(unlistenByKey);clear(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new GroupEvent("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&t.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new GroupEvent("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=getUid(t);this.listenerKeys_[i].forEach(unlistenByKey),delete this.listenerKeys_[i],this.dispatchEvent(new GroupEvent("removelayer",t)),this.changed()}getLayers(){return this.get(Property.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new GroupEvent("removelayer",i[r]))}this.set(Property.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=getIntersection(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}var LayerGroup$1=LayerGroup;class MapRenderer extends Disposable$1{constructor(e){super();this.map_=e}dispatchRenderEvent(e,t){abstract()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;compose(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),makeInverse(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,l){let c;const u=t.viewState;function h(v,S,$,b){return s.call(o,S,v?$:null,b)}const d=u.projection,f=wrapX$1(e.slice(),d),g=[[0,0]];if(d.canWrapX()&&r){const v=d.getExtent(),S=getWidth(v);g.push([-S,0],[S,0])}const _=t.layerStatesArray,m=_.length,y=[],E=[];for(let v=0;v<g.length;v++)for(let S=m-1;S>=0;--S){const $=_[S],b=$.layer;if(b.hasRenderer()&&inView($,u)&&a.call(l,b)){const A=b.getRenderer(),O=b.getSource();if(A&&O){const M=O.getWrapX()?f:e,j=h.bind(null,$.managed);E[0]=M[0]+g[v][0],E[1]=M[1]+g[v][1],c=A.forEachFeatureAtCoordinate(E,t,i,j,y)}if(c)return c}}if(y.length===0)return;const T=1/y.length;return y.forEach((v,S)=>v.distanceSq+=S*T),y.sort((v,S)=>v.distanceSq-S.distanceSq),y.some(v=>c=v.callback(v.feature,v.layer,v.geometry)),c}hasFeatureAtCoordinate(e,t,i,r,s,o){return this.forEachFeatureAtCoordinate(e,t,i,r,TRUE,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(n,e){shared.expire()}var MapRenderer$1=MapRenderer;class CompositeMapRenderer extends MapRenderer$1{constructor(e){super(e);this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new RenderEvent$1(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!inView(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const h=c.render(e,s);!h||(h!==s&&(this.children_.push(h),s=h),"getDeclutter"in c&&r.push(c))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(e);replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}}var CompositeMapRenderer$1=CompositeMapRenderer;class MapEvent extends BaseEvent{constructor(e,t,i){super(e);this.map=t,this.frameState=i!==void 0?i:null}}var MapEvent$1=MapEvent;class MapBrowserEvent extends MapEvent$1{constructor(e,t,i,r,s,o){super(e,t,s);this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var MapBrowserEvent$1=MapBrowserEvent,MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class MapBrowserEventHandler extends EventTarget{constructor(e,t){super(e);this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=listen(i,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(i,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let t=new MapBrowserEvent$1(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new MapBrowserEvent$1(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const i=new MapBrowserEvent$1(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==MapBrowserEventType.POINTERUP||t.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==MapBrowserEventType.POINTERDOWN||t.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new MapBrowserEvent$1(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new MapBrowserEvent$1(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.down_={};for(const i in e){const r=e[i];this.down_[i]=typeof r=="function"?VOID:r}if(this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(i,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(i,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new MapBrowserEvent$1(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent$1(MapBrowserEventType.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var MapBrowserEventHandler$1=MapBrowserEventHandler,MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};const DROP=1/0;class PriorityQueue{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=DROP?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&i[c]<i[l]?c:l;t[e]=t[u],i[e]=i[u],e=u}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==DROP?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}var PriorityQueue$1=PriorityQueue,TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class TileQueue extends PriorityQueue$1{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()});this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===TileState.LOADED||i===TileState.ERROR||i===TileState.EMPTY){i!==TileState.ERROR&&t.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0,r,s,o;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===TileState.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}var TileQueue$1=TileQueue;function getTilePriority(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return DROP;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}var ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function createExtent(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,h=a?a[1]:0;let d=n[0]+l/2+u,f=n[2]-l/2+u,g=n[1]+c/2+h,_=n[3]-c/2+h;d>f&&(d=(f+d)/2,f=d),g>_&&(g=(_+g)/2,_=g);let m=clamp(i[0],d,f),y=clamp(i[1],g,_);if(o&&t&&r){const E=30*r;m+=-E*Math.log(1+Math.max(0,d-i[0])/E)+E*Math.log(1+Math.max(0,i[0]-f)/E),y+=-E*Math.log(1+Math.max(0,g-i[1])/E)+E*Math.log(1+Math.max(0,i[1]-_)/E)}return[m,y]}}function none$1(n){return n}function getViewportClampedResolution(n,e,t,i){const r=getWidth(e)/t[0],s=getHeight(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function getSmoothClampedResolution(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),clamp(i,t/2,e*2)}function createSnapToResolutions(n,e,t,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=n[0],c=n[n.length-1],u=t?getViewportClampedResolution(l,t,o,i):l;if(a)return e?getSmoothClampedResolution(r,u,c):clamp(r,c,u);const h=Math.min(u,r),d=Math.floor(linearFindNearest(n,h,s));return n[d]>u&&d<n.length-1?n[d+1]:n[d]}else return}}function createSnapToPower(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const u=r?getViewportClampedResolution(e,r,l,s):e;if(c)return i?getSmoothClampedResolution(o,u,t):clamp(o,t,u);const h=1e-9,d=Math.ceil(Math.log(e/u)/Math.log(n)-h),f=-a*(.5-h)+.5,g=Math.min(u,o),_=Math.floor(Math.log(e/g)/Math.log(n)+f),m=Math.max(d,_),y=e/Math.pow(n,m);return clamp(y,t,u)}else return}}function createMinMaxResolution(n,e,t,i,r){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const c=i?getViewportClampedResolution(n,i,a,r):n;return!t||!l?clamp(s,e,c):getSmoothClampedResolution(s,c,e)}else return}}function disable(n){if(n!==void 0)return 0}function none(n){if(n!==void 0)return n}function createSnapToN(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function createSnapToZero(n){return n=n||toRadians(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=n?0:e}}function easeIn(n){return Math.pow(n,3)}function easeOut(n){return 1-easeIn(1-n)}function inAndOut(n){return 3*n*n-2*n*n*n}function linear(n){return n}function assignClosest(n,e,t,i,r,s,o){const a=n[e],l=n[e+1],c=n[t]-a,u=n[t+1]-l;let h;if(c===0&&u===0)h=e;else{const d=((r-a)*c+(s-l)*u)/(c*c+u*u);if(d>1)h=t;else if(d>0){for(let f=0;f<i;++f)o[f]=lerp$2(n[e+f],n[t+f],d);o.length=i;return}else h=e}for(let d=0;d<i;++d)o[d]=n[h+d];o.length=i}function maxSquaredDelta(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],l=n[e+1],c=squaredDistance(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function arrayMaxSquaredDelta(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=maxSquaredDelta(n,e,a,i,r),e=a}return r}function multiArrayMaxSquaredDelta(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=arrayMaxSquaredDelta(n,e,a,i,r),e=a[a.length-1]}return r}function assignClosestPoint(n,e,t,i,r,s,o,a,l,c,u){if(e==t)return c;let h,d;if(r===0)if(d=squaredDistance(o,a,n[e],n[e+1]),d<c){for(h=0;h<i;++h)l[h]=n[e+h];return l.length=i,d}else return c;u=u||[NaN,NaN];let f=e+i;for(;f<t;)if(assignClosest(n,f-i,f,i,o,a,u),d=squaredDistance(o,a,u[0],u[1]),d<c){for(c=d,h=0;h<i;++h)l[h]=u[h];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(s&&(assignClosest(n,t-i,e,i,o,a,u),d=squaredDistance(o,a,u[0],u[1]),d<c)){for(c=d,h=0;h<i;++h)l[h]=u[h];l.length=i}return c}function assignClosestArrayPoint(n,e,t,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=assignClosestPoint(n,e,f,i,r,s,o,a,l,c,u),e=f}return c}function assignClosestMultiArrayPoint(n,e,t,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=assignClosestArrayPoint(n,e,f,i,r,s,o,a,l,c,u),e=f[f.length-1]}return c}function deflateCoordinate(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function deflateCoordinates(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function deflateCoordinatesArray(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=deflateCoordinates(n,e,t[o],i);r[s++]=l,e=l}return r.length=s,r}function deflateMultiCoordinatesArray(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=deflateCoordinatesArray(n,e,t[o],i,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function linearRing(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function linearRings(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=linearRing(n,e,a,i),e=a}return r}function linearRingss$1(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=linearRings(n,e,a,i),e=a[a.length-1]}return r}class LinearRing extends SimpleGeometry$1{constructor(e,t){super();this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LinearRing(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}var LinearRing$1=LinearRing;class Point extends SimpleGeometry$1{constructor(e,t){super();this.setCoordinates(e,t)}clone(){const e=new Point(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=squaredDistance(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}else return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}}var Point$1=Point;function linearRingContainsExtent(n,e,t,i,r){return!forEachCorner(r,function(o){return!linearRingContainsXY(n,e,t,i,o[0],o[1])})}function linearRingContainsXY(n,e,t,i,r,s){let o=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],u=n[e+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function linearRingsContainsXY(n,e,t,i,r,s){if(t.length===0||!linearRingContainsXY(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(linearRingContainsXY(n,t[o-1],t[o],i,r,s))return!1;return!0}function linearRingssContainsXY(n,e,t,i,r,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(linearRingsContainsXY(n,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}function getInteriorPointOfArray(n,e,t,i,r,s,o){let a,l,c,u,h,d,f;const g=r[s+1],_=[];for(let E=0,T=t.length;E<T;++E){const v=t[E];for(u=n[v-i],d=n[v-i+1],a=e;a<v;a+=i)h=n[a],f=n[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(h-u)+u,_.push(c)),u=h,d=f}let m=NaN,y=-1/0;for(_.sort(numberSafeCompareFunction),u=_[0],a=1,l=_.length;a<l;++a){h=_[a];const E=Math.abs(h-u);E>y&&(c=(u+h)/2,linearRingsContainsXY(n,e,t,i,c,g)&&(m=c,y=E)),u=h}return isNaN(m)&&(m=r[s]),o?(o.push(m,g,y),o):[m,g,y]}function getInteriorPointsOfMultiArray(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=getInteriorPointOfArray(n,e,l,i,r,2*o,s),e=l[l.length-1]}return s}function forEach$1(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function intersectsLineString(n,e,t,i,r){const s=extendFlatCoordinates(createEmpty(),n,e,t,i);return intersects(r,s)?containsExtent(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:forEach$1(n,e,t,i,function(o,a){return intersectsSegment(r,o,a)}):!1}function intersectsLineStringArray(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(intersectsLineString(n,e,t[s],i,r))return!0;e=t[s]}return!1}function intersectsLinearRing(n,e,t,i,r){return!!(intersectsLineString(n,e,t,i,r)||linearRingContainsXY(n,e,t,i,r[0],r[1])||linearRingContainsXY(n,e,t,i,r[0],r[3])||linearRingContainsXY(n,e,t,i,r[2],r[1])||linearRingContainsXY(n,e,t,i,r[2],r[3]))}function intersectsLinearRingArray(n,e,t,i,r){if(!intersectsLinearRing(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(linearRingContainsExtent(n,t[s-1],t[s],i,r)&&!intersectsLineString(n,t[s-1],t[s],i,r))return!1;return!0}function intersectsLinearRingMultiArray(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(intersectsLinearRingArray(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function coordinates(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function linearRingIsClockwise(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function linearRingsAreOriented(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=linearRingIsClockwise(n,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function linearRingssAreOriented(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!linearRingsAreOriented(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function orientLinearRings(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=linearRingIsClockwise(n,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&coordinates(n,e,a,i),e=a}return e}function orientLinearRingsArray(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=orientLinearRings(n,e,t[s],i,r);return e}class Polygon extends SimpleGeometry$1{constructor(e,t,i){super();this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?extend$3(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,inflateCoordinatesArray(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing$1(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new LinearRing$1(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Polygon(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}var Polygon$1=Polygon;function fromExtent(n){const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new Polygon(s,"XY",[s.length])}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject$1{constructor(e){super();this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in ViewProperty)delete t[a];this.setProperties(t,!0);const i=createResolutionConstraint(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=createCenterConstraint(e),s=i.constraint,o=createRotationConstraint(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenter();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=fromUserCoordinate(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=fromUserCoordinate(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===t){i&&animationCallback(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const u=arguments[r],h={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||inAndOut,callback:i};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const d=modulo(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}isNoopAnimation(h)?h.complete=!0:s+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&animationCallback(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const h=l.easing(u);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],_=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=d+h*(g-d),y=f+h*(_-f);this.targetCenter_=[m,y]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?modulo(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&animationCallback(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],rotate(i,e-this.getRotation()),add(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}else return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return toUserExtent(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();assert(t,1);const i=this.getResolution();assert(i!==void 0,2);const r=this.getRotation();return assert(r!==void 0,3),getForViewAndSize(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=getWidth(e)/t[0],r=getHeight(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=calculateCenterOn(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const s=linearFindNearest(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=clamp(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,clamp(e-t,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){assert(!isEmpty(e),25);const r=fromUserExtent(e,this.getProjection());i=fromExtent(r)}else if(e.getType()==="Circle"){const r=fromUserExtent(e.getExtent(),this.getProjection());i=fromExtent(r),i.rotate(this.getRotation(),getCenter(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,d=s.length;h<d;h+=o){const f=s[h]*i-s[h+1]*r,g=s[h]*r+s[h+1]*i;a=Math.min(a,f),l=Math.min(l,g),c=Math.max(c,f),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),d=getCenter(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*h-d[1]*u,g=d[1]*h+d[0]*u,_=this.getConstrainedCenter([f,g],l),m=t.callback?t.callback:VOID;t.duration!==void 0?this.animateInternal({resolution:l,center:_,duration:t.duration,easing:t.easing},m):(this.targetResolution_=l,this.targetCenter_=_,this.applyTargetState_(!1,!0),animationCallback(m,!0))}centerOn(e,t,i){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(calculateCenterOn(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=calculateCenterOn(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&fromUserCoordinate(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=fromUserCoordinate(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(ViewProperty.ROTATION)!==r&&this.set(ViewProperty.ROTATION,r),this.get(ViewProperty.RESOLUTION)!==o&&(this.set(ViewProperty.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),a))&&this.set(ViewProperty.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!equals(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:easeOut,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,t,i){i=i&&fromUserCoordinate(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,t,i)}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function animationCallback(n,e){setTimeout(function(){n(e)},0)}function createCenterConstraint(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return createExtent(n.extent,n.constrainOnlyCenter,t)}const e=createProjection(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,createExtent(t,!1,!1)}return none$1}function createResolutionConstraint(n){let e,t,i;const r=28,s=2;let o=n.minZoom!==void 0?n.minZoom:DEFAULT_MIN_ZOOM,a=n.maxZoom!==void 0?n.maxZoom:r;const l=n.zoomFactor!==void 0?n.zoomFactor:s,c=n.multiWorld!==void 0?n.multiWorld:!1,u=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,h=n.showFullExtent!==void 0?n.showFullExtent:!1,d=createProjection(n.projection,"EPSG:3857"),f=d.getExtent();let g=n.constrainOnlyCenter,_=n.extent;if(!c&&!_&&d.isGlobal()&&(g=!1,_=f),n.resolutions!==void 0){const m=n.resolutions;t=m[o],i=m[a]!==void 0?m[a]:m[m.length-1],n.constrainResolution?e=createSnapToResolutions(m,u,!g&&_,h):e=createMinMaxResolution(t,i,u,!g&&_,h)}else{const y=(f?Math.max(getWidth(f),getHeight(f)):360*METERS_PER_UNIT$1.degrees/d.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(s,DEFAULT_MIN_ZOOM),E=y/Math.pow(s,r-DEFAULT_MIN_ZOOM);t=n.maxResolution,t!==void 0?o=0:t=y/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,a):i=y/Math.pow(l,a):i=E),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),n.constrainResolution?e=createSnapToPower(l,t,i,u,!g&&_,h):e=createMinMaxResolution(t,i,u,!g&&_,h)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function createRotationConstraint(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?createSnapToZero():t===!1?none:typeof t=="number"?createSnapToN(t):none}else return disable}function isNoopAnimation(n){return!(n.sourceCenter&&n.targetCenter&&!equals(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function calculateCenterOn(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}var View$1=View;class Control extends BaseObject$1{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&removeNode(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)unlistenByKey(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var Control$1=Control;class Attribution extends Control$1{constructor(e){e=e||{};super({element:document.createElement("div"),render:e.render,target:e.target});this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t={},i=[];let r=!0;const s=e.layerStatesArray;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(!inView(l,e.viewState))continue;const c=l.layer.getSource();if(!c)continue;const u=c.getAttributions();if(!u)continue;const h=u(e);if(!!h)if(r=r&&c.getAttributionsCollapsible()!==!1,Array.isArray(h))for(let d=0,f=h.length;d<f;++d)h[d]in t||(i.push(h[d]),t[h[d]]=!0);else h in t||(i.push(h),t[h]=!0)}return this.overrideCollapsible_||this.setCollapsible(r),i}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!equals$2(t,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}var Attribution$1=Attribution;class Rotate extends Control$1{constructor(e){e=e||{};super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"\u21E7",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:easeOut}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(CLASS_HIDDEN);!s&&i===0?this.element.classList.add(CLASS_HIDDEN):s&&i!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=r}this.rotation_=i}}var Rotate$1=Rotate;class Zoom extends Control$1{constructor(e){e=e||{};super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(EventType.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-i),!1);const d=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,f=this.element;f.className=d,f.appendChild(u),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:easeOut})):i.setZoom(s)}}}var Zoom$1=Zoom;function defaults$8(n){n=n||{};const e=new Collection$1;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new Zoom$1(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new Rotate$1(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new Attribution$1(n.attributionOptions)),e}var InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject$1{constructor(e){super();this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:linear,center:n.getConstrainedCenter(r)})}}function zoomByDelta(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:easeOut})}var Interaction$1=Interaction;class DoubleClickZoom extends Interaction$1{constructor(e){super();e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==MapBrowserEventType.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();zoomByDelta(a,o,s,this.duration_),i.preventDefault(),t=!0}return!t}}var DoubleClickZoom$1=DoubleClickZoom;class PointerInteraction extends Interaction$1{constructor(e){e=e||{};super(e);e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return[t/e,i/e]}var PointerInteraction$1=PointerInteraction;function all$1(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}const altShiftKeysOnly=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},focusWithTabindex=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?focus(n):!0},always=TRUE,mouseActionButton=function(n){const e=n.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},noModifierKeys=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},shiftKeyOnly=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(n){const e=n.originalEvent;return assert(e!==void 0,56),e.pointerType=="mouse"},primaryAction=function(n){const e=n.originalEvent;return assert(e!==void 0,56),e.isPrimary&&e.button===0};class DragPan extends PointerInteraction$1{constructor(e){super({stopDown:FALSE});e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:all$1(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all$1(focusWithTabindex,t):t,this.noKinetic_=!1}handleDragEvent(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const t=this.targetPointers,i=centroid(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();scale(r,o.getResolution()),rotate(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1}}var DragPan$1=DragPan;class DragRotate extends PointerInteraction$1{constructor(e){e=e||{};super({stopDown:FALSE});this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===disable)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}var DragRotate$1=DragRotate;class RenderBox extends Disposable$1{constructor(e){super();this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Polygon$1([r])}getGeometry(){return this.geometry_}}var RenderBox$1=RenderBox;const DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,t,i){super(e);this.coordinate=t,this.mapBrowserEvent=i}}class DragBox extends PointerInteraction$1{constructor(e){super();this.on,this.once,this.un,e=e||{},this.box_=new RenderBox$1(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:mouseActionButton,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(t?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}var DragBox$1=DragBox;class DragZoom extends DragBox$1{constructor(e){e=e||{};const t=e.condition?e.condition:shiftKeyOnly;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea});this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:easeOut})}}var DragZoom$1=DragZoom,KeyCode={LEFT:37,UP:38,RIGHT:39,DOWN:40};class KeyboardPan extends Interaction$1{constructor(e){super();e=e||{},this.defaultCondition_=function(t){return noModifierKeys(t)&&targetNotEditable(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN){const i=e.originalEvent,r=i.keyCode;if(this.condition_(e)&&(r==KeyCode.DOWN||r==KeyCode.LEFT||r==KeyCode.RIGHT||r==KeyCode.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==KeyCode.DOWN?c=-a:r==KeyCode.LEFT?l=-a:r==KeyCode.RIGHT?l=a:c=a;const u=[l,c];rotate(u,o.getRotation()),pan(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}}var KeyboardPan$1=KeyboardPan;class KeyboardZoom extends Interaction$1{constructor(e){super();e=e||{},this.condition_=e.condition?e.condition:targetNotEditable,this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const i=e.originalEvent,r=i.charCode;if(this.condition_(e)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){const s=e.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_,a=s.getView();zoomByDelta(a,o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}var KeyboardZoom$1=KeyboardZoom;class Kinetic{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var Kinetic$1=Kinetic;class MouseWheelZoom extends Interaction$1{constructor(e){e=e||{};super(e);this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:always;this.condition_=e.onFocusOnly?all$1(focusWithTabindex,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==EventType.WHEEL&&(s=r.deltaY,FIREFOX&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=DEVICE_PIXEL_RATIO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),zoomByDelta(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}var MouseWheelZoom$1=MouseWheelZoom;class PinchRotate extends PointerInteraction$1{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE);super(t);this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const u=s-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=u}this.lastAngle_=s;const o=e.map,a=o.getView();if(a.getConstraints().rotation===disable)return;const l=o.getViewport().getBoundingClientRect(),c=centroid(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=o.getCoordinateFromPixelInternal(c),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}else return!1}}var PinchRotate$1=PinchRotate;class PinchZoom extends PointerInteraction$1{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE);super(t);this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t);const u=l.getViewport().getBoundingClientRect(),h=centroid(this.targetPointers);h[0]-=u.left,h[1]-=u.top,this.anchor_=l.getCoordinateFromPixelInternal(h),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}else return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}else return!1}}var PinchZoom$1=PinchZoom;function defaults$7(n){n=n||{};const e=new Collection$1,t=new Kinetic$1(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new DragRotate$1),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new DoubleClickZoom$1({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new DragPan$1({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new PinchRotate$1),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new PinchZoom$1({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new KeyboardPan$1),e.push(new KeyboardZoom$1({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom$1({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new DragZoom$1({duration:n.zoomDuration})),e}function removeLayerMapProperty(n){if(n instanceof Layer){n.setMapInternal(null);return}n instanceof LayerGroup$1&&n.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(n,e){if(n instanceof Layer){n.setMapInternal(e);return}if(n instanceof LayerGroup$1){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)setLayerMapProperty(t[i],e)}}class Map$1 extends BaseObject$1{constructor(e){super();e=e||{},this.on,this.once,this.un;const t=createOptionsInternal(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create$3(),this.pixelToCoordinateTransform_=create$3(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=t.controls||defaults$8(),this.interactions=t.interactions||defaults$7({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue$1(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof View$1)&&e.view.then(function(r){i.setView(new View$1(r))}),this.controls.addEventListener(CollectionEventType.ADD,function(r){r.element.setMap(this)}.bind(this)),this.controls.addEventListener(CollectionEventType.REMOVE,function(r){r.element.setMap(null)}.bind(this)),this.interactions.addEventListener(CollectionEventType.ADD,function(r){r.element.setMap(this)}.bind(this)),this.interactions.addEventListener(CollectionEventType.REMOVE,function(r){r.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(CollectionEventType.ADD,function(r){this.addOverlayInternal_(r.element)}.bind(this)),this.overlays_.addEventListener(CollectionEventType.REMOVE,function(r){const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}.bind(this)),this.controls.forEach(function(r){r.setMap(this)}.bind(this)),this.interactions.forEach(function(r){r.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:TRUE,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof LayerGroup$1?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:TRUE,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),i="changedTouches"in e?e.changedTouches[0]:e;return[i.clientX-t.left,i.clientY-t.top]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){const e=this.getTarget();return e!==void 0?typeof e=="string"?document.getElementById(e):e:null}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?apply(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Collection$1){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?apply(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return getTilePriority(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new MapBrowserEvent$1(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===PointerEventType.POINTERDOWN||i===EventType.WHEEL||i===EventType.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[ViewHint.ANIMATING]||o[ViewHint.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent$1(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent$1(MapEventType.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,i=this.targetChangeHandlerKeys_.length;t<i;++t)unlistenByKey(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,removeNode(this.viewport_)}const e=this.getTargetElement();if(!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer$1(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler$1(this,this.moveTolerance_);for(const r in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);const t=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[listen(i,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(i,EventType.KEYPRESS,this.handleBrowserEvent,this),listen(t,EventType.RESIZE,this.updateSize,this)]}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&hasArea(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:getForViewAndSize(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:getUid(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=getForViewAndSize(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(s.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent$1(MapEventType.MOVESTART,this,r)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ViewHint.ANIMATING]&&!s.viewHints[ViewHint.INTERACTING]&&!equals$1(s.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent$1(MapEventType.MOVEEND,this,s)),clone(s.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent$1(MapEventType.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new GroupEvent("removelayer",t)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View$1){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View$1);const t=this;e.then(function(i){t.setView(new View$1(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),r=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(r)&&!isNaN(s)&&(t=[r,s],!hasArea(t)&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}}function createOptionsInternal(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new LayerGroup$1({layers:n.layers});t[MapProperty.LAYERGROUP]=i,t[MapProperty.TARGET]=n.target,t[MapProperty.VIEW]=n.view instanceof View$1?n.view:new View$1;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Collection$1(n.controls.slice()):(assert(typeof n.controls.getArray=="function",47),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Collection$1(n.interactions.slice()):(assert(typeof n.interactions.getArray=="function",48),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Collection$1(n.overlays.slice()):(assert(typeof n.overlays.getArray=="function",49),o=n.overlays):o=new Collection$1,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}var Map$2=Map$1;class GeometryCollection extends Geometry$1{constructor(e){super();this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(!!this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(listen(this.geometries_[e],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<closestSquaredDistanceXY(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)extend$1(e,t[i].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(r=!0)}if(r){const s=new GeometryCollection(null);return s.setGeometriesArray(t),s}else return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=getCenter(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}var GeometryCollection$1=GeometryCollection;function interpolatePoint(n,e,t,i,r,s,o){let a,l;const c=(t-e)/i;if(c===1)a=e;else if(c===2)a=e,l=r;else if(c!==0){let u=n[e],h=n[e+1],d=0;const f=[0];for(let m=e+i;m<t;m+=i){const y=n[m],E=n[m+1];d+=Math.sqrt((y-u)*(y-u)+(E-h)*(E-h)),f.push(d),u=y,h=E}const g=r*d,_=binarySearch(f,g);_<0?(l=(g-f[-_-2])/(f[-_-1]-f[-_-2]),a=e+(-_-2)*i):a=e+_*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?n[a+u]:lerp$2(n[a+u],n[a+i+u],l);return s}function lineStringCoordinateAtM(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,l=t/i;for(;a<l;){const d=a+l>>1;r<n[(d+1)*i-1]?l=d:a=d+1}const c=n[a*i-1];if(r==c)return n.slice((a-1)*i,(a-1)*i+i);const u=n[(a+1)*i-1],h=(r-c)/(u-c);o=[];for(let d=0;d<i-1;++d)o.push(lerp$2(n[(a-1)*i+d],n[a*i+d],h));return o.push(r),o}function lineStringsCoordinateAtM(n,e,t,i,r,s,o){if(o)return lineStringCoordinateAtM(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let l=0,c=t.length;l<c;++l){const u=t[l];if(e!=u){if(r<n[e+i-1])return null;if(r<=n[u-1])return lineStringCoordinateAtM(n,e,u,i,r,!1);e=u}}return null}class LineString extends SimpleGeometry$1{constructor(e,t){super();this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?extend$3(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return forEach$1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LineString(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}var LineString$1=LineString;class MultiLineString extends SimpleGeometry$1{constructor(e,t,i){super();if(this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let r=this.getLayout();const s=e,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout()),extend$3(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?extend$3(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString$1(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new LineString$1(e.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=interpolatePoint(t,i,l,s,.5);extend$3(e,c),i=l}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new MultiLineString(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}var MultiLineString$1=MultiLineString;class MultiPoint extends SimpleGeometry$1{constructor(e,t){super();t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?extend$3(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<closestSquaredDistanceXY(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=squaredDistance(e,t,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new Point$1(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i){const o=t[r],a=t[r+1];if(containsXY(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}var MultiPoint$1=MultiPoint;function linearRingss(n,e,t,i){const r=[];let s=createEmpty();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=createOrUpdateFromFlatCoordinates(n,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class MultiPolygon extends SimpleGeometry$1{constructor(e,t,i){super();if(this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let r=this.getLayout();const s=e,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout());const h=o.length,d=u.getEnds();for(let f=0,g=d.length;f<g;++f)d[f]+=h;extend$3(o,u.getFlatCoordinates()),a.push(d)}t=r,e=o,i=a}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;extend$3(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new MultiPolygon(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,inflateMultiCoordinatesArray(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint$1(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new MultiPolygon(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new Polygon$1(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=s;const u=new Polygon$1(t.slice(s,c),e,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}var MultiPolygon$1=MultiPolygon;class Feature extends BaseObject$1{constructor(e){super();if(this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(n){if(typeof n=="function")return n;{let e;return Array.isArray(n)?e=n:(assert(typeof n.getZIndex=="function",41),e=[n]),function(){return e}}}var Feature$1=Feature;const tmpTransform=create$3();class RenderFeature{constructor(e,t,i,r,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=linearRingss(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,this.ends_,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const o=i[r],a=interpolatePoint(e,t,o,2,.5);extend$3(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=getHeight(i)/getHeight(t);compose(tmpTransform,i[0],i[3],r,-r,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}getEnds(){return this.ends_}}RenderFeature.prototype.getEndss=RenderFeature.prototype.getEnds;RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;var RenderFeature$1=RenderFeature,commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(n){if(n.__esModule)return n;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(t){var i=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:function(){return n[t]}})}),e}var colorScale$1={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]};function lerp$1(n,e,t){return n*(1-t)+e*t}var lerp_1=lerp$1,colorScale=colorScale$1,lerp=lerp_1,colormap=createColormap;function createColormap(n){var e,t,i,r,s,o,a,l,c,u,h;if(n||(n={}),l=(n.nshades||72)-1,a=n.format||"hex",o=n.colormap,o||(o="jet"),typeof o=="string"){if(o=o.toLowerCase(),!colorScale[o])throw Error(o+" not a supported colorscale");s=colorScale[o]}else if(Array.isArray(o))s=o.slice();else throw Error("unsupported colormap option",o);if(s.length>l+1)throw new Error(o+" map requires nshades to be at least size "+s.length);Array.isArray(n.alpha)?n.alpha.length!==2?u=[1,1]:u=n.alpha.slice():typeof n.alpha=="number"?u=[n.alpha,n.alpha]:u=[1,1],e=s.map(function(_){return Math.round(_.index*l)}),u[0]=Math.min(Math.max(u[0],0),1),u[1]=Math.min(Math.max(u[1],0),1);var d=s.map(function(_,m){var y=s[m].index,E=s[m].rgb.slice();return E.length===4&&E[3]>=0&&E[3]<=1||(E[3]=u[0]+(u[1]-u[0])*y),E}),c=[];for(h=0;h<e.length-1;++h){r=e[h+1]-e[h],t=d[h],i=d[h+1];for(var f=0;f<r;f++){var g=f/r;c.push([Math.round(lerp(t[0],i[0],g)),Math.round(lerp(t[1],i[1],g)),Math.round(lerp(t[2],i[2],g)),lerp(t[3],i[3],g)])}}return c.push(s[s.length-1].rgb.concat(u[1])),a==="hex"?c=c.map(rgb2hex):a==="rgbaString"?c=c.map(rgbaStr):a==="float"&&(c=c.map(rgb2float)),c}function rgb2float(n){return[n[0]/255,n[1]/255,n[2]/255,n[3]]}function rgb2hex(n){for(var e,t="#",i=0;i<3;++i)e=n[i],e=e.toString(16),t+=("00"+e).substr(e.length);return t}function rgbaStr(n){return"rgba("+n.join(",")+")"}class RBush{constructor(e){this.rbush_=new RBush$2(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[getUid(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[getUid(a)]=l}this.rbush_.load(i)}remove(e){const t=getUid(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[getUid(t)],r=[i.minX,i.minY,i.maxX,i.maxY];equals$1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return createOrUpdate$2(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}var RBush$1=RBush;class Source extends BaseObject$1{constructor(e){super();this.projection=get(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return abstract()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}var Source$1=Source,VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all(n,e){return[[-1/0,-1/0,1/0,1/0]]}let withCredentials=!1;function loadFeaturesXhr(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=withCredentials,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function xhr$1(n,e){return function(t,i,r,s,o){const a=this;loadFeaturesXhr(n,e,t,i,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||VOID)}}class VectorSourceEvent extends BaseEvent{constructor(e,t,i){super(e);this.feature=t,this.features=i}}class VectorSource extends Source$1{constructor(e){e=e||{};super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0});this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,7),this.loader_=xhr$1(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new RBush$1:null,this.loadedExtentsRtree_=new RBush$1,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Collection$1(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=getUid(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[listen(t,EventType.CHANGE,this.handleFeatureChange_,this),listen(t,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(assert(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=getUid(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=getUid(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(VectorEventType.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(CollectionEventType.ADD,function(i){t||(t=!0,this.addFeature(i.element),t=!1)}.bind(this)),e.addEventListener(CollectionEventType.REMOVE,function(i){t||(t=!0,this.removeFeature(i.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=function(r){this.removeFeatureInternal(r)}.bind(this);this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$3(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=wrapAndSliceX(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||TRUE,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const u=c.getGeometry(),h=a;if(a=u.closestPointXY(i,r,o,a),a<h){s=c;const d=Math.sqrt(a);l[0]=i-d,l[1]=r-d,l[2]=i+d,l[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=getUid(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return containsExtent(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,l,t,i,function(u){--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,u))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}.bind(this)),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(equals$1(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=getUid(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=getUid(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(unlistenByKey),delete this.featureChangeKeys_[t];const r=e.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,7),this.url_=e,this.setLoader(xhr$1(e,this.format_))}}var VectorSource$1=VectorSource,axios$2={exports:{}},bind$4=function(e,t){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return e.apply(t,r)}},bind$3=bind$4,toString=Object.prototype.toString;function isArray$4(n){return Array.isArray(n)}function isUndefined(n){return typeof n=="undefined"}function isBuffer$1(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function isArrayBuffer(n){return toString.call(n)==="[object ArrayBuffer]"}function isFormData(n){return toString.call(n)==="[object FormData]"}function isArrayBufferView(n){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&isArrayBuffer(n.buffer),e}function isString$1(n){return typeof n=="string"}function isNumber$1(n){return typeof n=="number"}function isObject(n){return n!==null&&typeof n=="object"}function isPlainObject(n){if(toString.call(n)!=="[object Object]")return!1;var e=Object.getPrototypeOf(n);return e===null||e===Object.prototype}function isDate$1(n){return toString.call(n)==="[object Date]"}function isFile(n){return toString.call(n)==="[object File]"}function isBlob(n){return toString.call(n)==="[object Blob]"}function isFunction(n){return toString.call(n)==="[object Function]"}function isStream(n){return isObject(n)&&isFunction(n.pipe)}function isURLSearchParams(n){return toString.call(n)==="[object URLSearchParams]"}function trim(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(n,e){if(!(n===null||typeof n=="undefined"))if(typeof n!="object"&&(n=[n]),isArray$4(n))for(var t=0,i=n.length;t<i;t++)e.call(null,n[t],t,n);else for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.call(null,n[r],r,n)}function merge$1(){var n={};function e(r,s){isPlainObject(n[s])&&isPlainObject(r)?n[s]=merge$1(n[s],r):isPlainObject(r)?n[s]=merge$1({},r):isArray$4(r)?n[s]=r.slice():n[s]=r}for(var t=0,i=arguments.length;t<i;t++)forEach(arguments[t],e);return n}function extend(n,e,t){return forEach(e,function(r,s){t&&typeof r=="function"?n[s]=bind$3(r,t):n[s]=r}),n}function stripBOM(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}var utils$h={isArray:isArray$4,isArrayBuffer,isBuffer:isBuffer$1,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isObject,isPlainObject,isUndefined,isDate:isDate$1,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge:merge$1,extend,trim,stripBOM},utils$g=utils$h;function encode$1(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function(e,t,i){if(!t)return e;var r;if(i)r=i(t);else if(utils$g.isURLSearchParams(t))r=t.toString();else{var s=[];utils$g.forEach(t,function(l,c){l===null||typeof l=="undefined"||(utils$g.isArray(l)?c=c+"[]":l=[l],utils$g.forEach(l,function(h){utils$g.isDate(h)?h=h.toISOString():utils$g.isObject(h)&&(h=JSON.stringify(h)),s.push(encode$1(c)+"="+encode$1(h))}))}),r=s.join("&")}if(r){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},utils$f=utils$h;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};InterceptorManager$1.prototype.forEach=function(e){utils$f.forEach(this.handlers,function(i){i!==null&&e(i)})};var InterceptorManager_1=InterceptorManager$1,utils$e=utils$h,normalizeHeaderName$1=function(e,t){utils$e.forEach(e,function(r,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[s])})},enhanceError$2=function(e,t,i,r,s){return e.config=t,i&&(e.code=i),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},enhanceError$1=enhanceError$2,createError$2=function(e,t,i,r,s){var o=new Error(e);return enhanceError$1(o,t,i,r,s)},createError$1=createError$2,settle$1=function(e,t,i){var r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):t(createError$1("Request failed with status code "+i.status,i.config,null,i.request,i))},utils$d=utils$h,cookies$1=utils$d.isStandardBrowserEnv()?function(){return{write:function(t,i,r,s,o,a){var l=[];l.push(t+"="+encodeURIComponent(i)),utils$d.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),utils$d.isString(s)&&l.push("path="+s),utils$d.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){var i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},combineURLs$1=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t},utils$c=utils$h,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function(e){var t={},i,r,s;return e&&utils$c.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),i=utils$c.trim(a.substr(0,s)).toLowerCase(),r=utils$c.trim(a.substr(s+1)),i){if(t[i]&&ignoreDuplicateOf.indexOf(i)>=0)return;i==="set-cookie"?t[i]=(t[i]?t[i]:[]).concat([r]):t[i]=t[i]?t[i]+", "+r:r}}),t},utils$b=utils$h,isURLSameOrigin$1=utils$b.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),i;function r(s){var o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=r(window.location.href),function(o){var a=utils$b.isString(o)?r(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function Cancel$3(n){this.message=n}Cancel$3.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$3.prototype.__CANCEL__=!0;var Cancel_1=Cancel$3,utils$a=utils$h,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,defaults$6=defaults_1,Cancel$2=Cancel_1,xhr=function(e){return new Promise(function(i,r){var s=e.data,o=e.headers,a=e.responseType,l;function c(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}utils$a.isFormData(s)&&delete o["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(h+":"+d)}var f=buildFullPath(e.baseURL,e.url);u.open(e.method.toUpperCase(),buildURL$1(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function g(){if(!!u){var m="getAllResponseHeaders"in u?parseHeaders(u.getAllResponseHeaders()):null,y=!a||a==="text"||a==="json"?u.responseText:u.response,E={data:y,status:u.status,statusText:u.statusText,headers:m,config:e,request:u};settle(function(v){i(v),c()},function(v){r(v),c()},E),u=null}}if("onloadend"in u?u.onloadend=g:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(g)},u.onabort=function(){!u||(r(createError("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){r(createError("Network Error",e,null,u)),u=null},u.ontimeout=function(){var y=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",E=e.transitional||defaults$6.transitional;e.timeoutErrorMessage&&(y=e.timeoutErrorMessage),r(createError(y,e,E.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},utils$a.isStandardBrowserEnv()){var _=(e.withCredentials||isURLSameOrigin(f))&&e.xsrfCookieName?cookies.read(e.xsrfCookieName):void 0;_&&(o[e.xsrfHeaderName]=_)}"setRequestHeader"in u&&utils$a.forEach(o,function(y,E){typeof s=="undefined"&&E.toLowerCase()==="content-type"?delete o[E]:u.setRequestHeader(E,y)}),utils$a.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(m){!u||(r(!m||m&&m.type?new Cancel$2("canceled"):m),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),s||(s=null),u.send(s)})},utils$9=utils$h,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(n,e){!utils$9.isUndefined(n)&&utils$9.isUndefined(n["Content-Type"])&&(n["Content-Type"]=e)}function getDefaultAdapter(){var n;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(n=xhr),n}function stringifySafely(n,e,t){if(utils$9.isString(n))try{return(e||JSON.parse)(n),utils$9.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}var defaults$5={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Accept"),normalizeHeaderName(t,"Content-Type"),utils$9.isFormData(e)||utils$9.isArrayBuffer(e)||utils$9.isBuffer(e)||utils$9.isStream(e)||utils$9.isFile(e)||utils$9.isBlob(e)?e:utils$9.isArrayBufferView(e)?e.buffer:utils$9.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils$9.isObject(e)||t&&t["Content-Type"]==="application/json"?(setContentTypeIfUnset(t,"application/json"),stringifySafely(e)):e}],transformResponse:[function(e){var t=this.transitional||defaults$5.transitional,i=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||r&&utils$9.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?enhanceError(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$9.forEach(["delete","get","head"],function(e){defaults$5.headers[e]={}});utils$9.forEach(["post","put","patch"],function(e){defaults$5.headers[e]=utils$9.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$5,utils$8=utils$h,defaults$4=defaults_1,transformData$1=function(e,t,i){var r=this||defaults$4;return utils$8.forEach(i,function(o){e=o.call(r,e,t)}),e},isCancel$1=function(e){return!!(e&&e.__CANCEL__)},utils$7=utils$h,transformData=transformData$1,isCancel=isCancel$1,defaults$3=defaults_1,Cancel$1=Cancel_1;function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Cancel$1("canceled")}var dispatchRequest$1=function(e){throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData.call(e,e.data,e.headers,e.transformRequest),e.headers=utils$7.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils$7.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var t=e.adapter||defaults$3.adapter;return t(e).then(function(r){return throwIfCancellationRequested(e),r.data=transformData.call(e,r.data,r.headers,e.transformResponse),r},function(r){return isCancel(r)||(throwIfCancellationRequested(e),r&&r.response&&(r.response.data=transformData.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},utils$6=utils$h,mergeConfig$2=function(e,t){t=t||{};var i={};function r(u,h){return utils$6.isPlainObject(u)&&utils$6.isPlainObject(h)?utils$6.merge(u,h):utils$6.isPlainObject(h)?utils$6.merge({},h):utils$6.isArray(h)?h.slice():h}function s(u){if(utils$6.isUndefined(t[u])){if(!utils$6.isUndefined(e[u]))return r(void 0,e[u])}else return r(e[u],t[u])}function o(u){if(!utils$6.isUndefined(t[u]))return r(void 0,t[u])}function a(u){if(utils$6.isUndefined(t[u])){if(!utils$6.isUndefined(e[u]))return r(void 0,e[u])}else return r(void 0,t[u])}function l(u){if(u in t)return r(e[u],t[u]);if(u in e)return r(void 0,e[u])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return utils$6.forEach(Object.keys(e).concat(Object.keys(t)),function(h){var d=c[h]||s,f=d(h);utils$6.isUndefined(f)&&d!==l||(i[h]=f)}),i},data={version:"0.25.0"},VERSION=data.version,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(n,e){validators$1[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});var deprecatedWarnings={};validators$1.transitional=function(e,t,i){function r(s,o){return"[Axios v"+VERSION+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return function(s,o,a){if(e===!1)throw new Error(r(o," has been removed"+(t?" in "+t:"")));return t&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function assertOptions(n,e,t){if(typeof n!="object")throw new TypeError("options must be an object");for(var i=Object.keys(n),r=i.length;r-- >0;){var s=i[r],o=e[s];if(o){var a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(t!==!0)throw Error("Unknown option "+s)}}var validator$1={assertOptions,validators:validators$1},utils$5=utils$h,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(n){this.defaults=n,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(e,t){if(typeof e=="string"?(t=t||{},t.url=e):t=e||{},!t.url)throw new Error("Provided config url is not valid");t=mergeConfig$1(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&validator.assertOptions(i,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var r=[],s=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(s=s&&f.synchronous,r.unshift(f.fulfilled,f.rejected))});var o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});var a;if(!s){var l=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(l,r),l=l.concat(o),a=Promise.resolve(t);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=t;r.length;){var u=r.shift(),h=r.shift();try{c=u(c)}catch(d){h(d);break}}try{a=dispatchRequest(c)}catch(d){return Promise.reject(d)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Axios$1.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=mergeConfig$1(this.defaults,e),buildURL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};utils$5.forEach(["delete","get","head","options"],function(e){Axios$1.prototype[e]=function(t,i){return this.request(mergeConfig$1(i||{},{method:e,url:t,data:(i||{}).data}))}});utils$5.forEach(["post","put","patch"],function(e){Axios$1.prototype[e]=function(t,i,r){return this.request(mergeConfig$1(r||{},{method:e,url:t,data:i}))}});var Axios_1=Axios$1,Cancel=Cancel_1;function CancelToken(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(r){e=r});var t=this;this.promise.then(function(i){if(!!t._listeners){var r,s=t._listeners.length;for(r=0;r<s;r++)t._listeners[r](i);t._listeners=null}}),this.promise.then=function(i){var r,s=new Promise(function(o){t.subscribe(o),r=o}).then(i);return s.cancel=function(){t.unsubscribe(r)},s},n(function(r){t.reason||(t.reason=new Cancel(r),e(t.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};CancelToken.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};CancelToken.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};CancelToken.source=function(){var e,t=new CancelToken(function(r){e=r});return{token:t,cancel:e}};var CancelToken_1=CancelToken,spread=function(e){return function(i){return e.apply(null,i)}},utils$4=utils$h,isAxiosError=function(e){return utils$4.isObject(e)&&e.isAxiosError===!0},utils$3=utils$h,bind$2=bind$4,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$2=defaults_1;function createInstance(n){var e=new Axios(n),t=bind$2(Axios.prototype.request,e);return utils$3.extend(t,Axios.prototype,e),utils$3.extend(t,e),t.create=function(r){return createInstance(mergeConfig(n,r))},t}var axios$1=createInstance(defaults$2);axios$1.Axios=Axios;axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.VERSION=data.version;axios$1.all=function(e){return Promise.all(e)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports,dayjs_min={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(commonjsGlobal,function(){var t=1e3,i=6e4,r=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",g="date",_="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},T=function(L,N,I){var P=String(L);return!P||P.length>=N?L:""+Array(N+1-P.length).join(I)+L},v={s:T,z:function(L){var N=-L.utcOffset(),I=Math.abs(N),P=Math.floor(I/60),R=I%60;return(N<=0?"+":"-")+T(P,2,"0")+":"+T(R,2,"0")},m:function L(N,I){if(N.date()<I.date())return-L(I,N);var P=12*(I.year()-N.year())+(I.month()-N.month()),R=N.clone().add(P,h),D=I-R<0,V=N.clone().add(P+(D?-1:1),h);return+(-(P+(I-R)/(D?R-V:V-R))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:h,y:f,w:u,d:c,D:g,h:l,m:a,s:o,ms:s,Q:d}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return L===void 0}},S="en",$={};$[S]=E;var b=function(L){return L instanceof j},A=function(L,N,I){var P;if(!L)return S;if(typeof L=="string")$[L]&&(P=L),N&&($[L]=N,P=L);else{var R=L.name;$[R]=L,P=R}return!I&&P&&(S=P),P||!I&&S},O=function(L,N){if(b(L))return L.clone();var I=typeof N=="object"?N:{};return I.date=L,I.args=arguments,new j(I)},M=v;M.l=A,M.i=b,M.w=function(L,N){return O(L,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var j=function(){function L(I){this.$L=A(I.locale,null,!0),this.parse(I)}var N=L.prototype;return N.parse=function(I){this.$d=function(P){var R=P.date,D=P.utc;if(R===null)return new Date(NaN);if(M.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var V=R.match(m);if(V){var K=V[2]-1||0,J=(V[7]||"0").substring(0,3);return D?new Date(Date.UTC(V[1],K,V[3]||1,V[4]||0,V[5]||0,V[6]||0,J)):new Date(V[1],K,V[3]||1,V[4]||0,V[5]||0,V[6]||0,J)}}return new Date(R)}(I),this.$x=I.x||{},this.init()},N.init=function(){var I=this.$d;this.$y=I.getFullYear(),this.$M=I.getMonth(),this.$D=I.getDate(),this.$W=I.getDay(),this.$H=I.getHours(),this.$m=I.getMinutes(),this.$s=I.getSeconds(),this.$ms=I.getMilliseconds()},N.$utils=function(){return M},N.isValid=function(){return this.$d.toString()!==_},N.isSame=function(I,P){var R=O(I);return this.startOf(P)<=R&&R<=this.endOf(P)},N.isAfter=function(I,P){return O(I)<this.startOf(P)},N.isBefore=function(I,P){return this.endOf(P)<O(I)},N.$g=function(I,P,R){return M.u(I)?this[P]:this.set(R,I)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(I,P){var R=this,D=!!M.u(P)||P,V=M.p(I),K=function(se,ie){var ue=M.w(R.$u?Date.UTC(R.$y,ie,se):new Date(R.$y,ie,se),R);return D?ue:ue.endOf(c)},J=function(se,ie){return M.w(R.toDate()[se].apply(R.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(ie)),R)},F=this.$W,ee=this.$M,ne=this.$D,te="set"+(this.$u?"UTC":"");switch(V){case f:return D?K(1,0):K(31,11);case h:return D?K(1,ee):K(0,ee+1);case u:var ge=this.$locale().weekStart||0,le=(F<ge?F+7:F)-ge;return K(D?ne-le:ne+(6-le),ee);case c:case g:return J(te+"Hours",0);case l:return J(te+"Minutes",1);case a:return J(te+"Seconds",2);case o:return J(te+"Milliseconds",3);default:return this.clone()}},N.endOf=function(I){return this.startOf(I,!1)},N.$set=function(I,P){var R,D=M.p(I),V="set"+(this.$u?"UTC":""),K=(R={},R[c]=V+"Date",R[g]=V+"Date",R[h]=V+"Month",R[f]=V+"FullYear",R[l]=V+"Hours",R[a]=V+"Minutes",R[o]=V+"Seconds",R[s]=V+"Milliseconds",R)[D],J=D===c?this.$D+(P-this.$W):P;if(D===h||D===f){var F=this.clone().set(g,1);F.$d[K](J),F.init(),this.$d=F.set(g,Math.min(this.$D,F.daysInMonth())).$d}else K&&this.$d[K](J);return this.init(),this},N.set=function(I,P){return this.clone().$set(I,P)},N.get=function(I){return this[M.p(I)]()},N.add=function(I,P){var R,D=this;I=Number(I);var V=M.p(P),K=function(ee){var ne=O(D);return M.w(ne.date(ne.date()+Math.round(ee*I)),D)};if(V===h)return this.set(h,this.$M+I);if(V===f)return this.set(f,this.$y+I);if(V===c)return K(1);if(V===u)return K(7);var J=(R={},R[a]=i,R[l]=r,R[o]=t,R)[V]||1,F=this.$d.getTime()+I*J;return M.w(F,this)},N.subtract=function(I,P){return this.add(-1*I,P)},N.format=function(I){var P=this,R=this.$locale();if(!this.isValid())return R.invalidDate||_;var D=I||"YYYY-MM-DDTHH:mm:ssZ",V=M.z(this),K=this.$H,J=this.$m,F=this.$M,ee=R.weekdays,ne=R.months,te=function(ie,ue,fe,de){return ie&&(ie[ue]||ie(P,D))||fe[ue].substr(0,de)},ge=function(ie){return M.s(K%12||12,ie,"0")},le=R.meridiem||function(ie,ue,fe){var de=ie<12?"AM":"PM";return fe?de.toLowerCase():de},se={YY:String(this.$y).slice(-2),YYYY:this.$y,M:F+1,MM:M.s(F+1,2,"0"),MMM:te(R.monthsShort,F,ne,3),MMMM:te(ne,F),D:this.$D,DD:M.s(this.$D,2,"0"),d:String(this.$W),dd:te(R.weekdaysMin,this.$W,ee,2),ddd:te(R.weekdaysShort,this.$W,ee,3),dddd:ee[this.$W],H:String(K),HH:M.s(K,2,"0"),h:ge(1),hh:ge(2),a:le(K,J,!0),A:le(K,J,!1),m:String(J),mm:M.s(J,2,"0"),s:String(this.$s),ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:V};return D.replace(y,function(ie,ue){return ue||se[ie]||V.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(I,P,R){var D,V=M.p(P),K=O(I),J=(K.utcOffset()-this.utcOffset())*i,F=this-K,ee=M.m(this,K);return ee=(D={},D[f]=ee/12,D[h]=ee,D[d]=ee/3,D[u]=(F-J)/6048e5,D[c]=(F-J)/864e5,D[l]=F/r,D[a]=F/i,D[o]=F/t,D)[V]||F,R?ee:M.a(ee)},N.daysInMonth=function(){return this.endOf(h).$D},N.$locale=function(){return $[this.$L]},N.locale=function(I,P){if(!I)return this.$L;var R=this.clone(),D=A(I,P,!0);return D&&(R.$L=D),R},N.clone=function(){return M.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},L}(),z=j.prototype;return O.prototype=z,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",g]].forEach(function(L){z[L[1]]=function(N){return this.$g(N,L[0],L[1])}}),O.extend=function(L,N){return L.$i||(L(N,j,O),L.$i=!0),O},O.locale=A,O.isDayjs=b,O.unix=function(L){return O(1e3*L)},O.en=$[S],O.Ls=$,O.p={},O})})(dayjs_min);var dayjs=dayjs_min.exports,customParseFormat$1={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(commonjsGlobal,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,s=/\d\d?/,o=/\d*[^\s\d-_:/()]+/,a={},l=function(_){return(_=+_)+(_>68?1900:2e3)},c=function(_){return function(m){this[_]=+m}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(_){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var y=m.match(/([+-]|\d\d)/g),E=60*y[1]+(+y[2]||0);return E===0?0:y[0]==="+"?-E:E}(_)}],h=function(_){var m=a[_];return m&&(m.indexOf?m:m.s.concat(m.f))},d=function(_,m){var y,E=a.meridiem;if(E){for(var T=1;T<=24;T+=1)if(_.indexOf(E(T,0,m))>-1){y=T>12;break}}else y=_===(m?"pm":"PM");return y},f={A:[o,function(_){this.afternoon=d(_,!1)}],a:[o,function(_){this.afternoon=d(_,!0)}],S:[/\d/,function(_){this.milliseconds=100*+_}],SS:[r,function(_){this.milliseconds=10*+_}],SSS:[/\d{3}/,function(_){this.milliseconds=+_}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[r,c("day")],Do:[o,function(_){var m=a.ordinal,y=_.match(/\d+/);if(this.day=y[0],m)for(var E=1;E<=31;E+=1)m(E).replace(/\[|\]/g,"")===_&&(this.day=E)}],M:[s,c("month")],MM:[r,c("month")],MMM:[o,function(_){var m=h("months"),y=(h("monthsShort")||m.map(function(E){return E.substr(0,3)})).indexOf(_)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(_){var m=h("months").indexOf(_)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,c("year")],YY:[r,function(_){this.year=l(_)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function g(_){var m,y;m=_,y=a&&a.formats;for(var E=(_=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(O,M,j){var z=j&&j.toUpperCase();return M||y[j]||t[j]||y[z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(L,N,I){return N||I.slice(1)})})).match(i),T=E.length,v=0;v<T;v+=1){var S=E[v],$=f[S],b=$&&$[0],A=$&&$[1];E[v]=A?{regex:b,parser:A}:S.replace(/^\[|\]$/g,"")}return function(O){for(var M={},j=0,z=0;j<T;j+=1){var L=E[j];if(typeof L=="string")z+=L.length;else{var N=L.regex,I=L.parser,P=O.substr(z),R=N.exec(P)[0];I.call(M,R),O=O.replace(R,"")}}return function(D){var V=D.afternoon;if(V!==void 0){var K=D.hours;V?K<12&&(D.hours+=12):K===12&&(D.hours=0),delete D.afternoon}}(M),M}}return function(_,m,y){y.p.customParseFormat=!0,_&&_.parseTwoDigitYear&&(l=_.parseTwoDigitYear);var E=m.prototype,T=E.parse;E.parse=function(v){var S=v.date,$=v.utc,b=v.args;this.$u=$;var A=b[1];if(typeof A=="string"){var O=b[2]===!0,M=b[3]===!0,j=O||M,z=b[2];M&&(z=b[2]),a=this.$locale(),!O&&z&&(a=y.Ls[z]),this.$d=function(P,R,D){try{if(["x","X"].indexOf(R)>-1)return new Date((R==="X"?1e3:1)*P);var V=g(R)(P),K=V.year,J=V.month,F=V.day,ee=V.hours,ne=V.minutes,te=V.seconds,ge=V.milliseconds,le=V.zone,se=new Date,ie=F||(K||J?1:se.getDate()),ue=K||se.getFullYear(),fe=0;K&&!J||(fe=J>0?J-1:se.getMonth());var de=ee||0,x=ne||0,C=te||0,w=ge||0;return le?new Date(Date.UTC(ue,fe,ie,de,x,C,w+60*le.offset*1e3)):D?new Date(Date.UTC(ue,fe,ie,de,x,C,w)):new Date(ue,fe,ie,de,x,C,w)}catch{return new Date("")}}(S,A,$),this.init(),z&&z!==!0&&(this.$L=this.locale(z).$L),j&&S!=this.format(A)&&(this.$d=new Date("")),a={}}else if(A instanceof Array)for(var L=A.length,N=1;N<=L;N+=1){b[1]=A[N-1];var I=y.apply(this,b);if(I.isValid()){this.$d=I.$d,this.$L=I.$L,this.init();break}N===L&&(this.$d=new Date(""))}else T.call(this,v)}}})})(customParseFormat$1);var customParseFormat=customParseFormat$1.exports;class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?get(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=get(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return abstract()}readFeature(e,t){return abstract()}readFeatures(e,t){return abstract()}readGeometry(e,t){return abstract()}readProjection(e){return abstract()}writeFeature(e,t){return abstract()}writeFeatures(e,t){return abstract()}writeGeometry(e,t){return abstract()}}function transformGeometryWithOptions(n,e,t){const i=t?get(t.featureProjection):null,r=t?get(t.dataProjection):null;let s;if(i&&r&&!equivalent(i,r)?s=(e?n.clone():n).transform(e?i:r,e?r:i):s=n,e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===n&&(s=n.clone()),s.applyTransform(a)}return s}class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return abstract()}readFeaturesFromObject(e,t){return abstract()}readGeometry(e,t){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return abstract()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return abstract()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return abstract()}}function getObject(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}else return n!==null?n:null}var JSONFeature$1=JSONFeature;class GeoJSON extends JSONFeature$1{constructor(e){e=e||{};super();this.dataProjection=get(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=readGeometry(i.geometry,t),s=new Feature$1;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a)r.push(this.readFeatureFromObject(o[a],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return readGeometry(e,t)}readProjectionFromObject(e){const t=e.crs;let i;return t?t.type=="name"?i=get(t.properties.name):t.type==="EPSG"?i=get("EPSG:"+t.properties.code):assert(!1,36):i=this.dataProjection,i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=writeGeometry(o,t),delete s[e.getGeometryName()]),isEmpty$1(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return writeGeometry(e,this.adaptOptions(t))}}function readGeometry(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=readPointGeometry(n);break}case"LineString":{t=readLineStringGeometry(n);break}case"Polygon":{t=readPolygonGeometry(n);break}case"MultiPoint":{t=readMultiPointGeometry(n);break}case"MultiLineString":{t=readMultiLineStringGeometry(n);break}case"MultiPolygon":{t=readMultiPolygonGeometry(n);break}case"GeometryCollection":{t=readGeometryCollectionGeometry(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return transformGeometryWithOptions(t,!1,e)}function readGeometryCollectionGeometry(n,e){const t=n.geometries.map(function(i){return readGeometry(i,e)});return new GeometryCollection$1(t)}function readPointGeometry(n){return new Point$1(n.coordinates)}function readLineStringGeometry(n){return new LineString$1(n.coordinates)}function readMultiLineStringGeometry(n){return new MultiLineString$1(n.coordinates)}function readMultiPointGeometry(n){return new MultiPoint$1(n.coordinates)}function readMultiPolygonGeometry(n){return new MultiPolygon$1(n.coordinates)}function readPolygonGeometry(n){return new Polygon$1(n.coordinates)}function writeGeometry(n,e){n=transformGeometryWithOptions(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=writePointGeometry(n);break}case"LineString":{i=writeLineStringGeometry(n);break}case"Polygon":{i=writePolygonGeometry(n,e);break}case"MultiPoint":{i=writeMultiPointGeometry(n);break}case"MultiLineString":{i=writeMultiLineStringGeometry(n);break}case"MultiPolygon":{i=writeMultiPolygonGeometry(n,e);break}case"GeometryCollection":{i=writeGeometryCollectionGeometry(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function writeGeometryCollectionGeometry(n,e){e=Object.assign({},e),delete e.featureProjection;const t=n.getGeometriesArray().map(function(i){return writeGeometry(i,e)});return{type:"GeometryCollection",geometries:t}}function writeLineStringGeometry(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function writeMultiLineStringGeometry(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function writeMultiPointGeometry(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function writeMultiPolygonGeometry(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function writePointGeometry(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function writePolygonGeometry(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}var GeoJSON$1=GeoJSON;class TextFeature extends FeatureFormat{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(getText(e),this.adaptOptions(t))}readFeatureFromText(e,t){return abstract()}readFeatures(e,t){return this.readFeaturesFromText(getText(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return abstract()}readGeometry(e,t){return this.readGeometryFromText(getText(e),this.adaptOptions(t))}readGeometryFromText(e,t){return abstract()}readProjection(e){return this.readProjectionFromText(getText(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return abstract()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return abstract()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return abstract()}}function getText(n){return typeof n=="string"?n:""}var TextFeature$1=TextFeature,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||o.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol!="undefined"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr$1=Object.prototype.toString,funcType="[object Function]",implementation$1=function(e){var t=this;if(typeof t!="function"||toStr$1.call(t)!==funcType)throw new TypeError(ERROR_MESSAGE+t);for(var i=slice.call(arguments,1),r,s=function(){if(this instanceof r){var u=t.apply(this,i.concat(slice.call(arguments)));return Object(u)===u?u:this}else return t.apply(e,i.concat(slice.call(arguments)))},o=Math.max(0,t.length-i.length),a=[],l=0;l<o;l++)a.push("$"+l);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var c=function(){};c.prototype=t.prototype,r.prototype=new c,c.prototype=null}return r},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,bind$1=functionBind,src=bind$1.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError$1=TypeError,getEvalledConstructor=function(n){try{return $Function('"use strict"; return ('+n+").constructor;")()}catch{}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch{$gOPD=null}var throwTypeError=function(){throw new $TypeError$1},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),getProto=Object.getPrototypeOf||function(n){return n.__proto__},needsEval={},TypedArray=typeof Uint8Array=="undefined"?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError=="undefined"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics=="undefined"?undefined$1:Atomics,"%BigInt%":typeof BigInt=="undefined"?undefined$1:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array=="undefined"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map=="undefined"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!hasSymbols?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?undefined$1:Promise,"%Proxy%":typeof Proxy=="undefined"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!hasSymbols?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$1,"%Uint8Array%":typeof Uint8Array=="undefined"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?undefined$1:WeakSet},doEval=function n(e){var t;if(e==="%AsyncFunction%")t=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")t=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var i=n("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=n("%AsyncGenerator%");r&&(t=getProto(r.prototype))}return INTRINSICS[e]=t,t},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$1=src,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var t=$strSlice(e,0,1),i=$strSlice(e,-1);if(t==="%"&&i!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var r=[];return $replace$1(e,rePropName,function(s,o,a,l){r[r.length]=a?$replace$1(l,reEscapeChar,"$1"):o||s}),r},getBaseIntrinsic=function(e,t){var i=e,r;if(hasOwn$1(LEGACY_ALIASES,i)&&(r=LEGACY_ALIASES[i],i="%"+r[0]+"%"),hasOwn$1(INTRINSICS,i)){var s=INTRINSICS[i];if(s===needsEval&&(s=doEval(i)),typeof s=="undefined"&&!t)throw new $TypeError$1("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:s}}throw new $SyntaxError("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,t){if(typeof e!="string"||e.length===0)throw new $TypeError$1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new $TypeError$1('"allowMissing" argument must be a boolean');var i=stringToPath(e),r=i.length>0?i[0]:"",s=getBaseIntrinsic("%"+r+"%",t),o=s.name,a=s.value,l=!1,c=s.alias;c&&(r=c[0],$spliceApply(i,$concat$1([0,1],c)));for(var u=1,h=!0;u<i.length;u+=1){var d=i[u],f=$strSlice(d,0,1),g=$strSlice(d,-1);if((f==='"'||f==="'"||f==="`"||g==='"'||g==="'"||g==="`")&&f!==g)throw new $SyntaxError("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(l=!0),r+="."+d,o="%"+r+"%",hasOwn$1(INTRINSICS,o))a=INTRINSICS[o];else if(a!=null){if(!(d in a)){if(!t)throw new $TypeError$1("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD&&u+1>=i.length){var _=$gOPD(a,d);h=!!_,h&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[d]}else h=hasOwn$1(a,d),a=a[d];h&&!l&&(INTRINSICS[o]=a)}}return a},callBind$1={exports:{}};(function(n){var e=functionBind,t=getIntrinsic,i=t("%Function.prototype.apply%"),r=t("%Function.prototype.call%"),s=t("%Reflect.apply%",!0)||e.call(r,i),o=t("%Object.getOwnPropertyDescriptor%",!0),a=t("%Object.defineProperty%",!0),l=t("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}n.exports=function(h){var d=s(e,r,arguments);if(o&&a){var f=o(d,"length");f.configurable&&a(d,"length",{value:1+l(0,h.length-(arguments.length-1))})}return d};var c=function(){return s(e,i,arguments)};a?a(n.exports,"apply",{value:c}):n.exports.apply=c})(callBind$1);var GetIntrinsic$1=getIntrinsic,callBind=callBind$1.exports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(e,t){var i=GetIntrinsic$1(e,!!t);return typeof i=="function"&&$indexOf(e,".prototype.")>-1?callBind(i):i},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:__viteBrowserExternal}),require$$0=getAugmentedNamespace(__viteBrowserExternal$1),hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols?"object":"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function addNumericSeparator(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||$test.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var i=n<0?-$floor(-n):$floor(n);if(i!==n){var r=String(i),s=$slice.call(e,r.length+1);return $replace.call(r,t,"$&_")+"."+$replace.call($replace.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(e,t,"$&_")}var inspectCustom=require$$0.custom,inspectSymbol=inspectCustom&&isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function n(e,t,i,r){var s=t||{};if(has$3(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=has$3(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return inspectString(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?addNumericSeparator(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?addNumericSeparator(e,c):c}var u=typeof s.depth=="undefined"?5:s.depth;if(typeof i=="undefined"&&(i=0),i>=u&&u>0&&typeof e=="object")return isArray$3(e)?"[Array]":"[Object]";var h=getIndent(s,i);if(typeof r=="undefined")r=[];else if(indexOf(r,e)>=0)return"[Circular]";function d(L,N,I){if(N&&(r=$arrSlice.call(r),r.push(N)),I){var P={depth:s.depth};return has$3(s,"quoteStyle")&&(P.quoteStyle=s.quoteStyle),n(L,P,i+1,r)}return n(L,s,i+1,r)}if(typeof e=="function"){var f=nameOf(e),g=arrObjKeys(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(g.length>0?" { "+$join.call(g,", ")+" }":"")}if(isSymbol(e)){var _=hasShammedSymbols?$replace.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(e);return typeof e=="object"&&!hasShammedSymbols?markBoxed(_):_}if(isElement(e)){for(var m="<"+$toLowerCase.call(String(e.nodeName)),y=e.attributes||[],E=0;E<y.length;E++)m+=" "+y[E].name+"="+wrapQuotes(quote(y[E].value),"double",s);return m+=">",e.childNodes&&e.childNodes.length&&(m+="..."),m+="</"+$toLowerCase.call(String(e.nodeName))+">",m}if(isArray$3(e)){if(e.length===0)return"[]";var T=arrObjKeys(e,d);return h&&!singleLineValues(T)?"["+indentedJoin(T,h)+"]":"[ "+$join.call(T,", ")+" ]"}if(isError(e)){var v=arrObjKeys(e,d);return"cause"in e&&!isEnumerable.call(e,"cause")?"{ ["+String(e)+"] "+$join.call($concat.call("[cause]: "+d(e.cause),v),", ")+" }":v.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$join.call(v,", ")+" }"}if(typeof e=="object"&&o){if(inspectSymbol&&typeof e[inspectSymbol]=="function")return e[inspectSymbol]();if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(isMap(e)){var S=[];return mapForEach.call(e,function(L,N){S.push(d(N,e,!0)+" => "+d(L,e))}),collectionOf("Map",mapSize.call(e),S,h)}if(isSet(e)){var $=[];return setForEach.call(e,function(L){$.push(d(L,e))}),collectionOf("Set",setSize.call(e),$,h)}if(isWeakMap(e))return weakCollectionOf("WeakMap");if(isWeakSet(e))return weakCollectionOf("WeakSet");if(isWeakRef(e))return weakCollectionOf("WeakRef");if(isNumber(e))return markBoxed(d(Number(e)));if(isBigInt(e))return markBoxed(d(bigIntValueOf.call(e)));if(isBoolean(e))return markBoxed(booleanValueOf.call(e));if(isString(e))return markBoxed(d(String(e)));if(!isDate(e)&&!isRegExp$1(e)){var b=arrObjKeys(e,d),A=gPO?gPO(e)===Object.prototype:e instanceof Object||e.constructor===Object,O=e instanceof Object?"":"null prototype",M=!A&&toStringTag&&Object(e)===e&&toStringTag in e?$slice.call(toStr(e),8,-1):O?"Object":"",j=A||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",z=j+(M||O?"["+$join.call($concat.call([],M||[],O||[]),": ")+"] ":"");return b.length===0?z+"{}":h?z+"{"+indentedJoin(b,h)+"}":z+"{ "+$join.call(b,", ")+" }"}return String(e)};function wrapQuotes(n,e,t){var i=(t.quoteStyle||e)==="double"?'"':"'";return i+n+i}function quote(n){return $replace.call(String(n),/"/g,"&quot;")}function isArray$3(n){return toStr(n)==="[object Array]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isDate(n){return toStr(n)==="[object Date]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isRegExp$1(n){return toStr(n)==="[object RegExp]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isError(n){return toStr(n)==="[object Error]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isString(n){return toStr(n)==="[object String]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isNumber(n){return toStr(n)==="[object Number]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isBoolean(n){return toStr(n)==="[object Boolean]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isSymbol(n){if(hasShammedSymbols)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!symToString)return!1;try{return symToString.call(n),!0}catch{}return!1}function isBigInt(n){if(!n||typeof n!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(n),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(n){return n in this};function has$3(n,e){return hasOwn.call(n,e)}function toStr(n){return objectToString.call(n)}function nameOf(n){if(n.name)return n.name;var e=$match.call(functionToString.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}function indexOf(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0,i=n.length;t<i;t++)if(n[t]===e)return t;return-1}function isMap(n){if(!mapSize||!n||typeof n!="object")return!1;try{mapSize.call(n);try{setSize.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function isWeakMap(n){if(!weakMapHas||!n||typeof n!="object")return!1;try{weakMapHas.call(n,weakMapHas);try{weakSetHas.call(n,weakSetHas)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function isWeakRef(n){if(!weakRefDeref||!n||typeof n!="object")return!1;try{return weakRefDeref.call(n),!0}catch{}return!1}function isSet(n){if(!setSize||!n||typeof n!="object")return!1;try{setSize.call(n);try{mapSize.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function isWeakSet(n){if(!weakSetHas||!n||typeof n!="object")return!1;try{weakSetHas.call(n,weakSetHas);try{weakMapHas.call(n,weakMapHas)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function isElement(n){return!n||typeof n!="object"?!1:typeof HTMLElement!="undefined"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function inspectString(n,e){if(n.length>e.maxStringLength){var t=n.length-e.maxStringLength,i="... "+t+" more character"+(t>1?"s":"");return inspectString($slice.call(n,0,e.maxStringLength),e)+i}var r=$replace.call($replace.call(n,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(r,"single",e)}function lowbyte(n){var e=n.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+$toUpperCase.call(e.toString(16))}function markBoxed(n){return"Object("+n+")"}function weakCollectionOf(n){return n+" { ? }"}function collectionOf(n,e,t,i){var r=i?indentedJoin(t,i):$join.call(t,", ");return n+" ("+e+") {"+r+"}"}function singleLineValues(n){for(var e=0;e<n.length;e++)if(indexOf(n[e],`
`)>=0)return!1;return!0}function getIndent(n,e){var t;if(n.indent==="	")t="	";else if(typeof n.indent=="number"&&n.indent>0)t=$join.call(Array(n.indent+1)," ");else return null;return{base:t,prev:$join.call(Array(e+1),t)}}function indentedJoin(n,e){if(n.length===0)return"";var t=`
`+e.prev+e.base;return t+$join.call(n,","+t)+`
`+e.prev}function arrObjKeys(n,e){var t=isArray$3(n),i=[];if(t){i.length=n.length;for(var r=0;r<n.length;r++)i[r]=has$3(n,r)?e(n[r],n):""}var s=typeof gOPS=="function"?gOPS(n):[],o;if(hasShammedSymbols){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in n)!has$3(n,l)||t&&String(Number(l))===l&&l<n.length||hasShammedSymbols&&o["$"+l]instanceof Symbol||($test.call(/[^\w$]/,l)?i.push(e(l,n)+": "+e(n[l],n)):i.push(l+": "+e(n[l],n)));if(typeof gOPS=="function")for(var c=0;c<s.length;c++)isEnumerable.call(n,s[c])&&i.push("["+e(s[c])+"]: "+e(n[s[c]],n));return i}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(n,e){for(var t=n,i;(i=t.next)!==null;t=i)if(i.key===e)return t.next=i.next,i.next=n.next,n.next=i,i},listGet=function(n,e){var t=listGetNode(n,e);return t&&t.value},listSet=function(n,e,t){var i=listGetNode(n,e);i?i.value=t:n.next={key:e,next:n.next,value:t}},listHas=function(n,e){return!!listGetNode(n,e)},sideChannel=function(){var e,t,i,r={assert:function(s){if(!r.has(s))throw new $TypeError("Side channel does not contain "+inspect(s))},get:function(s){if($WeakMap&&s&&(typeof s=="object"||typeof s=="function")){if(e)return $weakMapGet(e,s)}else if($Map){if(t)return $mapGet(t,s)}else if(i)return listGet(i,s)},has:function(s){if($WeakMap&&s&&(typeof s=="object"||typeof s=="function")){if(e)return $weakMapHas(e,s)}else if($Map){if(t)return $mapHas(t,s)}else if(i)return listHas(i,s);return!1},set:function(s,o){$WeakMap&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new $WeakMap),$weakMapSet(e,s,o)):$Map?(t||(t=new $Map),$mapSet(t,s,o)):(i||(i={key:{},next:null}),listSet(i,s,o))}};return r},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(n){return replace.call(n,percentTwenties,"+")},RFC3986:function(n){return String(n)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,hexTable=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),compactQueue=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(isArray$2(i)){for(var r=[],s=0;s<i.length;++s)typeof i[s]!="undefined"&&r.push(i[s]);t.obj[t.prop]=r}}},arrayToObject=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]!="undefined"&&(i[r]=e[r]);return i},merge=function n(e,t,i){if(!t)return e;if(typeof t!="object"){if(isArray$2(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!has$2.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var r=e;return isArray$2(e)&&!isArray$2(t)&&(r=arrayToObject(e,i)),isArray$2(e)&&isArray$2(t)?(t.forEach(function(s,o){if(has$2.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=n(a,s,i):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return has$2.call(s,o)?s[o]=n(s[o],a,i):s[o]=a,s},r)},assign=function(e,t){return Object.keys(t).reduce(function(i,r){return i[r]=t[r],i},e)},decode=function(n,e,t){var i=n.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},encode=function(e,t,i,r,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var c=o.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===formats$2.RFC1738&&(c===40||c===41)){a+=o.charAt(l);continue}if(c<128){a=a+hexTable[c];continue}if(c<2048){a=a+(hexTable[192|c>>6]+hexTable[128|c&63]);continue}if(c<55296||c>=57344){a=a+(hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|o.charCodeAt(l)&1023),a+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|c&63]}return a},compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],r=0;r<t.length;++r)for(var s=t[r],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],u=o[c];typeof u=="object"&&u!==null&&i.indexOf(u)===-1&&(t.push({obj:o,prop:c}),i.push(u))}return compactQueue(t),e},isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},isBuffer=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},combine=function(e,t){return[].concat(e,t)},maybeMap=function(e,t){if(isArray$2(e)){for(var i=[],r=0;r<e.length;r+=1)i.push(t(e[r]));return i}return t(e)},utils$2={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$1=formats$3,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},isArray$1=Array.isArray,split=String.prototype.split,push=Array.prototype.push,pushToArray=function(n,e){push.apply(n,isArray$1(e)?e:[e])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$1={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$1.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(e){return toISO.call(e)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},sentinel={},stringify$1=function n(e,t,i,r,s,o,a,l,c,u,h,d,f,g,_){for(var m=e,y=_,E=0,T=!1;(y=y.get(sentinel))!==void 0&&!T;){var v=y.get(e);if(E+=1,typeof v!="undefined"){if(v===E)throw new RangeError("Cyclic object value");T=!0}typeof y.get(sentinel)=="undefined"&&(E=0)}if(typeof a=="function"?m=a(t,m):m instanceof Date?m=u(m):i==="comma"&&isArray$1(m)&&(m=utils$1.maybeMap(m,function(R){return R instanceof Date?u(R):R})),m===null){if(r)return o&&!f?o(t,defaults$1.encoder,g,"key",h):t;m=""}if(isNonNullishPrimitive(m)||utils$1.isBuffer(m)){if(o){var S=f?t:o(t,defaults$1.encoder,g,"key",h);if(i==="comma"&&f){for(var $=split.call(String(m),","),b="",A=0;A<$.length;++A)b+=(A===0?"":",")+d(o($[A],defaults$1.encoder,g,"value",h));return[d(S)+"="+b]}return[d(S)+"="+d(o(m,defaults$1.encoder,g,"value",h))]}return[d(t)+"="+d(String(m))]}var O=[];if(typeof m=="undefined")return O;var M;if(i==="comma"&&isArray$1(m))M=[{value:m.length>0?m.join(",")||null:void 0}];else if(isArray$1(a))M=a;else{var j=Object.keys(m);M=l?j.sort(l):j}for(var z=0;z<M.length;++z){var L=M[z],N=typeof L=="object"&&typeof L.value!="undefined"?L.value:m[L];if(!(s&&N===null)){var I=isArray$1(m)?typeof i=="function"?i(t,L):t:t+(c?"."+L:"["+L+"]");_.set(e,E);var P=getSideChannel();P.set(sentinel,_),pushToArray(O,n(N,I,i,r,s,o,a,l,c,u,h,d,f,g,P))}}return O},normalizeStringifyOptions=function(e){if(!e)return defaults$1;if(e.encoder!==null&&typeof e.encoder!="undefined"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||defaults$1.charset;if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=formats$1.default;if(typeof e.format!="undefined"){if(!has$1.call(formats$1.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var r=formats$1.formatters[i],s=defaults$1.filter;return(typeof e.filter=="function"||isArray$1(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:typeof e.allowDots=="undefined"?defaults$1.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults$1.charsetSentinel,delimiter:typeof e.delimiter=="undefined"?defaults$1.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:defaults$1.encode,encoder:typeof e.encoder=="function"?e.encoder:defaults$1.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:s,format:i,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:defaults$1.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:defaults$1.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(n,e){var t=n,i=normalizeStringifyOptions(e),r,s;typeof i.filter=="function"?(s=i.filter,t=s("",t)):isArray$1(i.filter)&&(s=i.filter,r=s);var o=[];if(typeof t!="object"||t===null)return"";var a;e&&e.arrayFormat in arrayPrefixGenerators?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=arrayPrefixGenerators[a];r||(r=Object.keys(t)),i.sort&&r.sort(i.sort);for(var c=getSideChannel(),u=0;u<r.length;++u){var h=r[u];i.skipNulls&&t[h]===null||pushToArray(o,stringify$1(t[h],h,l,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var d=o.join(i.delimiter),f=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""},utils=utils$2,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(n){return n.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},parseArrayValue=function(n,e){return n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1?n.split(","):n},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(e,t){var i={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=r.split(t.delimiter,s),a=-1,l,c=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===charsetSentinel?c="utf-8":o[l]===isoSentinel&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var u=o[l],h=u.indexOf("]="),d=h===-1?u.indexOf("="):h+1,f,g;d===-1?(f=t.decoder(u,defaults.decoder,c,"key"),g=t.strictNullHandling?null:""):(f=t.decoder(u.slice(0,d),defaults.decoder,c,"key"),g=utils.maybeMap(parseArrayValue(u.slice(d+1),t),function(_){return t.decoder(_,defaults.decoder,c,"value")})),g&&t.interpretNumericEntities&&c==="iso-8859-1"&&(g=interpretNumericEntities(g)),u.indexOf("[]=")>-1&&(g=isArray(g)?[g]:g),has.call(i,f)?i[f]=utils.combine(i[f],g):i[f]=g}return i},parseObject=function(n,e,t,i){for(var r=i?e:parseArrayValue(e,t),s=n.length-1;s>=0;--s){var o,a=n[s];if(a==="[]"&&t.parseArrays)o=[].concat(r);else{o=t.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(l,10);!t.parseArrays&&l===""?o={0:r}:!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(o=[],o[c]=r):l!=="__proto__"&&(o[l]=r)}r=o}return r},parseKeys=function(e,t,i,r){if(!!e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!i.plainObjects&&has.call(Object.prototype,c)&&!i.allowPrototypes)return;u.push(c)}for(var h=0;i.depth>0&&(l=a.exec(s))!==null&&h<i.depth;){if(h+=1,!i.plainObjects&&has.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+s.slice(l.index)+"]"),parseObject(u,t,i,r)}},normalizeParseOptions=function(e){if(!e)return defaults;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset=="undefined"?defaults.charset:e.charset;return{allowDots:typeof e.allowDots=="undefined"?defaults.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:defaults.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:defaults.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:defaults.comma,decoder:typeof e.decoder=="function"?e.decoder:defaults.decoder,delimiter:typeof e.delimiter=="string"||utils.isRegExp(e.delimiter)?e.delimiter:defaults.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:defaults.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:defaults.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:defaults.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults.strictNullHandling}},parse$1=function(n,e){var t=normalizeParseOptions(e);if(n===""||n===null||typeof n=="undefined")return t.plainObjects?Object.create(null):{};for(var i=typeof n=="string"?parseValues(n,t):n,r=t.plainObjects?Object.create(null):{},s=Object.keys(i),o=0;o<s.length;++o){var a=s[o],l=parseKeys(a,i[a],t,typeof n=="string");r=utils.merge(r,l,t)}return t.allowSparse===!0?r:utils.compact(r)},stringify=stringify_1,parse=parse$1,formats=formats$3,lib={formats,parse,stringify},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(n,e){for(var t=new Array(arguments.length-1),i=0,r=2,s=!0;r<arguments.length;)t[i++]=arguments[r++];return new Promise(function(a,l){t[i]=function(u){if(s)if(s=!1,u)l(u);else{for(var h=new Array(arguments.length-1),d=0;d<h.length;)h[d++]=arguments[d];a.apply(null,h)}};try{n.apply(e||null,t)}catch(c){s&&(s=!1,l(c))}})}var base64$1={};(function(n){var e=n;e.length=function(a){var l=a.length;if(!l)return 0;for(var c=0;--l%4>1&&a.charAt(l)==="=";)++c;return Math.ceil(a.length*3)/4-c};for(var t=new Array(64),i=new Array(123),r=0;r<64;)i[t[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;e.encode=function(a,l,c){for(var u=null,h=[],d=0,f=0,g;l<c;){var _=a[l++];switch(f){case 0:h[d++]=t[_>>2],g=(_&3)<<4,f=1;break;case 1:h[d++]=t[g|_>>4],g=(_&15)<<2,f=2;break;case 2:h[d++]=t[g|_>>6],h[d++]=t[_&63],f=0;break}d>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,h)),d=0)}return f&&(h[d++]=t[g],h[d++]=61,f===1&&(h[d++]=61)),u?(d&&u.push(String.fromCharCode.apply(String,h.slice(0,d))),u.join("")):String.fromCharCode.apply(String,h.slice(0,d))};var s="invalid encoding";e.decode=function(a,l,c){for(var u=c,h=0,d,f=0;f<a.length;){var g=a.charCodeAt(f++);if(g===61&&h>1)break;if((g=i[g])===void 0)throw Error(s);switch(h){case 0:d=g,h=1;break;case 1:l[c++]=d<<2|(g&48)>>4,d=g,h=2;break;case 2:l[c++]=(d&15)<<4|(g&60)>>2,d=g,h=3;break;case 3:l[c++]=(d&3)<<6|g,h=0;break}}if(h===1)throw Error(s);return c-u},e.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this};EventEmitter.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],r=0;r<i.length;)i[r].fn===t?i.splice(r,1):++r;return this};EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,i)}return this};var float=factory(factory);function factory(n){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),i=t[3]===128;function r(l,c,u){e[0]=l,c[u]=t[0],c[u+1]=t[1],c[u+2]=t[2],c[u+3]=t[3]}function s(l,c,u){e[0]=l,c[u]=t[3],c[u+1]=t[2],c[u+2]=t[1],c[u+3]=t[0]}n.writeFloatLE=i?r:s,n.writeFloatBE=i?s:r;function o(l,c){return t[0]=l[c],t[1]=l[c+1],t[2]=l[c+2],t[3]=l[c+3],e[0]}function a(l,c){return t[3]=l[c],t[2]=l[c+1],t[1]=l[c+2],t[0]=l[c+3],e[0]}n.readFloatLE=i?o:a,n.readFloatBE=i?a:o}():function(){function e(i,r,s,o){var a=r<0?1:0;if(a&&(r=-r),r===0)i(1/r>0?0:2147483648,s,o);else if(isNaN(r))i(2143289344,s,o);else if(r>34028234663852886e22)i((a<<31|2139095040)>>>0,s,o);else if(r<11754943508222875e-54)i((a<<31|Math.round(r/1401298464324817e-60))>>>0,s,o);else{var l=Math.floor(Math.log(r)/Math.LN2),c=Math.round(r*Math.pow(2,-l)*8388608)&8388607;i((a<<31|l+127<<23|c)>>>0,s,o)}}n.writeFloatLE=e.bind(null,writeUintLE),n.writeFloatBE=e.bind(null,writeUintBE);function t(i,r,s){var o=i(r,s),a=(o>>31)*2+1,l=o>>>23&255,c=o&8388607;return l===255?c?NaN:a*(1/0):l===0?a*1401298464324817e-60*c:a*Math.pow(2,l-150)*(c+8388608)}n.readFloatLE=t.bind(null,readUintLE),n.readFloatBE=t.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),i=t[7]===128;function r(l,c,u){e[0]=l,c[u]=t[0],c[u+1]=t[1],c[u+2]=t[2],c[u+3]=t[3],c[u+4]=t[4],c[u+5]=t[5],c[u+6]=t[6],c[u+7]=t[7]}function s(l,c,u){e[0]=l,c[u]=t[7],c[u+1]=t[6],c[u+2]=t[5],c[u+3]=t[4],c[u+4]=t[3],c[u+5]=t[2],c[u+6]=t[1],c[u+7]=t[0]}n.writeDoubleLE=i?r:s,n.writeDoubleBE=i?s:r;function o(l,c){return t[0]=l[c],t[1]=l[c+1],t[2]=l[c+2],t[3]=l[c+3],t[4]=l[c+4],t[5]=l[c+5],t[6]=l[c+6],t[7]=l[c+7],e[0]}function a(l,c){return t[7]=l[c],t[6]=l[c+1],t[5]=l[c+2],t[4]=l[c+3],t[3]=l[c+4],t[2]=l[c+5],t[1]=l[c+6],t[0]=l[c+7],e[0]}n.readDoubleLE=i?o:a,n.readDoubleBE=i?a:o}():function(){function e(i,r,s,o,a,l){var c=o<0?1:0;if(c&&(o=-o),o===0)i(0,a,l+r),i(1/o>0?0:2147483648,a,l+s);else if(isNaN(o))i(0,a,l+r),i(2146959360,a,l+s);else if(o>17976931348623157e292)i(0,a,l+r),i((c<<31|2146435072)>>>0,a,l+s);else{var u;if(o<22250738585072014e-324)u=o/5e-324,i(u>>>0,a,l+r),i((c<<31|u/4294967296)>>>0,a,l+s);else{var h=Math.floor(Math.log(o)/Math.LN2);h===1024&&(h=1023),u=o*Math.pow(2,-h),i(u*4503599627370496>>>0,a,l+r),i((c<<31|h+1023<<20|u*1048576&1048575)>>>0,a,l+s)}}}n.writeDoubleLE=e.bind(null,writeUintLE,0,4),n.writeDoubleBE=e.bind(null,writeUintBE,4,0);function t(i,r,s,o,a){var l=i(o,a+r),c=i(o,a+s),u=(c>>31)*2+1,h=c>>>20&2047,d=4294967296*(c&1048575)+l;return h===2047?d?NaN:u*(1/0):h===0?u*5e-324*d:u*Math.pow(2,h-1075)*(d+4503599627370496)}n.readDoubleLE=t.bind(null,readUintLE,0,4),n.readDoubleBE=t.bind(null,readUintBE,4,0)}(),n}function writeUintLE(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}function writeUintBE(n,e,t){e[t]=n>>>24,e[t+1]=n>>>16&255,e[t+2]=n>>>8&255,e[t+3]=n&255}function readUintLE(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0}function readUintBE(n,e){return(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}var utf8$2={};(function(n){var e=n;e.length=function(i){for(var r=0,s=0,o=0;o<i.length;++o)s=i.charCodeAt(o),s<128?r+=1:s<2048?r+=2:(s&64512)==55296&&(i.charCodeAt(o+1)&64512)==56320?(++o,r+=4):r+=3;return r},e.read=function(i,r,s){var o=s-r;if(o<1)return"";for(var a=null,l=[],c=0,u;r<s;)u=i[r++],u<128?l[c++]=u:u>191&&u<224?l[c++]=(u&31)<<6|i[r++]&63:u>239&&u<365?(u=((u&7)<<18|(i[r++]&63)<<12|(i[r++]&63)<<6|i[r++]&63)-65536,l[c++]=55296+(u>>10),l[c++]=56320+(u&1023)):l[c++]=(u&15)<<12|(i[r++]&63)<<6|i[r++]&63,c>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,l)),c=0);return a?(c&&a.push(String.fromCharCode.apply(String,l.slice(0,c))),a.join("")):String.fromCharCode.apply(String,l.slice(0,c))},e.write=function(i,r,s){for(var o=s,a,l,c=0;c<i.length;++c)a=i.charCodeAt(c),a<128?r[s++]=a:a<2048?(r[s++]=a>>6|192,r[s++]=a&63|128):(a&64512)==55296&&((l=i.charCodeAt(c+1))&64512)==56320?(a=65536+((a&1023)<<10)+(l&1023),++c,r[s++]=a>>18|240,r[s++]=a>>12&63|128,r[s++]=a>>6&63|128,r[s++]=a&63|128):(r[s++]=a>>12|224,r[s++]=a>>6&63|128,r[s++]=a&63|128);return s-o}})(utf8$2);var pool_1=pool;function pool(n,e,t){var i=t||8192,r=i>>>1,s=null,o=i;return function(l){if(l<1||l>r)return n(l);o+l>i&&(s=n(i),o=0);var c=e.call(s,o,o+=l);return o&7&&(o=(o|7)+1),c}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(n,e){this.lo=n>>>0,this.hi=e>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function n(e){if(e===0)return zero;var t=e<0;t&&(e=-e);var i=e>>>0,r=(e-i)/4294967296>>>0;return t&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new LongBits$2(i,r)};LongBits$2.from=function n(e){if(typeof e=="number")return LongBits$2.fromNumber(e);if(util$5.isString(e))if(util$5.Long)e=util$5.Long.fromString(e);else return LongBits$2.fromNumber(parseInt(e,10));return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero};LongBits$2.prototype.toNumber=function n(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+i*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function n(e){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function n(e){return e===zeroHash?zero:new LongBits$2((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)};LongBits$2.prototype.toHash=function n(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function n(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};LongBits$2.prototype.zzDecode=function n(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};LongBits$2.prototype.length=function n(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10};(function(n){var e=n;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=longbits,e.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},e.isString=function(s){return typeof s=="string"||s instanceof String},e.isObject=function(s){return s&&typeof s=="object"},e.isset=e.isSet=function(s,o){var a=s[o];return a!=null&&s.hasOwnProperty(o)?typeof a!="object"||(Array.isArray(a)?a.length:Object.keys(a).length)>0:!1},e.Buffer=function(){try{var r=e.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(s){return typeof s=="number"?e.Buffer?e._Buffer_allocUnsafe(s):new e.Array(s):e.Buffer?e._Buffer_from(s):typeof Uint8Array=="undefined"?s:new Uint8Array(s)},e.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(s){return s?e.LongBits.from(s).toHash():e.LongBits.zeroHash},e.longFromHash=function(s,o){var a=e.LongBits.fromHash(s);return e.Long?e.Long.fromBits(a.lo,a.hi,o):a.toNumber(Boolean(o))};function t(r,s,o){for(var a=Object.keys(s),l=0;l<a.length;++l)(r[a[l]]===void 0||!o)&&(r[a[l]]=s[a[l]]);return r}e.merge=t,e.lcFirst=function(s){return s.charAt(0).toLowerCase()+s.substring(1)};function i(r){function s(o,a){if(!(this instanceof s))return new s(o,a);Object.defineProperty(this,"message",{get:function(){return o}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),a&&t(this,a)}return s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),s}e.newError=i,e.ProtocolError=i("ProtocolError"),e.oneOfGetter=function(s){for(var o={},a=0;a<s.length;++a)o[s[a]]=1;return function(){for(var l=Object.keys(this),c=l.length-1;c>-1;--c)if(o[l[c]]===1&&this[l[c]]!==void 0&&this[l[c]]!==null)return l[c]}},e.oneOfSetter=function(s){return function(o){for(var a=0;a<s.length;++a)s[a]!==o&&delete this[s[a]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var r=e.Buffer;if(!r){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=r.from!==Uint8Array.from&&r.from||function(o,a){return new r(o,a)},e._Buffer_allocUnsafe=r.allocUnsafe||function(o){return new r(o)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(n,e,t){this.fn=n,this.len=e,this.next=void 0,this.val=t}function noop(){}function State(n){this.head=n.head,this.tail=n.tail,this.len=n.len,this.next=n.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$2=function n(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function n(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function n(e,t,i){return this.tail=this.tail.next=new Op(e,t,i),this.len+=t,this};function writeByte(n,e,t){e[t]=n&255}function writeVarint32(n,e,t){for(;n>127;)e[t++]=n&127|128,n>>>=7;e[t]=n}function VarintOp(n,e){this.len=n,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function n(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function n(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function n(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(n,e,t){for(;n.hi;)e[t++]=n.lo&127|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)e[t++]=n.lo&127|128,n.lo=n.lo>>>7;e[t++]=n.lo}Writer$1.prototype.uint64=function n(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function n(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.bool=function n(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}Writer$1.prototype.fixed32=function n(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function n(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function n(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function n(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function n(e,t,i){t.set(e,i)}:function n(e,t,i){for(var r=0;r<e.length;++r)t[i+r]=e[r]};Writer$1.prototype.bytes=function n(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var i=Writer$1.alloc(t=base64.length(e));base64.decode(e,i,0),e=i}return this.uint32(t)._push(writeBytes,t,e)};Writer$1.prototype.string=function n(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function n(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function n(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function n(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this};Writer$1.prototype.finish=function n(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t};Writer$1._configure=function(n){BufferWriter$1=n,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var r=0;r<e.length;)t[i++]=e[r++]}};BufferWriter.prototype.bytes=function n(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this};function writeStringBuffer(n,e,t){n.length<40?util$3.utf8.write(n,e,t):e.utf8Write?e.utf8Write(n,t):e.write(n,t)}BufferWriter.prototype.string=function n(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(n,e){return RangeError("index out of range: "+n.pos+" + "+(e||1)+" > "+n.len)}function Reader$1(n){this.buf=n,this.pos=0,this.len=n.length}var create_array=typeof Uint8Array!="undefined"?function n(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function n(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$1=function n(){return util$2.Buffer?function(t){return(Reader$1.create=function(r){return util$2.Buffer.isBuffer(r)?new BufferReader$1(r):create_array(r)})(t)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function n(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function n(){return this.uint32()|0};Reader$1.prototype.sint32=function n(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var n=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n;if(n.lo=(n.lo|(this.buf[this.pos]&127)<<28)>>>0,n.hi=(n.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return n;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n}return n.lo=(n.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,n}if(this.len-this.pos>4){for(;e<5;++e)if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function n(){return this.uint32()!==0};function readFixed32_end(n,e){return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function n(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function n(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)};Reader$1.prototype.string=function n(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function n(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(n){switch(n){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(n=this.uint32()&7)!=4;)this.skipType(n);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+n+" at offset "+this.pos)}return this};Reader$1._configure=function(n){BufferReader$1=n,Reader$1.create=create$1(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(n){Reader.call(this,n)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function n(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(n,e,t){if(typeof n!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=n,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Service.prototype.rpcCall=function n(e,t,i,r,s){if(!r)throw TypeError("request must be specified");var o=this;if(!s)return util.asPromise(n,o,e,t,i,r);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(l,c){if(l)return o.emit("error",l,e),s(l);if(c===null){o.end(!0);return}if(!(c instanceof i))try{c=i[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(u){return o.emit("error",u,e),s(u)}return o.emit("data",c,e),s(null,c)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};Service.prototype.end=function n(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(n){var e=n;e.Service=service})(rpc);var roots={};(function(n){var e=n;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=minimal$1,e.rpc=rpc,e.roots=roots,e.configure=t;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}t()})(indexMinimal);var minimal=indexMinimal;class BaseImageLayer extends Layer{constructor(e){e=e||{};super(e)}}var BaseImageLayer$1=BaseImageLayer;class CanvasImageLayerRenderer extends CanvasLayerRenderer$1{constructor(e){super(e);this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,s=r.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=getIntersection(l,fromUserExtent(t.extent,r.projection))),!a[ViewHint.ANIMATING]&&!a[ViewHint.INTERACTING]&&!isEmpty(l))if(o){const c=r.projection,u=o.getImage(l,s,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===ImageState.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=apply(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!containsCoordinate(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=getWidth(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=getHeight(o),h=Math.floor(a.height*((o[3]-r[1])/u));return h<0||h>=a.height?null:this.getImageData(a,c,h)}renderFrame(e,t){const i=this.image_,r=i.getExtent(),s=i.getResolution(),o=i.getPixelRatio(),a=e.layerStatesArray[e.layerIndex],l=e.pixelRatio,c=e.viewState,u=c.center,h=c.resolution,d=l*s/(h*o),f=e.extent,g=c.resolution,_=c.rotation,m=Math.round(getWidth(f)/g*l),y=Math.round(getHeight(f)/g*l);compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,_,-m/2,-y/2),makeInverse(this.inversePixelTransform,this.pixelTransform);const E=toString$1(this.pixelTransform);this.useContainer(t,E,this.getBackground(e));const T=this.context,v=T.canvas;v.width!=m||v.height!=y?(v.width=m,v.height=y):this.containerReused||T.clearRect(0,0,m,y);let S=!1,$=!0;if(a.extent){const j=fromUserExtent(a.extent,c.projection);$=intersects(j,e.extent),S=$&&!containsExtent(j,e.extent),S&&this.clipUnrotated(T,e,j)}const b=i.getImage(),A=compose(this.tempTransform,m/2,y/2,d,d,0,o*(r[0]-u[0])/s,o*(u[1]-r[3])/s);this.renderedResolution=s*l/o;const O=b.width*A[0],M=b.height*A[3];if(this.getLayer().getSource().getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,e),$&&O>=.5&&M>=.5){const j=A[4],z=A[5],L=a.opacity;let N;L!==1&&(N=T.globalAlpha,T.globalAlpha=L),T.drawImage(b,0,0,+b.width,+b.height,j,z,O,M),L!==1&&(T.globalAlpha=N)}return this.postRender(T,e),S&&T.restore(),T.imageSmoothingEnabled=!0,E!==v.style.transform&&(v.style.transform=E),this.container}}var CanvasImageLayerRenderer$1=CanvasImageLayerRenderer;class ImageLayer extends BaseImageLayer$1{constructor(e){super(e)}createRenderer(){return new CanvasImageLayerRenderer$1(this)}getData(e){return super.getData(e)}}var ImageLayer$1=ImageLayer;const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(E){const T=E[0]+"/"+E[1];return a[T]||(a[T]=l(E)),a[T]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&getWidth(r)==getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const c=getTopLeft(i),u=getTopRight(i),h=getBottomRight(i),d=getBottomLeft(i),f=this.transformInv_(c),g=this.transformInv_(u),_=this.transformInv_(h),m=this.transformInv_(d),y=MAX_SUBDIVISION+(o?Math.max(0,Math.ceil(Math.log2(getArea(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,h,d,f,g,_,m,y),this.wrapsXInSource_){let E=1/0;this.triangles_.forEach(function(T,v,S){E=Math.min(E,T.source[0][0],T.source[1][0],T.source[2][0])}),this.triangles_.forEach(function(T){if(Math.max(T.source[0][0],T.source[1][0],T.source[2][0])-E>this.sourceWorldWidth_/2){const v=[[T.source[0][0],T.source[0][1]],[T.source[1][0],T.source[1][1]],[T.source[2][0],T.source[2][1]]];v[0][0]-E>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-E>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-E>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const S=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-S<this.sourceWorldWidth_/2&&(T.source=v)}}.bind(this))}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,l,c){const u=boundingExtent([s,o,a,l]),h=this.sourceWorldWidth_?getWidth(u)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=boundingExtent([e,t,i,r]);g=getWidth(m)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||g}!f&&this.sourceProj_.isGlobal()&&h&&(g=h>MAX_TRIANGLE_WIDTH||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!intersects(u,this.maxSourceExtent_))return;let _=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(_=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),_!=1&&_!=2&&_!=4&&_!=8)return}if(c>0){if(!g){const m=[(e[0]+i[0])/2,(e[1]+i[1])/2],y=this.transformInv_(m);let E;f?E=(modulo(s[0],d)+modulo(a[0],d))/2-modulo(y[0],d):E=(s[0]+a[0])/2-y[0];const T=(s[1]+a[1])/2-y[1];g=E*E+T*T>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const m=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.transformInv_(m),E=[(r[0]+e[0])/2,(r[1]+e[1])/2],T=this.transformInv_(E);this.addQuad_(e,t,m,E,s,o,y,T,c-1),this.addQuad_(E,m,i,r,T,y,a,l,c-1)}else{const m=[(e[0]+t[0])/2,(e[1]+t[1])/2],y=this.transformInv_(m),E=[(i[0]+r[0])/2,(i[1]+r[1])/2],T=this.transformInv_(E);this.addQuad_(e,m,E,r,s,y,T,l,c-1),this.addQuad_(m,t,i,E,y,o,a,T,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(_&11)==0&&this.addTriangle_(e,i,r,s,a,l),(_&14)==0&&this.addTriangle_(e,i,t,s,a,o),_&&((_&13)==0&&this.addTriangle_(t,r,e,o,l,s),(_&7)==0&&this.addTriangle_(t,r,i,o,l,a))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(t,i,r){const s=t.source;extendCoordinate(e,s[0]),extendCoordinate(e,s[1]),extendCoordinate(e,s[2])}),e}getTriangles(){return this.triangles_}}var Triangulation$1=Triangulation;let brokenDiagonalRendering_;const canvasPool=[];function drawTestTriangle(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function verifyBrokenDiagonalRendering(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(n,4,5,4,0),drawTestTriangle(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8)}return brokenDiagonalRendering_}function calculateSourceResolution(n,e,t,i){const r=transform(t,e,n);let s=getPointResolution(e,i,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=n.getMetersPerUnit();a!==void 0&&(s/=a);const l=n.getExtent();if(!l||containsCoordinate(l,r)){const c=getPointResolution(n,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function calculateSourceExtentResolution(n,e,t,i){const r=getCenter(t);let s=calculateSourceResolution(n,e,r,i);return(!isFinite(s)||s<=0)&&forEachCorner(t,function(o){return s=calculateSourceResolution(n,e,o,i),isFinite(s)&&s>0}),s}function render(n,e,t,i,r,s,o,a,l,c,u,h){const d=createCanvasContext2D(Math.round(t*n),Math.round(t*e),canvasPool);if(h||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(t,t);function f(v){return Math.round(v*t)/t}d.globalCompositeOperation="lighter";const g=createEmpty();l.forEach(function(v,S,$){extend$1(g,v.extent)});const _=getWidth(g),m=getHeight(g),y=createCanvasContext2D(Math.round(t*_/i),Math.round(t*m/i));h||(y.imageSmoothingEnabled=!1);const E=t/i;l.forEach(function(v,S,$){const b=v.extent[0]-g[0],A=-(v.extent[3]-g[3]),O=getWidth(v.extent),M=getHeight(v.extent);v.image.width>0&&v.image.height>0&&y.drawImage(v.image,c,c,v.image.width-2*c,v.image.height-2*c,b*E,A*E,O*E,M*E)});const T=getTopLeft(o);return a.getTriangles().forEach(function(v,S,$){const b=v.source,A=v.target;let O=b[0][0],M=b[0][1],j=b[1][0],z=b[1][1],L=b[2][0],N=b[2][1];const I=f((A[0][0]-T[0])/s),P=f(-(A[0][1]-T[1])/s),R=f((A[1][0]-T[0])/s),D=f(-(A[1][1]-T[1])/s),V=f((A[2][0]-T[0])/s),K=f(-(A[2][1]-T[1])/s),J=O,F=M;O=0,M=0,j-=J,z-=F,L-=J,N-=F;const ee=[[j,z,0,0,R-I],[L,N,0,0,V-I],[0,0,j,z,D-P],[0,0,L,N,K-P]],ne=solveLinearSystem(ee);if(!!ne){if(d.save(),d.beginPath(),isBrokenDiagonalRendering()||!h){d.moveTo(R,D);const te=4,ge=I-R,le=P-D;for(let se=0;se<te;se++)d.lineTo(R+f((se+1)*ge/te),D+f(se*le/(te-1))),se!=te-1&&d.lineTo(R+f((se+1)*ge/te),D+f((se+1)*le/(te-1)));d.lineTo(V,K)}else d.moveTo(R,D),d.lineTo(I,P),d.lineTo(V,K);d.clip(),d.transform(ne[0],ne[2],ne[1],ne[3],I,P),d.translate(g[0]-J,g[3]-F),d.scale(i/t,-i/t),d.drawImage(y.canvas,0,0),d.restore()}}),u&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(v,S,$){const b=v.target,A=(b[0][0]-T[0])/s,O=-(b[0][1]-T[1])/s,M=(b[1][0]-T[0])/s,j=-(b[1][1]-T[1])/s,z=(b[2][0]-T[0])/s,L=-(b[2][1]-T[1])/s;d.beginPath(),d.moveTo(M,j),d.lineTo(A,O),d.lineTo(z,L),d.closePath(),d.stroke()}),d.restore()),d.canvas}class ReprojImage extends ImageBase$1{constructor(e,t,i,r,s,o,a){const l=e.getExtent(),c=t.getExtent(),u=c?getIntersection(i,c):i,h=getCenter(u),d=calculateSourceResolution(e,t,h,r),f=ERROR_THRESHOLD,g=new Triangulation$1(e,t,u,l,d*f,r),_=g.calculateSourceExtent(),m=o(_,d,s),y=m?ImageState.IDLE:ImageState.EMPTY,E=m?m.getPixelRatio():1;super(i,r,E,y);this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=g,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=m,this.sourcePixelRatio_=E,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ImageState.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ImageState.LOADED){const t=getWidth(this.targetExtent_)/this.targetResolution_,i=getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=render(t,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=e,this.changed()}load(){if(this.state==ImageState.IDLE){this.state=ImageState.LOADING,this.changed();const e=this.sourceImage_.getState();e==ImageState.LOADED||e==ImageState.ERROR?this.reproject_():(this.sourceListenerKey_=listen(this.sourceImage_,EventType.CHANGE,function(t){const i=this.sourceImage_.getState();(i==ImageState.LOADED||i==ImageState.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null}}var ReprojImage$1=ReprojImage;const ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ImageSourceEvent extends BaseEvent{constructor(e,t){super(e);this.image=t}}class ImageSource extends Source$1{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0});this.on,this.once,this.un,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}findNearestResolution(e){if(this.resolutions_){const t=linearFindNearest(this.resolutions_,e,0);e=this.resolutions_[t]}return e}getImage(e,t,i,r){const s=this.getProjection();if(!s||!r||equivalent(s,r))return s&&(r=s),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&equals$1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ReprojImage$1(s,r,e,t,i,function(o,a,l){return this.getImageInternal(o,a,l,s)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){return abstract()}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case ImageState.LOADING:this.loading=!0,i=ImageSourceEventType.IMAGELOADSTART;break;case ImageState.LOADED:this.loading=!1,i=ImageSourceEventType.IMAGELOADEND;break;case ImageState.ERROR:this.loading=!1,i=ImageSourceEventType.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new ImageSourceEvent(i,t))}}function defaultImageLoadFunction(n,e){n.getImage().src=e}var ImageSource$1=ImageSource;class Static extends ImageSource$1{constructor(e){const t=e.crossOrigin!==void 0?e.crossOrigin:null,i=e.imageLoadFunction!==void 0?e.imageLoadFunction:defaultImageLoadFunction;super({attributions:e.attributions,interpolate:e.interpolate,projection:get(e.projection)});this.url_=e.url,this.imageExtent_=e.imageExtent,this.image_=new ImageWrapper$1(this.imageExtent_,void 0,1,this.url_,t,i),this.imageSize_=e.imageSize?e.imageSize:null,this.image_.addEventListener(EventType.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,i,r){return intersects(e,this.image_.getExtent())?this.image_:null}getUrl(){return this.url_}handleImageChange(e){if(this.image_.getState()==ImageState.LOADED){const t=this.image_.getExtent(),i=this.image_.getImage();let r,s;this.imageSize_?(r=this.imageSize_[0],s=this.imageSize_[1]):(r=i.width,s=i.height);const o=getWidth(t),a=getHeight(t),l=o/r,c=a/s;let u=r,h=s;if(l>c?u=Math.round(o/c):h=Math.round(a/l),u!==r||h!==s){const d=createCanvasContext2D(u,h);this.getInterpolate()||(d.imageSmoothingEnabled=!1);const f=d.canvas;d.drawImage(i,0,0,r,s,0,0,f.width,f.height),this.image_.setImage(f)}}super.handleImageChange(e)}}var Static$1=Static;class ImageCanvas extends ImageBase$1{constructor(e,t,i,r,s){const o=s!==void 0?ImageState.IDLE:ImageState.LOADED;super(e,t,i,o);this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=ImageState.ERROR):this.state=ImageState.LOADED,this.changed()}load(){this.state==ImageState.IDLE&&(this.state=ImageState.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}var ImageCanvas$1=ImageCanvas,TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError;super(t);this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}var BaseTileLayer$1=BaseTileLayer;class Tile extends EventTarget{constructor(e,t,i){super();i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==TileState.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==TileState.LOADED){e.interimTile=null;break}else e.getState()==TileState.LOADING?t=e:e.getState()==TileState.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:easeIn(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}var Tile$1=Tile;class ImageTile extends Tile$1{constructor(e,t,i,r,s,o){super(e,t,o);this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function getBlankImage(){const n=createCanvasContext2D(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var ImageTile$1=ImageTile;class ReprojTile extends Tile$1{constructor(e,t,i,r,s,o,a,l,c,u,h,d){super(s,TileState.IDLE,{interpolate:!!d});this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const m=g?getIntersection(f,g):f;if(getArea(m)===0){this.state=TileState.EMPTY;return}const y=e.getExtent();y&&(_?_=getIntersection(_,y):_=y);const E=r.getResolution(this.wrappedTileCoord_[0]),T=calculateSourceExtentResolution(e,i,m,E);if(!isFinite(T)||T<=0){this.state=TileState.EMPTY;return}const v=u!==void 0?u:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation$1(e,i,m,_,T*v,E),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=t.getZForResolution(T);let S=this.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(S[1]=clamp(S[1],_[1],_[3]),S[3]=clamp(S[3],_[1],_[3])):S=getIntersection(S,_)),!getArea(S))this.state=TileState.EMPTY;else{const $=t.getTileRangeForExtentAndZ(S,this.sourceZ_);for(let b=$.minX;b<=$.maxX;b++)for(let A=$.minY;A<=$.maxY;A++){const O=c(this.sourceZ_,b,A,a);O&&this.sourceTiles_.push(O)}this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(function(t,i,r){t&&t.getState()==TileState.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,i,r){const s=t.getState();if(s==TileState.IDLE||s==TileState.LOADING){e++;const o=listen(t,EventType.CHANGE,function(a){const l=t.getState();(l==TileState.LOADED||l==TileState.ERROR||l==TileState.EMPTY)&&(unlistenByKey(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){t.getState()==TileState.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas$1(this.canvas_.getContext("2d")),canvasPool.push(this.canvas_),this.canvas_=null),super.release()}}var ReprojTile$1=ReprojTile;class TileRange{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new TileRange(n,e,t,i)}var TileRange$1=TileRange;class CanvasTileLayerRenderer extends CanvasLayerRenderer$1{constructor(e){super(e);this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=createEmpty(),this.tmpTileRange_=new TileRange$1(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return i==TileState.LOADED||i==TileState.EMPTY||i==TileState.ERROR&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,i,s,o);return c.getState()==TileState.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=apply(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!containsCoordinate(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),h=c.getTilePixelRatio(t.pixelRatio);for(let d=u.getZForResolution(l.resolution);d>=u.getMinZoom();--d){const f=u.getTileCoordForCoordAndZ(r,d),g=c.getTile(d,f[1],f[2],o,a);if(!(g instanceof ImageTile$1||g instanceof ReprojTile$1)||g instanceof ReprojTile$1&&g.getState()===TileState.EMPTY)return null;if(g.getState()!==TileState.LOADED)continue;const _=u.getOrigin(d),m=toSize(u.getTileSize(d)),y=u.getResolution(d),E=Math.floor(h*((r[0]-_[0])/y-f[1]*m[0])),T=Math.floor(h*((_[1]-r[1])/y-f[2]*m[1])),v=Math.round(h*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),E+v,T+v)}return null}loadedTileCallback(e,t,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,t,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=e.pixelRatio,u=this.getLayer(),h=u.getSource(),d=h.getRevision(),f=h.getTileGridForProjection(s),g=f.getZForResolution(o,h.zDirection),_=f.getResolution(g);let m=e.extent;const y=e.viewState.resolution,E=h.getTilePixelRatio(c),T=Math.round(getWidth(m)/y*c),v=Math.round(getHeight(m)/y*c),S=i.extent&&fromUserExtent(i.extent);S&&(m=getIntersection(m,fromUserExtent(i.extent)));const $=_*T/2/E,b=_*v/2/E,A=[a[0]-$,a[1]-b,a[0]+$,a[1]+b],O=f.getTileRangeForExtentAndZ(m,g),M={};M[g]={};const j=this.createLoadedTileFinder(h,s,M),z=this.tmpExtent,L=this.tmpTileRange_;this.newTiles_=!1;const N=l?getRotatedViewport(r.center,y,l,e.size):void 0;for(let ee=O.minX;ee<=O.maxX;++ee)for(let ne=O.minY;ne<=O.maxY;++ne){if(l&&!f.tileCoordIntersectsViewport([g,ee,ne],N))continue;const te=this.getTile(g,ee,ne,e);if(this.isDrawableTile(te)){const se=getUid(this);if(te.getState()==TileState.LOADED){M[g][te.tileCoord.toString()]=te;let ie=te.inTransition(se);ie&&i.opacity!==1&&(te.endTransition(se),ie=!1),!this.newTiles_&&(ie||!this.renderedTiles.includes(te))&&(this.newTiles_=!0)}if(te.getAlpha(se,e.time)===1)continue}const ge=f.getTileCoordChildTileRange(te.tileCoord,L,z);let le=!1;ge&&(le=j(g+1,ge)),le||f.forEachTileCoordParentTileRange(te.tileCoord,j,L,z)}const I=_/o*c/E;compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-T/2,-v/2);const P=toString$1(this.pixelTransform);this.useContainer(t,P,this.getBackground(e));const R=this.context,D=R.canvas;makeInverse(this.inversePixelTransform,this.pixelTransform),compose(this.tempTransform,T/2,v/2,I,I,0,-T/2,-v/2),D.width!=T||D.height!=v?(D.width=T,D.height=v):this.containerReused||R.clearRect(0,0,T,v),S&&this.clipUnrotated(R,e,S),h.getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,e),this.renderedTiles.length=0;let V=Object.keys(M).map(Number);V.sort(numberSafeCompareFunction);let K,J,F;i.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?V=V.reverse():(K=[],J=[]);for(let ee=V.length-1;ee>=0;--ee){const ne=V[ee],te=h.getTilePixelSize(ne,c,s),le=f.getResolution(ne)/_,se=te[0]*le*I,ie=te[1]*le*I,ue=f.getTileCoordForCoordAndZ(getTopLeft(A),ne),fe=f.getTileCoordExtent(ue),de=apply(this.tempTransform,[E*(fe[0]-A[0])/_,E*(A[3]-fe[3])/_]),x=E*h.getGutterForProjection(s),C=M[ne];for(const w in C){const k=C[w],G=k.tileCoord,W=ue[1]-G[1],Y=Math.round(de[0]-(W-1)*se),U=ue[2]-G[2],X=Math.round(de[1]-(U-1)*ie),B=Math.round(de[0]-W*se),q=Math.round(de[1]-U*ie),H=Y-B,Z=X-q,Q=g===ne,re=Q&&k.getAlpha(getUid(this),e.time)!==1;let ae=!1;if(!re)if(K){F=[B,q,B+H,q,B+H,q+Z,B,q+Z];for(let oe=0,ce=K.length;oe<ce;++oe)if(g!==ne&&ne<J[oe]){const he=K[oe];intersects([B,q,B+H,q+Z],[he[0],he[3],he[4],he[7]])&&(ae||(R.save(),ae=!0),R.beginPath(),R.moveTo(F[0],F[1]),R.lineTo(F[2],F[3]),R.lineTo(F[4],F[5]),R.lineTo(F[6],F[7]),R.moveTo(he[6],he[7]),R.lineTo(he[4],he[5]),R.lineTo(he[2],he[3]),R.lineTo(he[0],he[1]),R.clip())}K.push(F),J.push(ne)}else R.clearRect(B,q,H,Z);this.drawTileImage(k,e,B,q,H,Z,x,Q),K&&!re?(ae&&R.restore(),this.renderedTiles.unshift(k)):this.renderedTiles.push(k),this.updateUsedTiles(e.usedTiles,h,k)}}return this.renderedRevision=d,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(e,h,f,c,s,m,g,u.getPreload()),this.scheduleExpireCache(e,h),this.postRender(R,e),i.extent&&R.restore(),R.imageSmoothingEnabled=!0,P!==D.style.transform&&(D.style.transform=P),this.container}drawTileImage(e,t,i,r,s,o,a,l){const c=this.getTileImage(e);if(!c)return;const u=getUid(this),h=t.layerStatesArray[t.layerIndex],d=h.opacity*(l?e.getAlpha(u,t.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),f&&this.context.restore(),d!==h.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(r,s,o){const a=getUid(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=getUid(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,l,c){const u=getUid(t);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],d=e.tileQueue,f=i.getMinZoom(),g=e.viewState.rotation,_=g?getRotatedViewport(e.viewState.center,e.viewState.resolution,g,e.size):void 0;let m=0,y,E,T,v,S,$;for($=f;$<=a;++$)for(E=i.getTileRangeForExtentAndZ(o,$,E),T=i.getResolution($),v=E.minX;v<=E.maxX;++v)for(S=E.minY;S<=E.maxY;++S)g&&!i.tileCoordIntersectsViewport([$,v,S],_)||(a-$<=l?(++m,y=t.getTile($,v,S,r,s),y.getState()==TileState.IDLE&&(h[y.getKey()]=!0,d.isKeyQueued(y.getKey())||d.enqueue([y,u,i.getTileCoordCenter(y.tileCoord),T])),c!==void 0&&c(y)):t.useTile($,v,S,s));t.updateCacheSize(m,s)}}var CanvasTileLayerRenderer$1=CanvasTileLayerRenderer;class TileLayer$1 extends BaseTileLayer$1{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer$1(this)}}var TileLayer$2=TileLayer$1;class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return assert(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return assert(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(!!this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){assert(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}var LRUCache$1=LRUCache;function createOrUpdate(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function getKeyZXY(n,e,t){return n+"/"+e+"/"+t}function getKey(n){return getKeyZXY(n[0],n[1],n[2])}function fromKey(n){return n.split("/").map(Number)}function hash(n){return(n[1]<<n[0])+n[2]}function withinExtentAndZ(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}class TileCache extends LRUCache$1{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=fromKey(e)[0];this.forEach(function(r){r.tileCoord[0]!==i&&(this.remove(getKey(r.tileCoord)),r.release())}.bind(this))}}var TileCache$1=TileCache;const tmpTileCoord=[0,0,0],DECIMALS=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,function(r,s){return s-r},!0),17);let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,20));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(i)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(r,s){const o=new TileRange$1(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=createOrUpdate$1(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return createOrUpdate$1(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return createOrUpdate$1(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),u=Math.floor(o*l);if(t<r)return createOrUpdate$1(c,c,u,u,i);const h=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return createOrUpdate$1(c,h,u,d,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),o=toSize(this.getTileSize(e),this.tmpSize_),a=r[0]+t.minX*o[0]*s,l=r[0]+(t.maxX+1)*o[0]*s,c=r[1]+t.minY*o[1]*s,u=r[1]+(t.maxY+1)*o[1]*s;return createOrUpdate$2(a,c,l,u,i)}getTileRangeForExtentAndZ(e,t,i){const r=tmpTileCoord;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);const s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),createOrUpdate$1(s,r[1],o,r[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=toSize(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return createOrUpdate$2(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=toSize(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/i/c[0],h=a*(l[1]-t)/i/c[1];return r?(u=ceil(u,DECIMALS)-1,h=ceil(h,DECIMALS)-1):(u=floor(u,DECIMALS),h=floor(h,DECIMALS)),createOrUpdate(o,u,h,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=toSize(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return r?(c=ceil(c,DECIMALS)-1,u=ceil(u,DECIMALS)-1):(c=floor(c,DECIMALS),u=floor(u,DECIMALS)),createOrUpdate(i,c,u,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=linearFindNearest(this.resolutions_,e,t||0);return clamp(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return intersectsLinearRing(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}var TileGrid$1=TileGrid;function getForProjection(n){let e=n.getDefaultTileGrid();return e||(e=createForProjection(n),n.setDefaultTileGrid(e)),e}function wrapX(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=extentFromProjection(t);if(containsCoordinate(s,r))return e;{const o=getWidth(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}}function createForExtent(n,e,t,i){i=i!==void 0?i:"top-left";const r=resolutionsFromExtent(n,e,t);return new TileGrid$1({extent:n,origin:getCorner(n,i),resolutions:r,tileSize:t})}function createXYZ(n){const e=n||{},t=e.extent||get("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(t,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid$1(i)}function resolutionsFromExtent(n,e,t,i){e=e!==void 0?e:DEFAULT_MAX_ZOOM,t=toSize(t!==void 0?t:DEFAULT_TILE_SIZE);const r=getHeight(n),s=getWidth(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function createForProjection(n,e,t,i){const r=extentFromProjection(n);return createForExtent(r,e,t,i)}function extentFromProjection(n){n=get(n);let e=n.getExtent();if(!e){const t=180*METERS_PER_UNIT$1.degrees/n.getMetersPerUnit();e=createOrUpdate$2(-t,-t,t,t)}return e}class TileSource extends Source$1{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate});this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new TileCache$1(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let h=i.minY;h<=i.maxY;++h)l=getKeyZXY(t,u,h),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===TileState.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(e,t,i,r,s){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTileCacheForProjection(e){const t=this.getProjection();return assert(t===null||equivalent(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=toSize(r.getTileSize(e),this.tmpSize);return s==1?o:scale$3(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=wrapX(i,e,t)),withinExtentAndZ(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}}class TileSourceEvent extends BaseEvent{constructor(e,t){super(e);this.tile=t}}var TileSource$1=TileSource;let hasImageData=!0;try{new ImageData(10,10)}catch(n){hasImageData=!1}let context;function newImageData(n,e,t){if(hasImageData)return new ImageData(n,e,t);context||(context=document.createElement("canvas").getContext("2d"));const i=context.createImageData(e,t);return i.data.set(n),i}function createMinion(n){let e=!0;try{new ImageData(10,10)}catch{e=!1}function t(i,r,s){return e?new ImageData(i,r,s):{data:i,width:r,height:s}}return function(i){const r=i.buffers,s=i.meta,o=i.imageOps,a=i.width,l=i.height,c=r.length,u=r[0].byteLength;if(o){const g=new Array(c);for(let m=0;m<c;++m)g[m]=t(new Uint8ClampedArray(r[m]),a,l);return n(g,s).data.buffer}const h=new Uint8ClampedArray(u),d=new Array(c),f=new Array(c);for(let g=0;g<c;++g)d[g]=new Uint8ClampedArray(r[g]),f[g]=[0,0,0,0];for(let g=0;g<u;g+=4){for(let m=0;m<c;++m){const y=d[m];f[m][0]=y[g],f[m][1]=y[g+1],f[m][2]=y[g+2],f[m][3]=y[g+3]}const _=n(f,s);h[g]=_[0],h[g+1]=_[1],h[g+2]=_[2],h[g+3]=_[3]}return h.buffer}}function createWorker(n,e){const i=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+createMinion.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob=="undefined"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function createFauxWorker(n,e){const t=createMinion(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}class Processor extends Disposable$1{constructor(e){super();this._imageOps=!!e.imageOps;let t;e.threads===0?t=0:this._imageOps?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=createWorker(e,this._onWorkerMessage.bind(this,r));else i[0]=createFauxWorker(e,this._onWorkerMessage.bind(this,0));this._workers=i,this._queue=[],this._maxQueueLength=e.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(e,t,i){this._enqueue({inputs:e,meta:t,callback:i}),this._dispatch()}_enqueue(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||this._queue.length===0)return;const e=this._queue.shift();this._job=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(l){return l.data.buffer}),s=this._workers.length;if(this._running=s,s===1){this._workers[0].postMessage({buffers:r,meta:e.meta,imageOps:this._imageOps,width:t,height:i},r);return}const o=e.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let l=0;l<s;++l){const c=l*a,u=[];for(let h=0,d=r.length;h<d;++h)u.push(r[h].slice(c,c+a));this._workers[l].postMessage({buffers:u,meta:e.meta,imageOps:this._imageOps,width:t,height:i},u)}}_onWorkerMessage(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,this._running===0&&this._resolveJob())}_resolveJob(){const e=this._job,t=this._workers.length;let i,r;if(t===1)i=new Uint8ClampedArray(this._dataLookup[0].buffer),r=this._dataLookup[0].meta;else{const s=e.inputs[0].data.length;i=new Uint8ClampedArray(s),r=new Array(t);const o=4*Math.ceil(s/4/t);for(let a=0;a<t;++a){const l=this._dataLookup[a].buffer,c=a*o;i.set(new Uint8ClampedArray(l),c),r[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},e.callback(null,newImageData(i,e.inputs[0].width,e.inputs[0].height),r),this._dispatch()}disposeInternal(){for(let e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0}}const RasterEventType={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class RasterSourceEvent extends BaseEvent{constructor(e,t,i){super(e);this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class RasterSource extends ImageSource$1{constructor(e){super({projection:null});this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=createLayers(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(EventType.CHANGE,t);this.tileQueue_=new TileQueue$1(function(){return 1},this.changed.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:create$3(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:getLayerStatesArray(this.layers_),pixelRatio:1,pixelToCoordinateTransform:create$3(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:getUid(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let s=0,o=e.sources.length;s<o;++s){const a=e.sources[s],c=(a instanceof Source$1?a:a.getSource()).getAttributions();if(typeof c=="function"){const u=c(i);r.push.apply(r,u)}}return r.length!==0?r:null}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Processor({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const s=getCenter(e);r.extent=e.slice(),r.size[0]=Math.round(getWidth(e)/t),r.size[1]=Math.round(getHeight(e)/t),r.time=Date.now();const o=r.viewState;return o.center=s,o.projection=i,o.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;const s=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==o||!equals$1(e,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.tileQueue.loadMoreTiles(16,16),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s;const o=getImageData(this.layers_[s],e);if(o)i[s]=o;else return}const r={};this.dispatchEvent(new RasterSourceEvent(RasterEventType.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const s=e.extent,o=e.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!equals$1(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(getWidth(s)/o),c=Math.round(getHeight(s)/o);a=createCanvasContext2D(l,c),this.renderedImageCanvas_=new ImageCanvas$1(s,o,1,a.canvas)}a.putImageData(i,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new RasterSourceEvent(RasterEventType.AFTEROPERATIONS,e,r)),e.animate&&requestAnimationFrame(this.changed.bind(this))}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}RasterSource.prototype.dispose;let sharedContext=null;function getImageData(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const s=t.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===i&&o.height===r)return o.getContext("2d").getImageData(0,0,i,r)}if(!sharedContext)sharedContext=createCanvasContext2D(i,r);else{const a=sharedContext.canvas;a.width!==i||a.height!==r?sharedContext=createCanvasContext2D(i,r):sharedContext.clearRect(0,0,i,r)}return sharedContext.drawImage(o,0,0,i,r),sharedContext.getImageData(0,0,i,r)}function getLayerStatesArray(n){return n.map(function(e){return e.getLayerState()})}function createLayers(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=createLayer(n[i]);return t}function createLayer(n){let e;return n instanceof Source$1?n instanceof TileSource$1?e=new TileLayer$2({source:n}):n instanceof ImageSource$1&&(e=new ImageLayer$1({source:n})):e=n,e}var RasterSource$1=RasterSource;function getVectorContext(n){if(!(n.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=n.inversePixelTransform[0],t=n.frameState,i=multiply(n.inversePixelTransform.slice(),t.coordinateToPixelTransform),r=getSquaredTolerance(t.viewState.resolution,e);let s;return new CanvasImmediateRenderer$1(n.context,e,t.extent,i,t.viewState.rotation,r,s)}function line(n,e,t){const i=[];let r=n(0),s=n(1),o=e(r),a=e(s);const l=[s,r],c=[a,o],u=[1,0],h={};let d=1e5,f,g,_,m,y,E;for(;--d>0&&u.length>0;)_=u.pop(),r=l.pop(),o=c.pop(),E=_.toString(),E in h||(i.push(o[0],o[1]),h[E]=!0),m=u.pop(),s=l.pop(),a=c.pop(),y=(_+m)/2,f=n(y),g=e(f),squaredSegmentDistance(g[0],g[1],o[0],o[1],a[0],a[1])<t?(i.push(a[0],a[1]),E=m.toString(),h[E]=!0):(u.push(m,y,y,_),c.push(a,g,g,o),l.push(s,f,f,r));return i}function meridian(n,e,t,i,r){const s=get("EPSG:4326");return line(function(o){return[n,e+(t-e)*o]},getTransform(s,i),r)}function parallel(n,e,t,i,r){const s=get("EPSG:4326");return line(function(o){return[e+(t-e)*o,n]},getTransform(s,i),r)}const DEFAULT_STROKE_STYLE=new Stroke$1({color:"rgba(0,0,0,0.2)"}),INTERVALS=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class Graticule extends VectorLayer$1{constructor(e){e=e||{};const t=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},e);delete t.maxLines,delete t.strokeStyle,delete t.targetSize,delete t.showLabels,delete t.lonLabelFormatter,delete t.latLabelFormatter,delete t.lonLabelPosition,delete t.latLabelPosition,delete t.lonLabelStyle,delete t.latLabelStyle,delete t.intervals;super(t);this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=e.targetSize!==void 0?e.targetSize:100,this.maxLines_=e.maxLines!==void 0?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=e.strokeStyle!==void 0?e.strokeStyle:DEFAULT_STROKE_STYLE,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,e.showLabels&&(this.lonLabelFormatter_=e.lonLabelFormatter==null?degreesToStringHDMS.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=e.latLabelFormatter==null?degreesToStringHDMS.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=e.lonLabelPosition==null?0:e.lonLabelPosition,this.latLabelPosition_=e.latLabelPosition==null?1:e.latLabelPosition,this.lonLabelStyleBase_=new Style$1({text:e.lonLabelStyle!==void 0?e.lonLabelStyle.clone():new Text$1({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Fill$1({color:"rgba(0,0,0,1)"}),stroke:new Stroke$1({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=function(i){const r=i.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(r),this.lonLabelStyleBase_}.bind(this),this.latLabelStyleBase_=new Style$1({text:e.latLabelStyle!==void 0?e.latLabelStyle.clone():new Text$1({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Fill$1({color:"rgba(0,0,0,1)"}),stroke:new Stroke$1({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=function(i){const r=i.get("graticule_label");return this.latLabelStyleBase_.getText().setText(r),this.latLabelStyleBase_}.bind(this),this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(RenderEventType.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=e.intervals!==void 0?e.intervals:INTERVALS,this.setSource(new VectorSource$1({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new Collection$1,overlaps:!1,useSpatialIndex:!1,wrapX:e.wrapX})),this.featurePool_=[],this.lineStyle_=new Style$1({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(e,t){let i=e.slice();return this.projection_&&this.getSource().getWrapX()&&wrapX$2(i,this.projection_),this.loadedExtent_&&(approximatelyEquals(this.loadedExtent_,i,t)?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[i]}loaderFunction(e,t,i){this.loadedExtent_=e;const r=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=getIntersection(s,e);if(this.renderedExtent_&&equals$1(this.renderedExtent_,o)&&this.renderedResolution_===t||(this.renderedExtent_=o,this.renderedResolution_=t,isEmpty(o)))return;const a=getCenter(o),l=t*t/4;(!this.projection_||!equivalent(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(o,a,t,l);let u=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(u+=this.meridians_.length),this.parallelsLabels_&&(u+=this.parallels_.length);let h;for(;u>this.featurePool_.length;)h=new Feature$1,this.featurePool_.push(h);const d=r.getFeaturesCollection();d.clear();let f=0,g,_;for(g=0,_=this.meridians_.length;g<_;++g)h=this.featurePool_[f++],h.setGeometry(this.meridians_[g]),h.setStyle(this.lineStyle_),d.push(h);for(g=0,_=this.parallels_.length;g<_;++g)h=this.featurePool_[f++],h.setGeometry(this.parallels_[g]),h.setStyle(this.lineStyle_),d.push(h)}addMeridian_(e,t,i,r,s,o){const a=this.getMeridian_(e,t,i,r,o);if(intersects(a.getExtent(),s)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(e);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new Point$1([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(e,t,i,r,s,o){const a=this.getParallel_(e,t,i,r,o);if(intersects(a.getExtent(),s)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(e);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new Point$1([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(e){const t=e.frameState.viewState.rotation,i=e.frameState.viewState.resolution,r=e.frameState.size,s=e.frameState.extent,o=getCenter(s);let a=s;if(t){const g=r[0]*i,_=r[1]*i;a=[o[0]-g/2,o[1]-_/2,o[0]+g/2,o[1]+_/2]}let l=0,c=0,u=this.latLabelPosition_<.5;const h=this.projection_.getExtent(),d=getWidth(h);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!containsExtent(h,s)){l=Math.floor((s[0]-h[0])/d),c=Math.ceil((s[2]-h[2])/d);const g=Math.abs(t)>Math.PI/2;u=u!==g}const f=getVectorContext(e);for(let g=l;g<=c;++g){let _=this.meridians_.length+this.parallels_.length,m,y,E,T;if(this.meridiansLabels_)for(y=0,E=this.meridiansLabels_.length;y<E;++y){const v=this.meridians_[y];if(!t&&g===0)T=this.getMeridianPoint_(v,s,y);else{const S=v.clone();S.translate(g*d,0),S.rotate(-t,o),T=this.getMeridianPoint_(S,a,y),T.rotate(t,o)}m=this.featurePool_[_++],m.setGeometry(T),m.set("graticule_label",this.meridiansLabels_[y].text),f.drawFeature(m,this.lonLabelStyle_(m))}if(this.parallelsLabels_&&(g===l&&u||g===c&&!u))for(y=0,E=this.parallels_.length;y<E;++y){const v=this.parallels_[y];if(!t&&g===0)T=this.getParallelPoint_(v,s,y);else{const S=v.clone();S.translate(g*d,0),S.rotate(-t,o),T=this.getParallelPoint_(S,a,y),T.rotate(t,o)}m=this.featurePool_[_++],m.setGeometry(T),m.set("graticule_label",this.parallelsLabels_[y].text),f.drawFeature(m,this.latLabelStyle_(m))}}}createGraticule_(e,t,i,r){const s=this.getInterval_(i);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1;const a=this.projection_.getExtent(),l=getWidth(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!containsExtent(a,e)&&(getWidth(e)>=l?(e[0]=a[0],e[2]=a[2]):o=!0);const c=[clamp(t[0],this.minX_,this.maxX_),clamp(t[1],this.minY_,this.maxY_)],u=this.toLonLatTransform_(c);isNaN(u[1])&&(u[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let h=clamp(u[0],this.minLon_,this.maxLon_),d=clamp(u[1],this.minLat_,this.maxLat_);const f=this.maxLines_;let g,_,m,y,E=e;o||(E=[clamp(e[0],this.minX_,this.maxX_),clamp(e[1],this.minY_,this.maxY_),clamp(e[2],this.minX_,this.maxX_),clamp(e[3],this.minY_,this.maxY_)]);const T=applyTransform(E,this.toLonLatTransform_,void 0,8);let v=T[3],S=T[2],$=T[1],b=T[0];if(o||(containsCoordinate(E,this.bottomLeft_)&&(b=this.minLon_,$=this.minLat_),containsCoordinate(E,this.bottomRight_)&&(S=this.maxLon_,$=this.minLat_),containsCoordinate(E,this.topLeft_)&&(b=this.minLon_,v=this.maxLat_),containsCoordinate(E,this.topRight_)&&(S=this.maxLon_,v=this.maxLat_),v=clamp(v,d,this.maxLat_),S=clamp(S,h,this.maxLon_),$=clamp($,this.minLat_,d),b=clamp(b,this.minLon_,h)),h=Math.floor(h/s)*s,y=clamp(h,this.minLon_,this.maxLon_),_=this.addMeridian_(y,$,v,r,e,0),g=0,o)for(;(y-=s)>=b&&g++<f;)_=this.addMeridian_(y,$,v,r,e,_);else for(;y!=this.minLon_&&g++<f;)y=Math.max(y-s,this.minLon_),_=this.addMeridian_(y,$,v,r,e,_);if(y=clamp(h,this.minLon_,this.maxLon_),g=0,o)for(;(y+=s)<=S&&g++<f;)_=this.addMeridian_(y,$,v,r,e,_);else for(;y!=this.maxLon_&&g++<f;)y=Math.min(y+s,this.maxLon_),_=this.addMeridian_(y,$,v,r,e,_);for(this.meridians_.length=_,this.meridiansLabels_&&(this.meridiansLabels_.length=_),d=Math.floor(d/s)*s,m=clamp(d,this.minLat_,this.maxLat_),_=this.addParallel_(m,b,S,r,e,0),g=0;m!=this.minLat_&&g++<f;)m=Math.max(m-s,this.minLat_),_=this.addParallel_(m,b,S,r,e,_);for(m=clamp(d,this.minLat_,this.maxLat_),g=0;m!=this.maxLat_&&g++<f;)m=Math.min(m+s,this.maxLat_),_=this.addParallel_(m,b,S,r,e,_);this.parallels_.length=_,this.parallelsLabels_&&(this.parallelsLabels_.length=_)}getInterval_(e){const t=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1];let r=-1;const s=Math.pow(this.targetSize_*e,2),o=[],a=[];for(let l=0,c=this.intervals_.length;l<c;++l){const u=clamp(this.intervals_[l]/2,0,90),h=clamp(i,-90+u,90-u);if(o[0]=t-u,o[1]=h-u,a[0]=t+u,a[1]=h+u,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;r=this.intervals_[l]}return r}getMeridian_(e,t,i,r,s){const o=meridian(e,t,i,this.projection_,r);let a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new LineString$1(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(e,t,i){const r=e.getFlatCoordinates();let s=1,o=r.length-1;r[s]>r[o]&&(s=o,o=1);const a=Math.max(t[1],r[s]),l=Math.min(t[3],r[o]),c=clamp(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,a,l),h=[r[s-1]+(r[o-1]-r[s-1])*(c-r[s])/(r[o]-r[s]),c],d=this.meridiansLabels_[i].geom;return d.setCoordinates(h),d}getMeridians(){return this.meridians_}getParallel_(e,t,i,r,s){const o=parallel(e,t,i,this.projection_,r);let a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new LineString$1(o,"XY"),a}getParallelPoint_(e,t,i){const r=e.getFlatCoordinates();let s=0,o=r.length-2;r[s]>r[o]&&(s=o,o=0);const a=Math.max(t[0],r[s]),l=Math.min(t[2],r[o]),c=clamp(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,a,l),u=r[s+1]+(r[o+1]-r[s+1])*(c-r[s])/(r[o]-r[s]),h=[c,u],d=this.parallelsLabels_[i].geom;return d.setCoordinates(h),d}getParallels(){return this.parallels_}updateProjectionInfo_(e){const t=get("EPSG:4326"),i=e.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];const r=getTransform(e,t);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=r;else{const o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,c){c=c||2;const u=r(a,l,c);for(let h=0,d=u.length;h<d;h+=c)u[h]<o&&(u[h]+=360);return u}}this.fromLonLatTransform_=getTransform(t,e);const s=applyTransform([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(getCenter(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e}}var Graticule$1=Graticule;const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control$1{constructor(e){e=e||{};super({element:document.createElement("div"),target:e.target});this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"\u2922";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"\xD7";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(!!isFullScreenSupported(t))if(isFullScreen(t))exitFullScreen(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(i):requestFullScreen(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,r=e.length;i<r;++i)unlistenByKey(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();isFullScreenSupported(i)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let r=0,s=events.length;r<s;++r)e.push(listen(i,events[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(n){const e=n.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&n.fullscreenEnabled)}function isFullScreen(n){return!!(n.webkitIsFullScreen||n.fullscreenElement)}function requestFullScreen(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}function requestFullScreenWithKeys(n){n.webkitRequestFullscreen?n.webkitRequestFullscreen():requestFullScreen(n)}function exitFullScreen(n){n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()}var FullScreen$1=FullScreen;const Direction={VERTICAL:0,HORIZONTAL:1};class ZoomSlider extends Control$1{constructor(e){e=e||{};super({element:document.createElement("div"),render:e.render});this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=Direction.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const t=e.className!==void 0?e.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=t+"-thumb "+CLASS_UNSELECTABLE;const r=this.element;r.className=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,r.appendChild(i),r.addEventListener(PointerEventType.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),r.addEventListener(PointerEventType.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),r.addEventListener(PointerEventType.POINTERUP,this.handleDraggerEnd_.bind(this),!1),r.addEventListener(EventType.CLICK,this.handleContainerClick_.bind(this),!1),i.addEventListener(EventType.CLICK,stopPropagation,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let t=e.offsetWidth,i=e.offsetHeight;if(t===0&&i===0)return this.sliderInitialized_=!1;const r=getComputedStyle(e);t-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);const s=e.firstElementChild,o=getComputedStyle(s),a=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),l=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[a,l],t>i?(this.direction_=Direction.HORIZONTAL,this.widthLimit_=t-a):(this.direction_=Direction.VERTICAL,this.heightLimit_=i-l),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),i=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i),s=t.getConstrainedZoom(t.getZoomForResolution(r));t.animateInternal({zoom:s,duration:this.duration_,easing:easeOut})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const i=this.handleDraggerDrag_,r=this.handleDraggerEnd_,s=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(listen(s,PointerEventType.POINTERMOVE,i,this),listen(s,PointerEventType.POINTERUP,r,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,i=e.clientY-this.startY_,r=this.getRelativePosition_(t,i);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const t=this.getPositionForResolution_(e),i=this.element.firstElementChild;this.direction_==Direction.HORIZONTAL?i.style.left=this.widthLimit_*t+"px":i.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let i;return this.direction_===Direction.HORIZONTAL?i=e/this.widthLimit_:i=t/this.heightLimit_,clamp(i,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const t=this.getMap().getView().getValueForResolutionFunction();return clamp(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}var ZoomSlider$1=ZoomSlider;class ZoomToExtent extends Control$1{constructor(e){e=e||{};super({element:document.createElement("div"),target:e.target});this.extent=e.extent?e.extent:null;const t=e.className!==void 0?e.className:"ol-zoom-extent",i=e.label!==void 0?e.label:"E",r=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,a=this.element;a.className=o,a.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),i=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(fromExtent(i))}}var ZoomToExtent$1=ZoomToExtent;class DataTile extends Tile$1{constructor(e){const t=TileState.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate});this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||[256,256]}getSize(){return this.size_}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=TileState.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=TileState.ERROR,e.changed()})}}var DataTile$1=DataTile;const ARRAY_BUFFER=34962,ELEMENT_ARRAY_BUFFER=34963,STREAM_DRAW=35040,STATIC_DRAW=35044,DYNAMIC_DRAW=35048,UNSIGNED_BYTE=5121,UNSIGNED_SHORT=5123,UNSIGNED_INT=5125,FLOAT=5126,CONTEXT_IDS=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function getContext(n,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!SAFARI_BUG_237906},e);const t=CONTEXT_IDS.length;for(let i=0;i<t;++i)try{const r=n.getContext(CONTEXT_IDS[i],e);if(r)return r}catch{}return null}const BufferUsage={STATIC_DRAW,STREAM_DRAW,DYNAMIC_DRAW};class WebGLArrayBuffer{constructor(e,t){this.array=null,this.type=e,assert(e===ARRAY_BUFFER||e===ELEMENT_ARRAY_BUFFER,62),this.usage=t!==void 0?t:BufferUsage.STATIC_DRAW}ofSize(e){this.array=new(getArrayClassForType(this.type))(e)}fromArray(e){this.array=getArrayClassForType(this.type).from(e)}fromArrayBuffer(e){this.array=new(getArrayClassForType(this.type))(e)}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}}function getArrayClassForType(n){switch(n){case ARRAY_BUFFER:return Float32Array;case ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}var WebGLArrayBuffer$1=WebGLArrayBuffer;function bindAndConfigure(n,e,t){const i=t?n.LINEAR:n.NEAREST;n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i)}function uploadImageTexture(n,e,t,i){bindAndConfigure(n,e,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)}function uploadDataTexture(n,e,t,i,r,s){const o=n.getGL();let a,l;t instanceof Float32Array?(a=o.FLOAT,n.getExtension("OES_texture_float"),l=n.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),bindAndConfigure(o,e,s&&l);const c=t.byteLength/i[1];let u=1;c%8==0?u=8:c%4==0?u=4:c%2==0&&(u=2);let h;switch(r){case 1:{h=o.LUMINANCE;break}case 2:{h=o.LUMINANCE_ALPHA;break}case 3:{h=o.RGB;break}case 4:{h=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${r}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,u),o.texImage2D(o.TEXTURE_2D,0,h,i[0],i[1],0,h,a,t),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let pixelContext=null;function createPixelContext(){const n=document.createElement("canvas");n.width=1,n.height=1,pixelContext=n.getContext("2d")}class TileTexture extends EventTarget{constructor(e){super();this.tile,this.textures=[],this.handleTileChange_=this.handleTileChange_.bind(this),this.renderSize_=toSize(e.grid.getTileSize(e.tile.tileCoord[0])),this.gutter_=e.gutter||0,this.bandCount=NaN,this.helper_=e.helper;const t=new WebGLArrayBuffer$1(ARRAY_BUFFER,STATIC_DRAW);t.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(t),this.coords=t,this.setTile(e.tile)}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(EventType.CHANGE,this.handleTileChange_),this.tile=e,this.textures.length=0,this.loaded=e.getState()===TileState.LOADED,this.loaded)this.uploadTile_();else{if(e instanceof ImageTile$1){const t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(EventType.CHANGE,this.handleTileChange_)}}uploadTile_(){const e=this.helper_,t=e.getGL(),i=this.tile;if(i instanceof ImageTile$1||i instanceof ReprojTile$1){const y=t.createTexture();this.textures.push(y),this.bandCount=4,uploadImageTexture(t,y,i.getImage(),i.interpolate);return}const r=i.getSize(),s=[r[0]+2*this.gutter_,r[1]+2*this.gutter_],o=i.getData(),a=o instanceof Float32Array,l=s[0]*s[1],c=a?Float32Array:Uint8Array,u=c.BYTES_PER_ELEMENT,h=o.byteLength/s[1];this.bandCount=Math.floor(h/u/s[0]);const d=Math.ceil(this.bandCount/4);if(d===1){const y=t.createTexture();this.textures.push(y),uploadDataTexture(e,y,o,s,this.bandCount,i.interpolate);return}const f=new Array(d);for(let y=0;y<d;++y){const E=t.createTexture();this.textures.push(E);const T=y<d-1?4:(this.bandCount-1)%4+1;f[y]=new c(l*T)}let g=0,_=0;const m=s[0]*this.bandCount;for(let y=0;y<s[1];++y){for(let E=0;E<m;++E){const T=o[_+E],v=Math.floor(g/this.bandCount),S=E%this.bandCount,$=Math.floor(S/4),b=f[$],A=b.length/l,O=S%4;b[v*A+O]=T,++g}_+=h/u}for(let y=0;y<d;++y){const E=this.textures[y],T=f[y],v=T.length/l;uploadDataTexture(e,E,T,s,v,i.interpolate)}}handleTileChange_(){this.tile.getState()===TileState.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(EventType.CHANGE))}disposeInternal(){const e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(EventType.CHANGE,this.handleTileChange_)}getPixelData(e,t){if(!this.loaded)return null;const i=this.renderSize_[0],r=this.renderSize_[1],s=this.gutter_;if(this.tile instanceof DataTile$1){const g=this.tile.getSize(),_=g[0],m=g[1],y=_+2*s,E=m+2*s,T=s+Math.floor(_*(e/i)),v=s+Math.floor(m*(t/r)),S=this.tile.getData();if(S instanceof DataView){const b=S.byteLength/(y*E),A=b*(v*y+T),O=S.buffer.slice(A,A+b);return new DataView(O)}const $=this.bandCount*(v*y+T);return S.slice($,$+this.bandCount)}pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);const o=this.tile.getImage(),a=o.width,l=o.height,c=a-2*s,u=l-2*s,h=s+Math.floor(c*(e/i)),d=s+Math.floor(u*(t/r));let f;try{pixelContext.drawImage(o,h,d,1,1,0,0,1,1),f=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return f}}var TileTexture$1=TileTexture,ContextEventType={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};const DEFAULT_VERTEX_SHADER=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,DEFAULT_FRAGMENT_SHADER=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class WebGLPostProcessingPass{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer();const i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,e.vertexShader||DEFAULT_VERTEX_SHADER),t.compileShader(i);const r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e.fragmentShader||DEFAULT_FRAGMENT_SHADER),t.compileShader(r),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,i),t.attachShader(this.renderTargetProgram_,r),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(o){this.uniforms_.push({value:e.uniforms[o],location:t.getUniformLocation(this.renderTargetProgram_,o)})}.bind(this))}getGL(){return this.gl_}init(e){const t=this.getGL(),i=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const r=0,s=t.RGBA,o=0,a=t.RGBA,l=t.UNSIGNED_BYTE,c=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,r,s,i[0],i[1],o,a,l,c),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0)}}apply(e,t,i,r){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,t?t.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!t){const l=getUid(s.canvas);if(!e.renderTargets[l]){const c=s.getContextAttributes();c&&c.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT)),e.renderTargets[l]=!0}}s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),i&&i(s,e),s.drawArrays(s.TRIANGLES,0,6),r&&r(s,e)}getFrameBuffer(){return this.frameBuffer_}applyUniforms(e){const t=this.getGL();let i,r=1;this.uniforms_.forEach(function(s){if(i=typeof s.value=="function"?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof ImageData)s.texture||(s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${r}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,i.width,i.height,0,t.UNSIGNED_BYTE,new Uint8Array(i.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.uniform1i(s.location,r++);else if(Array.isArray(i))switch(i.length){case 2:t.uniform2f(s.location,i[0],i[1]);return;case 3:t.uniform3f(s.location,i[0],i[1],i[2]);return;case 4:t.uniform4f(s.location,i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&t.uniform1f(s.location,i)})}}var WebGLPostProcessingPass$1=WebGLPostProcessingPass;function create(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function fromTransform(n,e){return n[0]=e[0],n[1]=e[1],n[4]=e[2],n[5]=e[3],n[12]=e[4],n[13]=e[5],n}const DefaultUniform={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",SIZE_PX:"u_sizePx",PIXEL_RATIO:"u_pixelRatio"},AttributeType={UNSIGNED_BYTE,UNSIGNED_SHORT,UNSIGNED_INT,FLOAT},canvasCache={};function getSharedCanvasCacheKey(n){return"shared/"+n}let uniqueCanvasCacheKeyCount=0;function getUniqueCanvasCacheKey(){const n="unique/"+uniqueCanvasCacheKeyCount;return uniqueCanvasCacheKeyCount+=1,n}function getCanvas(n){let e=canvasCache[n];if(!e){const t=document.createElement("canvas");t.style.position="absolute",t.style.left="0",e={users:0,canvas:t},canvasCache[n]=e}return e.users+=1,e.canvas}function releaseCanvas(n){const e=canvasCache[n];if(!e||(e.users-=1,e.users>0))return;const t=e.canvas,r=getContext(t).getExtension("WEBGL_lose_context");r&&r.loseContext(),delete canvasCache[n]}class WebGLHelper extends Disposable$1{constructor(e){super();e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?getSharedCanvasCacheKey(e.canvasCacheKey):getUniqueCanvasCacheKey(),this.canvas_=getCanvas(this.canvasCacheKey_),this.gl_=getContext(this.canvas_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.canvas_.addEventListener(ContextEventType.LOST,this.boundHandleWebGLContextLost_),this.canvas_.addEventListener(ContextEventType.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=create$3(),this.offsetScaleMatrix_=create$3(),this.tmpMat4_=create(),this.uniformLocations_={},this.attribLocations_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms);const t=this.getGL();this.postProcessPasses_=e.postProcesses?e.postProcesses.map(function(i){return new WebGLPostProcessingPass$1({webGlContext:t,scaleRatio:i.scaleRatio,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,uniforms:i.uniforms})}):[new WebGLPostProcessingPass$1({webGlContext:t})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[];for(const t in e)this.uniforms_.push({name:t,value:e[t]});this.uniformLocations_={}}canvasCacheKeyMatches(e){return this.canvasCacheKey_===getSharedCanvasCacheKey(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.getGL(),i=getUid(e);let r=this.bufferCache_[i];if(!r){const s=t.createBuffer();r={buffer:e,webGlBuffer:s},this.bufferCache_[i]=r}t.bindBuffer(e.getType(),r.webGlBuffer)}flushBufferData(e){const t=this.getGL();this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.getGL(),i=getUid(e),r=this.bufferCache_[i];r&&!t.isContextLost()&&t.deleteBuffer(r.webGlBuffer),delete this.bufferCache_[i]}disposeInternal(){this.canvas_.removeEventListener(ContextEventType.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(ContextEventType.RESTORED,this.boundHandleWebGLContextRestored_),releaseCanvas(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}prepareDraw(e,t){const i=this.getGL(),r=this.getCanvas(),s=e.size,o=e.pixelRatio;r.width=s[0]*o,r.height=s[1]*o,r.style.width=s[0]+"px",r.style.height=s[1]+"px";for(let a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,t?i.ZERO:i.ONE_MINUS_SRC_ALPHA)}prepareDrawToRenderTarget(e,t,i){const r=this.getGL(),s=t.getSize();r.bindFramebuffer(r.FRAMEBUFFER,t.getFramebuffer()),r.viewport(0,0,s[0],s[1]),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA)}drawElements(e,t){const i=this.getGL();this.getExtension("OES_element_index_uint");const r=i.UNSIGNED_INT,s=4,o=t-e,a=e*s;i.drawElements(i.TRIANGLES,o,r,a)}finalizeDraw(e,t,i){for(let r=0,s=this.postProcessPasses_.length;r<s;r++)r===s-1?this.postProcessPasses_[r].apply(e,null,t,i):this.postProcessPasses_[r].apply(e,this.postProcessPasses_[r+1])}getCanvas(){return this.canvas_}getGL(){return this.gl_}applyFrameState(e){const t=e.size,i=e.viewState.rotation,r=e.pixelRatio,s=reset(this.offsetScaleMatrix_);scale$2(s,2/t[0],2/t[1]);const o=reset(this.offsetRotateMatrix_);i!==0&&rotate$2(o,-i),this.setUniformMatrixValue(DefaultUniform.OFFSET_SCALE_MATRIX,fromTransform(this.tmpMat4_,s)),this.setUniformMatrixValue(DefaultUniform.OFFSET_ROTATION_MATRIX,fromTransform(this.tmpMat4_,o)),this.setUniformFloatValue(DefaultUniform.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(DefaultUniform.ZOOM,e.viewState.zoom),this.setUniformFloatValue(DefaultUniform.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(DefaultUniform.PIXEL_RATIO,r),this.setUniformFloatVec2(DefaultUniform.SIZE_PX,[t[0],t[1]])}applyUniforms(e){const t=this.getGL();let i,r=0;this.uniforms_.forEach(function(s){if(i=typeof s.value=="function"?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData)s.texture||(s.prevValue=void 0,s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${r}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(!(i instanceof HTMLImageElement)||i.complete)&&s.prevValue!==i&&(s.prevValue=i,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)),t.uniform1i(this.getUniformLocation(s.name),r++);else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(s.name,fromTransform(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:t.uniform2f(this.getUniformLocation(s.name),i[0],i[1]);return;case 3:t.uniform3f(this.getUniformLocation(s.name),i[0],i[1],i[2]);return;case 4:t.uniform4f(this.getUniformLocation(s.name),i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&t.uniform1f(this.getUniformLocation(s.name),i)}.bind(this))}useProgram(e,t){this.getGL().useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const i=this.getGL(),r=i.createShader(t);return i.shaderSource(r,e),i.compileShader(r),r}getProgram(e,t){const i=this.getGL(),r=this.compileShader(e,i.FRAGMENT_SHADER),s=this.compileShader(t,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,s),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){const a=`Fragment shader compliation failed: ${i.getShaderInfoLog(r)}`;throw new Error(a)}if(i.deleteShader(r),!i.getShaderParameter(s,i.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${i.getShaderInfoLog(s)}`;throw new Error(a)}if(i.deleteShader(s),!i.getProgramParameter(o,i.LINK_STATUS)){const a=`GL program linking failed: ${i.getShaderInfoLog(s)}`;throw new Error(a)}return o}getUniformLocation(e){return this.uniformLocations_[e]===void 0&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]}getAttributeLocation(e){return this.attribLocations_[e]===void 0&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]}makeProjectionTransform(e,t){const i=e.size,r=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return reset(t),compose(t,0,0,2/(s*i[0]),2/(s*i[1]),-r,-o[0],-o[1]),t}setUniformFloatValue(e,t){this.getGL().uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.getGL().uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.getGL().uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,i,r,s){const o=this.getAttributeLocation(e);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,t,i,!1,r,s))}enableAttributes(e){const t=computeAttributesStride(e);let i=0;for(let r=0;r<e.length;r++){const s=e[r];this.enableAttributeArray_(s.name,s.size,s.type||FLOAT,t,i),i+=s.size*getByteSizeFromType(s.type)}}handleWebGLContextLost(){clear(this.bufferCache_),this.currentProgram_=null}handleWebGLContextRestored(){}createTexture(e,t,i){const r=this.getGL();i=i||r.createTexture();const s=0,o=r.RGBA,a=0,l=r.RGBA,c=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,i),t?r.texImage2D(r.TEXTURE_2D,s,o,l,c,t):r.texImage2D(r.TEXTURE_2D,s,o,e[0],e[1],a,l,c,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),i}}function computeAttributesStride(n){let e=0;for(let t=0;t<n.length;t++){const i=n[t];e+=i.size*getByteSizeFromType(i.type)}return e}function getByteSizeFromType(n){switch(n){case AttributeType.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case AttributeType.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case AttributeType.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case AttributeType.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class WebGLLayerRenderer extends LayerRenderer$1{constructor(e,t){super(e);t=t||{},this.inversePixelTransform_=create$3(),this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,e.addChangeListener(LayerProperty.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(RenderEventType.PRECOMPOSE)){const r=new RenderEvent$1(RenderEventType.PRECOMPOSE,void 0,t,e);i.dispatchEvent(r)}}dispatchPostComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(RenderEventType.POSTCOMPOSE)){const r=new RenderEvent$1(RenderEventType.POSTCOMPOSE,void 0,t,e);i.dispatchEvent(r)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,i=-1,r;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,c=l.getRenderer();if(!(c instanceof WebGLLayerRenderer)){t=!0;continue}const u=l.getClassName();if((t||u!==r)&&(i+=1,t=!1),r=u,c===this)break}const s="map/"+e.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(s))&&(this.removeHelper(),this.helper=new WebGLHelper({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),r&&(this.helper.getCanvas().className=r),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){compose(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const s=new RenderEvent$1(e,this.inversePixelTransform_,i,t);r.dispatchEvent(s)}}preRender(e,t){this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,t)}}var WebGLLayerRenderer$1=WebGLLayerRenderer;const Uniforms={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},Attributes={TEXTURE_COORD:"a_textureCoord"},attributeDescriptions=[{name:Attributes.TEXTURE_COORD,size:2,type:AttributeType.FLOAT}],empty={};function depthForZ(n){return 2*(1-1/(n+1))-1}function addTileTextureToLookup(n,e,t){t in n||(n[t]=[]),n[t].push(e)}function getRenderExtent(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=getIntersection(e,fromUserExtent(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=getIntersection(e,r))}return e}function getCacheKey(n,e){return`${n.getKey()},${getKey(e)}`}class WebGLTileLayerRenderer extends WebGLLayerRenderer$1{constructor(e,t){super(e,{uniforms:t.uniforms});this.renderComplete=!1,this.tileTransform_=create$3(),this.tempMat4_=create(),this.tempTileRange_=new TileRange$1(0,0,0,0),this.tempTileCoord_=createOrUpdate(0,0,0),this.tempSize_=[0,0],this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new WebGLArrayBuffer$1(ELEMENT_ARRAY_BUFFER,STATIC_DRAW),this.indices_.fromArray([0,1,3,1,2,3]);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileTextureCache_=new LRUCache$1(i),this.paletteTextures_=t.paletteTextures||[],this.frameState_=null,this.projection_=void 0}reset(e){super.reset({uniforms:e.uniforms}),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}isDrawableTile_(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return i==TileState.LOADED||i==TileState.EMPTY||i==TileState.ERROR&&!r}prepareFrameInternal(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;const i=this.getLayer().getRenderSource();return!i||isEmpty(getRenderExtent(e,e.extent))?!1:i.getState()==="ready"}enqueueTiles(e,t,i,r,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),u=l.getGutterForProjection(o.projection),h=getUid(l);h in e.wantedTiles||(e.wantedTiles[h]={});const d=e.wantedTiles[h],f=this.tileTextureCache_,g=a.getMapInternal(),_=Math.max(i-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection));for(let m=i;m>=_;--m){const y=c.getTileRangeForExtentAndZ(t,m,this.tempTileRange_),E=c.getResolution(m);for(let T=y.minX;T<=y.maxX;++T)for(let v=y.minY;v<=y.maxY;++v){const S=createOrUpdate(m,T,v,this.tempTileCoord_),$=getCacheKey(l,S);let b,A;if(f.containsKey($)&&(b=f.get($),A=b.tile),!b||b.tile.key!==l.getKey())if(A=l.getTile(m,T,v,e.pixelRatio,o.projection),!b)b=new TileTexture$1({tile:A,grid:c,helper:this.helper,gutter:u}),f.set($,b);else if(this.isDrawableTile_(A))b.setTile(A);else{const M=A.getInterimTile();b.setTile(M)}addTileTextureToLookup(r,b,m);const O=A.getKey();d[O]=!0,A.getState()===TileState.IDLE&&(e.tileQueue.isKeyQueued(O)||e.tileQueue.enqueue([A,h,c.getTileCoordCenter(S),E]))}}}renderFrame(e){this.frameState_=e,this.renderComplete=!0;const t=this.helper.getGL();this.preRender(t,e);const i=e.viewState,r=this.getLayer(),s=r.getRenderSource(),o=s.getTileGridForProjection(i.projection),a=s.getGutterForProjection(i.projection),l=getRenderExtent(e,e.extent),c=o.getZForResolution(i.resolution,s.zDirection),u={},h=r.getPreload();if(e.nextExtent){const b=o.getZForResolution(i.nextResolution,s.zDirection),A=getRenderExtent(e,e.nextExtent);this.enqueueTiles(e,A,b,u,h)}this.enqueueTiles(e,l,c,u,0),h>0&&setTimeout(()=>{this.enqueueTiles(e,l,c-1,u,h-1)},0);const d={},f=getUid(this),g=e.time;let _=!1;const m=u[c];for(let b=0,A=m.length;b<A;++b){const O=m[b],M=O.tile;if(M instanceof ReprojTile$1&&M.getState()===TileState.EMPTY)continue;const j=M.tileCoord;if(O.loaded){const N=M.getAlpha(f,g);if(N===1){M.endTransition(f);continue}_=!0;const I=getKey(j);d[I]=N}if(this.renderComplete=!1,this.findAltTiles_(o,j,c+1,u))continue;const L=o.getMinZoom();for(let N=c-1;N>=L&&!this.findAltTiles_(o,j,N,u);--N);}this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e,!_);const y=Object.keys(u).map(Number).sort(numberSafeCompareFunction),E=i.center[0],T=i.center[1];for(let b=0,A=y.length;b<A;++b){const O=y[b],M=o.getResolution(O),j=toSize(o.getTileSize(O),this.tempSize_),z=o.getOrigin(O),L=j[0]+2*a,N=j[1]+2*a,I=L/N,P=(E-z[0])/(j[0]*M),R=(z[1]-T)/(j[1]*M),D=i.resolution/M,V=depthForZ(O),K=u[O];for(let J=0,F=K.length;J<F;++J){const ee=K[J];if(!ee.loaded)continue;const te=ee.tile.tileCoord,ge=getKey(te),le=te[1],se=te[2];reset(this.tileTransform_),scale$2(this.tileTransform_,2/(e.size[0]*D/L),-2/(e.size[1]*D/L)),rotate$2(this.tileTransform_,i.rotation),scale$2(this.tileTransform_,1,1/I),translate$1(this.tileTransform_,(j[0]*(le-P)-a)/L,(j[1]*(se-R)-a)/N),this.helper.setUniformMatrixValue(Uniforms.TILE_TRANSFORM,fromTransform(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(ee.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(attributeDescriptions);let ie=0;for(;ie<ee.textures.length;){const de="TEXTURE"+ie,x=`${Uniforms.TILE_TEXTURE_ARRAY}[${ie}]`;t.activeTexture(t[de]),t.bindTexture(t.TEXTURE_2D,ee.textures[ie]),t.uniform1i(this.helper.getUniformLocation(x),ie),++ie}for(let de=0;de<this.paletteTextures_.length;++de){const x=this.paletteTextures_[de];t.activeTexture(t["TEXTURE"+ie]);const C=x.getTexture(t);t.bindTexture(t.TEXTURE_2D,C),t.uniform1i(this.helper.getUniformLocation(x.name),ie),++ie}const ue=ge in d?d[ge]:1;ue<1&&(e.animate=!0),this.helper.setUniformFloatValue(Uniforms.TRANSITION_ALPHA,ue),this.helper.setUniformFloatValue(Uniforms.DEPTH,V),this.helper.setUniformFloatValue(Uniforms.TEXTURE_PIXEL_WIDTH,L),this.helper.setUniformFloatValue(Uniforms.TEXTURE_PIXEL_HEIGHT,N),this.helper.setUniformFloatValue(Uniforms.TEXTURE_RESOLUTION,M),this.helper.setUniformFloatValue(Uniforms.TEXTURE_ORIGIN_X,z[0]+le*j[0]*M-a*M),this.helper.setUniformFloatValue(Uniforms.TEXTURE_ORIGIN_Y,z[1]-se*j[1]*M+a*M);let fe=l;a>0&&(fe=o.getTileCoordExtent(te),getIntersection(fe,l,fe)),this.helper.setUniformFloatVec4(Uniforms.RENDER_EXTENT,fe),this.helper.setUniformFloatValue(Uniforms.RESOLUTION,i.resolution),this.helper.setUniformFloatValue(Uniforms.ZOOM,i.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const v=this.helper.getCanvas(),S=this.tileTextureCache_;for(;S.canExpireCache();)S.pop().dispose();const $=function(b,A){s.updateCacheSize(.1,A.viewState.projection),s.expireCache(A.viewState.projection,empty)};return e.postRenderFunctions.push($),this.postRender(t,e),v}getData(e){if(!this.helper.getGL())return null;const i=this.frameState_;if(!i)return null;const r=this.getLayer(),s=apply(i.pixelToCoordinateTransform,e.slice()),o=i.viewState,a=r.getExtent();if(a&&!containsCoordinate(fromUserExtent(a,o.projection),s))return null;const l=r.getSources(boundingExtent([s]),o.resolution);let c,u,h;for(c=l.length-1;c>=0;--c)if(u=l[c],u.getState()==="ready"){if(h=u.getTileGridForProjection(o.projection),u.getWrapX())break;const f=h.getExtent();if(!f||containsCoordinate(f,s))break}if(c<0)return null;const d=this.tileTextureCache_;for(let f=h.getZForResolution(o.resolution);f>=h.getMinZoom();--f){const g=h.getTileCoordForCoordAndZ(s,f),_=getCacheKey(u,g);if(!d.containsKey(_))continue;const m=d.get(_),y=m.tile;if(y instanceof ReprojTile$1&&y.getState()===TileState.EMPTY)return null;if(!m.loaded)continue;const E=h.getOrigin(f),T=toSize(h.getTileSize(f)),v=h.getResolution(f),S=(s[0]-E[0])/v-g[1]*T[0],$=(E[1]-s[1])/v-g[2]*T[1];return m.getPixelData(S,$)}return null}findAltTiles_(e,t,i,r){const s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileTextureCache_,l=this.getLayer().getRenderSource();for(let c=s.minX;c<=s.maxX;++c)for(let u=s.minY;u<=s.maxY;++u){const h=getCacheKey(l,[i,c,u]);let d=!1;if(a.containsKey(h)){const f=a.get(h);f.loaded&&(addTileTextureToLookup(r,f,i),d=!0)}d||(o=!1)}return o}clearCache(){const e=this.tileTextureCache_;e.forEach(t=>t.dispose()),e.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){const e=this.helper;e&&(e.getGL().deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_}}var WebGLTileLayerRenderer$1=WebGLTileLayerRenderer;class PaletteTexture{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}}var PaletteTexture$1=PaletteTexture;const ValueTypes={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},Operators={};function getValueType(n){if(typeof n=="number")return ValueTypes.NUMBER;if(typeof n=="boolean")return ValueTypes.BOOLEAN;if(typeof n=="string")return isStringColor(n)?ValueTypes.COLOR|ValueTypes.STRING:ValueTypes.STRING;if(!Array.isArray(n))throw new Error(`Unhandled value type: ${JSON.stringify(n)}`);const e=n;if(e.every(function(r){return typeof r=="number"}))return e.length===3||e.length===4?ValueTypes.COLOR|ValueTypes.NUMBER_ARRAY:ValueTypes.NUMBER_ARRAY;if(typeof e[0]!="string")throw new Error(`Expected an expression operator but received: ${JSON.stringify(e)}`);const i=Operators[e[0]];if(i===void 0)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return i.getReturnType(e.slice(1))}function isTypeUnique(n){return Math.log2(n)%1==0}function numberToGlsl(n){const e=n.toString();return e.includes(".")?e:e+".0"}function arrayToGlsl(n){if(n.length<2||n.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${n.length}(${n.map(numberToGlsl).join(", ")})`}function colorToGlsl(n){const e=asArray(n).slice();return e.length<4&&e.push(1),arrayToGlsl(e.map(function(t,i){return i<3?t/255:t}))}function getStringNumberEquivalent(n,e){return n.stringLiteralsMap[e]===void 0&&(n.stringLiteralsMap[e]=Object.keys(n.stringLiteralsMap).length),n.stringLiteralsMap[e]}function stringToGlsl(n,e){return numberToGlsl(getStringNumberEquivalent(n,e))}function expressionToGlsl(n,e,t){if(Array.isArray(e)&&typeof e[0]=="string"){const r=Operators[e[0]];if(r===void 0)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return r.toGlsl(n,e.slice(1),t)}const i=getValueType(e);if((i&ValueTypes.NUMBER)>0)return numberToGlsl(e);if((i&ValueTypes.BOOLEAN)>0)return e.toString();if((i&ValueTypes.STRING)>0&&(t===void 0||t==ValueTypes.STRING))return stringToGlsl(n,e.toString());if((i&ValueTypes.COLOR)>0&&(t===void 0||t==ValueTypes.COLOR))return colorToGlsl(e);if((i&ValueTypes.NUMBER_ARRAY)>0)return arrayToGlsl(e);throw new Error(`Unexpected expression ${e} (expected type ${t})`)}function assertNumber(n){if(!(getValueType(n)&ValueTypes.NUMBER))throw new Error(`A numeric value was expected, got ${JSON.stringify(n)} instead`)}function assertNumbers(n){for(let e=0;e<n.length;e++)assertNumber(n[e])}function assertString(n){if(!(getValueType(n)&ValueTypes.STRING))throw new Error(`A string value was expected, got ${JSON.stringify(n)} instead`)}function assertBoolean(n){if(!(getValueType(n)&ValueTypes.BOOLEAN))throw new Error(`A boolean value was expected, got ${JSON.stringify(n)} instead`)}function assertArgsCount(n,e){if(n.length!==e)throw new Error(`Exactly ${e} arguments were expected, got ${n.length} instead`)}function assertArgsMinCount(n,e){if(n.length<e)throw new Error(`At least ${e} arguments were expected, got ${n.length} instead`)}function assertArgsMaxCount(n,e){if(n.length>e)throw new Error(`At most ${e} arguments were expected, got ${n.length} instead`)}function assertArgsEven(n){if(n.length%2!=0)throw new Error(`An even amount of arguments was expected, got ${n} instead`)}function assertArgsOdd(n){if(n.length%2==0)throw new Error(`An odd amount of arguments was expected, got ${n} instead`)}function assertUniqueInferredType(n,e){if(!isTypeUnique(e))throw new Error(`Could not infer only one type from the following expression: ${JSON.stringify(n)}`)}Operators.get={getReturnType:function(n){return ValueTypes.ANY},toGlsl:function(n,e){assertArgsCount(e,1),assertString(e[0]);const t=e[0].toString();return n.attributes.includes(t)||n.attributes.push(t),(n.inFragmentShader?"v_":"a_")+t}};function uniformNameForVariable(n){return"u_var_"+n}Operators.var={getReturnType:function(n){return ValueTypes.ANY},toGlsl:function(n,e){assertArgsCount(e,1),assertString(e[0]);const t=e[0].toString();return n.variables.includes(t)||n.variables.push(t),uniformNameForVariable(t)}};const PALETTE_TEXTURE_ARRAY="u_paletteTextures";Operators.palette={getReturnType:function(n){return ValueTypes.COLOR},toGlsl:function(n,e){assertArgsCount(e,2),assertNumber(e[0]);const t=expressionToGlsl(n,e[0]),i=e[1];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const r=i.length,s=new Uint8Array(r*4);for(let l=0;l<r;l++){const c=i[l];let u;if(typeof c=="string")u=fromString(c);else{if(!Array.isArray(c))throw new Error("The second argument of palette must be an array of strings or colors");const d=c.length;if(d===4)u=c;else{if(d!==3)throw new Error(`Expected palette color to have 3 or 4 values, got ${d}`);u=[c[0],c[1],c[2],1]}}const h=l*4;s[h]=u[0],s[h+1]=u[1],s[h+2]=u[2],s[h+3]=u[3]*255}n.paletteTextures||(n.paletteTextures=[]);const o=`${PALETTE_TEXTURE_ARRAY}[${n.paletteTextures.length}]`,a=new PaletteTexture$1(o,s);return n.paletteTextures.push(a),`texture2D(${o}, vec2((${t} + 0.5) / ${r}.0, 0.5))`}};const GET_BAND_VALUE_FUNC="getBandValue";Operators.band={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){assertArgsMinCount(e,1),assertArgsMaxCount(e,3);const t=e[0];if(!(GET_BAND_VALUE_FUNC in n.functions)){let o="";const a=n.bandCount||1;for(let l=0;l<a;l++){const c=Math.floor(l/4);let u=l%4;l===a-1&&u===1&&(u=3);const h=`${Uniforms.TILE_TEXTURE_ARRAY}[${c}]`;o+=`
          if (band == ${l+1}.0) {
            return texture2D(${h}, v_textureCoord + vec2(dx, dy))[${u}];
          }
        `}n.functions[GET_BAND_VALUE_FUNC]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / ${Uniforms.TEXTURE_PIXEL_WIDTH};
          float dy = yOffset / ${Uniforms.TEXTURE_PIXEL_HEIGHT};
          ${o}
        }
      `}const i=expressionToGlsl(n,t),r=expressionToGlsl(n,e[1]||0),s=expressionToGlsl(n,e[2]||0);return`${GET_BAND_VALUE_FUNC}(${i}, ${r}, ${s})`}};Operators.time={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,0),"u_time"}};Operators.zoom={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,0),"u_zoom"}};Operators.resolution={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,0),"u_resolution"}};Operators["*"]={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`(${expressionToGlsl(n,e[0])} * ${expressionToGlsl(n,e[1])})`}};Operators["/"]={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`(${expressionToGlsl(n,e[0])} / ${expressionToGlsl(n,e[1])})`}};Operators["+"]={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`(${expressionToGlsl(n,e[0])} + ${expressionToGlsl(n,e[1])})`}};Operators["-"]={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`(${expressionToGlsl(n,e[0])} - ${expressionToGlsl(n,e[1])})`}};Operators.clamp={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){assertArgsCount(e,3),assertNumbers(e);const t=expressionToGlsl(n,e[1]),i=expressionToGlsl(n,e[2]);return`clamp(${expressionToGlsl(n,e[0])}, ${t}, ${i})`}};Operators["%"]={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`mod(${expressionToGlsl(n,e[0])}, ${expressionToGlsl(n,e[1])})`}};Operators["^"]={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`pow(${expressionToGlsl(n,e[0])}, ${expressionToGlsl(n,e[1])})`}};Operators.abs={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,1),assertNumbers(e),`abs(${expressionToGlsl(n,e[0])})`}};Operators.floor={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,1),assertNumbers(e),`floor(${expressionToGlsl(n,e[0])})`}};Operators.round={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,1),assertNumbers(e),`floor(${expressionToGlsl(n,e[0])} + 0.5)`}};Operators.ceil={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,1),assertNumbers(e),`ceil(${expressionToGlsl(n,e[0])})`}};Operators.sin={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,1),assertNumbers(e),`sin(${expressionToGlsl(n,e[0])})`}};Operators.cos={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsCount(e,1),assertNumbers(e),`cos(${expressionToGlsl(n,e[0])})`}};Operators.atan={getReturnType:function(n){return ValueTypes.NUMBER},toGlsl:function(n,e){return assertArgsMinCount(e,1),assertArgsMaxCount(e,2),assertNumbers(e),e.length===2?`atan(${expressionToGlsl(n,e[0])}, ${expressionToGlsl(n,e[1])})`:`atan(${expressionToGlsl(n,e[0])})`}};Operators[">"]={getReturnType:function(n){return ValueTypes.BOOLEAN},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`(${expressionToGlsl(n,e[0])} > ${expressionToGlsl(n,e[1])})`}};Operators[">="]={getReturnType:function(n){return ValueTypes.BOOLEAN},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`(${expressionToGlsl(n,e[0])} >= ${expressionToGlsl(n,e[1])})`}};Operators["<"]={getReturnType:function(n){return ValueTypes.BOOLEAN},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`(${expressionToGlsl(n,e[0])} < ${expressionToGlsl(n,e[1])})`}};Operators["<="]={getReturnType:function(n){return ValueTypes.BOOLEAN},toGlsl:function(n,e){return assertArgsCount(e,2),assertNumbers(e),`(${expressionToGlsl(n,e[0])} <= ${expressionToGlsl(n,e[1])})`}};function getEqualOperator(n){return{getReturnType:function(e){return ValueTypes.BOOLEAN},toGlsl:function(e,t){assertArgsCount(t,2);let i=ValueTypes.ANY;for(let r=0;r<t.length;r++)i&=getValueType(t[r]);if(i===ValueTypes.NONE)throw new Error(`All arguments should be of compatible type, got ${JSON.stringify(t)} instead`);return i&=~ValueTypes.COLOR,`(${expressionToGlsl(e,t[0],i)} ${n} ${expressionToGlsl(e,t[1],i)})`}}}Operators["=="]=getEqualOperator("==");Operators["!="]=getEqualOperator("!=");Operators["!"]={getReturnType:function(n){return ValueTypes.BOOLEAN},toGlsl:function(n,e){return assertArgsCount(e,1),assertBoolean(e[0]),`(!${expressionToGlsl(n,e[0])})`}};function getDecisionOperator(n){return{getReturnType:function(e){return ValueTypes.BOOLEAN},toGlsl:function(e,t){assertArgsMinCount(t,2);for(let r=0;r<t.length;r++)assertBoolean(t[r]);let i="";return i=t.map(r=>expressionToGlsl(e,r)).join(` ${n} `),i=`(${i})`,i}}}Operators.all=getDecisionOperator("&&");Operators.any=getDecisionOperator("||");Operators.between={getReturnType:function(n){return ValueTypes.BOOLEAN},toGlsl:function(n,e){assertArgsCount(e,3),assertNumbers(e);const t=expressionToGlsl(n,e[1]),i=expressionToGlsl(n,e[2]),r=expressionToGlsl(n,e[0]);return`(${r} >= ${t} && ${r} <= ${i})`}};Operators.array={getReturnType:function(n){return ValueTypes.NUMBER_ARRAY},toGlsl:function(n,e){assertArgsMinCount(e,2),assertArgsMaxCount(e,4),assertNumbers(e);const t=e.map(function(i){return expressionToGlsl(n,i,ValueTypes.NUMBER)});return`vec${e.length}(${t.join(", ")})`}};Operators.color={getReturnType:function(n){return ValueTypes.COLOR},toGlsl:function(n,e){assertArgsMinCount(e,3),assertArgsMaxCount(e,4),assertNumbers(e);const t=e;e.length===3&&t.push(1);const i=e.map(function(r,s){return expressionToGlsl(n,r,ValueTypes.NUMBER)+(s<3?" / 255.0":"")});return`vec${e.length}(${i.join(", ")})`}};Operators.interpolate={getReturnType:function(n){let e=ValueTypes.COLOR|ValueTypes.NUMBER;for(let t=3;t<n.length;t+=2)e=e&getValueType(n[t]);return e},toGlsl:function(n,e,t){assertArgsEven(e),assertArgsMinCount(e,6);const i=e[0];let r;switch(i[0]){case"linear":r=1;break;case"exponential":r=i[1];break;default:r=null}if(!r)throw new Error(`Invalid interpolation type for "interpolate" operator, received: ${JSON.stringify(i)}`);t=t!==void 0?t:ValueTypes.ANY;const s=Operators.interpolate.getReturnType(e)&t;assertUniqueInferredType(e,s);const o=expressionToGlsl(n,e[1]),a=numberToGlsl(r);let l="";for(let c=2;c<e.length-2;c+=2){const u=expressionToGlsl(n,e[c]),h=l||expressionToGlsl(n,e[c+1],s),d=expressionToGlsl(n,e[c+2]),f=expressionToGlsl(n,e[c+3],s);l=`mix(${h}, ${f}, pow(clamp((${o} - ${u}) / (${d} - ${u}), 0.0, 1.0), ${a}))`}return l}};Operators.match={getReturnType:function(n){let e=ValueTypes.ANY;for(let t=2;t<n.length;t+=2)e=e&getValueType(n[t]);return e=e&getValueType(n[n.length-1]),e},toGlsl:function(n,e,t){assertArgsEven(e),assertArgsMinCount(e,4),t=t!==void 0?t:ValueTypes.ANY;const i=Operators.match.getReturnType(e)&t;assertUniqueInferredType(e,i);const r=expressionToGlsl(n,e[0]),s=expressionToGlsl(n,e[e.length-1],i);let o=null;for(let a=e.length-3;a>=1;a-=2){const l=expressionToGlsl(n,e[a]),c=expressionToGlsl(n,e[a+1],i);o=`(${r} == ${l} ? ${c} : ${o||s})`}return o}};Operators.case={getReturnType:function(n){let e=ValueTypes.ANY;for(let t=1;t<n.length;t+=2)e=e&getValueType(n[t]);return e=e&getValueType(n[n.length-1]),e},toGlsl:function(n,e,t){assertArgsOdd(e),assertArgsMinCount(e,3),t=t!==void 0?t:ValueTypes.ANY;const i=Operators.case.getReturnType(e)&t;assertUniqueInferredType(e,i);for(let o=0;o<e.length-1;o+=2)assertBoolean(e[o]);const r=expressionToGlsl(n,e[e.length-1],i);let s=null;for(let o=e.length-3;o>=0;o-=2){const a=expressionToGlsl(n,e[o]),l=expressionToGlsl(n,e[o+1],i);s=`(${a} ? ${l} : ${s||r})`}return s}};function parseStyle(n,e){const t=`
    attribute vec2 ${Attributes.TEXTURE_COORD};
    uniform mat4 ${Uniforms.TILE_TRANSFORM};
    uniform float ${Uniforms.TEXTURE_PIXEL_WIDTH};
    uniform float ${Uniforms.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Uniforms.TEXTURE_RESOLUTION};
    uniform float ${Uniforms.TEXTURE_ORIGIN_X};
    uniform float ${Uniforms.TEXTURE_ORIGIN_Y};
    uniform float ${Uniforms.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${Attributes.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${Uniforms.TEXTURE_ORIGIN_X} + ${Uniforms.TEXTURE_RESOLUTION} * ${Uniforms.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${Uniforms.TEXTURE_ORIGIN_Y} - ${Uniforms.TEXTURE_RESOLUTION} * ${Uniforms.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${Uniforms.TILE_TRANSFORM} * vec4(${Attributes.TEXTURE_COORD}, ${Uniforms.DEPTH}, 1.0);
    }
  `,i={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},r=[];if(n.color!==void 0){const h=expressionToGlsl(i,n.color,ValueTypes.COLOR);r.push(`color = ${h};`)}if(n.contrast!==void 0){const h=expressionToGlsl(i,n.contrast,ValueTypes.NUMBER);r.push(`color.rgb = clamp((${h} + 1.0) * color.rgb - (${h} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(n.exposure!==void 0){const h=expressionToGlsl(i,n.exposure,ValueTypes.NUMBER);r.push(`color.rgb = clamp((${h} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(n.saturation!==void 0){const h=expressionToGlsl(i,n.saturation,ValueTypes.NUMBER);r.push(`
      float saturation = ${h} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(n.gamma!==void 0){const h=expressionToGlsl(i,n.gamma,ValueTypes.NUMBER);r.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${h}));`)}if(n.brightness!==void 0){const h=expressionToGlsl(i,n.brightness,ValueTypes.NUMBER);r.push(`color.rgb = clamp(color.rgb + ${h}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=i.variables.length;if(o>1&&!n.variables)throw new Error(`Missing variables in style (expected ${i.variables})`);for(let h=0;h<o;++h){const d=i.variables[h];if(!(d in n.variables))throw new Error(`Missing '${d}' in style variables`);const f=uniformNameForVariable(d);s[f]=function(){let g=n.variables[d];return typeof g=="string"&&(g=getStringNumberEquivalent(i,g)),g!==void 0?g:-9999999}}const a=Object.keys(s).map(function(h){return`uniform float ${h};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${Uniforms.TILE_TEXTURE_ARRAY}[${l}];`),i.paletteTextures&&a.push(`uniform sampler2D ${PALETTE_TEXTURE_ARRAY}[${i.paletteTextures.length}];`);const c=Object.keys(i.functions).map(function(h){return i.functions[h]}),u=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${Uniforms.RENDER_EXTENT};
    uniform float ${Uniforms.TRANSITION_ALPHA};
    uniform float ${Uniforms.TEXTURE_PIXEL_WIDTH};
    uniform float ${Uniforms.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Uniforms.RESOLUTION};
    uniform float ${Uniforms.ZOOM};

    ${a.join(`
`)}

    ${c.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${Uniforms.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${Uniforms.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${Uniforms.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${Uniforms.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${Uniforms.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${r.join(`
`)}

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${Uniforms.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:u,uniforms:s,paletteTextures:i.paletteTextures}}class WebGLTileLayer extends BaseTileLayer$1{constructor(e){e=e?Object.assign({},e):{};const t=e.style||{};delete e.style;const i=e.cacheSize;delete e.cacheSize;super(e);this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.cacheSize_=i,this.styleVariables_=this.style_.variables||{},this.addChangeListener(LayerProperty.SOURCE,this.handleSourceUpdate_)}getSources(e,t){const i=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:i?[i]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=parseStyle(this.style_,this.getSourceBandCount_());return new WebGLTileLayerRenderer$1(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}renderSources(e,t){const i=this.getRenderer();let r;for(let s=0,o=t.length;s<o;++s)this.renderedSource_=t[s],i.prepareFrame(e)&&(r=i.renderFrame(e));return r}render(e,t){this.rendered=!0;const i=e.viewState,r=this.getSources(e.extent,i.resolution);let s=!0;for(let a=0,l=r.length;a<l;++a){const c=r[a],u=c.getState();if(u=="loading"){const h=()=>{c.getState()=="ready"&&(c.removeEventListener("change",h),this.changed())};c.addEventListener("change",h)}s=s&&u=="ready"}const o=this.renderSources(e,r);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=i.resolution,o;if(this.renderedResolution_>.5*i.resolution){const a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!r.includes(l));if(a.length>0)return this.renderSources(e,a)}return o}setStyle(e){this.styleVariables_=e.variables||{},this.style_=e;const t=parseStyle(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}WebGLTileLayer.prototype.dispose;var TileLayer=WebGLTileLayer,TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function createFromTemplate(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=e.getFullTileRange(c);return assert(u,55),(u.getHeight()-o[2]-1).toString()})}}function createFromTemplates(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=createFromTemplate(n[r],e);return createFromTileUrlFunctions(i)}function createFromTileUrlFunctions(n){return n.length===1?n[0]:function(e,t,i){if(e){const r=hash(e),s=modulo(r,n.length);return n[s](e,t,i)}else return}}function expandUrl(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}class UrlTile extends TileSource$1{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection});this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=getUid(t),r=t.getState();let s;r==TileState.LOADING?(this.tileLoadingKeys_[i]=!0,s=TileEventType.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==TileState.ERROR?TileEventType.TILELOADERROR:r==TileState.LOADED?TileEventType.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new TileSourceEvent(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t!="undefined"?this.setKey(t):this.changed()}setUrl(e){const t=expandUrl(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=getKeyZXY(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}var UrlTile$1=UrlTile;class TileImage extends UrlTile$1{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection});this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile$1,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||equivalent(t,e)))return this.tileGrid;{const i=getUid(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=getForProjection(e)),this.tileGridForProjection[i]}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||equivalent(t,e))return this.tileCache;{const i=getUid(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new TileCache$1(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(e,t,i,r,s,o){const a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?TileState.IDLE:TileState.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||equivalent(o,s))return this.getTileInternal(e,t,i,r,o||s);{const a=this.getTileCacheForProjection(s),l=[e,t,i];let c;const u=getKey(l);a.containsKey(u)&&(c=a.get(u));const h=this.getKey();if(c&&c.key==h)return c;{const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),_=new ReprojTile$1(o,d,s,f,l,g,this.getTilePixelRatio(r),this.getGutter(),function(m,y,E,T){return this.getTileInternal(m,y,E,T,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return _.key=h,c?(_.interimTile=c,_.refreshInterimChain(),a.replace(u,_)):a.set(u,_),_}}}getTileInternal(e,t,i,r,s){let o=null;const a=getKeyZXY(e,t,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,i,r,s,l),c.getState()==TileState.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=get(e);if(i){const r=getUid(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function defaultTileLoadFunction(n,e){n.getImage().src=e}var TileImage$1=TileImage;class XYZ extends TileImage$1{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:createXYZ({extent:extentFromProjection(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection});this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}var XYZ$1=XYZ;export{ref as $,createElementBlock as A,createBaseVNode as B,Circle as C,Fragment as D,renderList as E,Fill$1 as F,GeoJSON$1 as G,unref as H,pushScopeId as I,popScopeId as J,VectorLayer$1 as K,LayerGroup$1 as L,Map$2 as M,normalizeClass as N,withModifiers as O,Polygon$1 as P,vModelCheckbox as Q,RenderFeature$1 as R,Style$1 as S,Text$1 as T,toDisplayString as U,VectorSource$1 as V,createTextVNode as W,ImageLayer$1 as X,Static$1 as Y,transformExtent as Z,RasterSource$1 as _,Stroke$1 as a,createBlock as a0,resolveDynamicComponent as a1,shallowRef as a2,computed as a3,vModelRadio as a4,createCommentVNode as a5,transform as a6,extend$1 as a7,isEmpty as a8,createEmpty as a9,View$1 as aa,defaults$8 as ab,ZoomSlider$1 as ac,ZoomToExtent$1 as ad,FullScreen$1 as ae,Attribution$1 as af,TileLayer as ag,XYZ$1 as ah,Collection$1 as ai,Graticule$1 as aj,normalizeStyle as ak,nextTick as al,createVNode as am,createApp as an,MultiPolygon$1 as b,colormap as c,Point$1 as d,MultiPoint$1 as e,LineString$1 as f,MultiLineString$1 as g,SimpleGeometry$1 as h,Feature$1 as i,dayjs as j,customParseFormat as k,axios as l,TextFeature$1 as m,get as n,FeatureFormat as o,minimal as p,lib as q,reactive as r,onMounted as s,transformGeometryWithOptions as t,onUnmounted as u,defineComponent as v,watch as w,resolveDirective as x,withDirectives as y,openBlock as z};
